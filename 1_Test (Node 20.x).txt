2026-01-11T16:57:43.6827008Z Current runner version: '2.330.0'
2026-01-11T16:57:43.6860480Z ##[group]Runner Image Provisioner
2026-01-11T16:57:43.6862170Z Hosted Compute Agent
2026-01-11T16:57:43.6862966Z Version: 20251211.462
2026-01-11T16:57:43.6863945Z Commit: 6cbad8c2bb55d58165063d031ccabf57e2d2db61
2026-01-11T16:57:43.6865177Z Build Date: 2025-12-11T16:28:49Z
2026-01-11T16:57:43.6866147Z Worker ID: {aea64277-ef42-4526-a90d-fcec26a5c723}
2026-01-11T16:57:43.6867283Z ##[endgroup]
2026-01-11T16:57:43.6868200Z ##[group]Operating System
2026-01-11T16:57:43.6869069Z Ubuntu
2026-01-11T16:57:43.6869957Z 24.04.3
2026-01-11T16:57:43.6870818Z LTS
2026-01-11T16:57:43.6871535Z ##[endgroup]
2026-01-11T16:57:43.6872364Z ##[group]Runner Image
2026-01-11T16:57:43.6873308Z Image: ubuntu-24.04
2026-01-11T16:57:43.6874117Z Version: 20260105.202.1
2026-01-11T16:57:43.6875802Z Included Software: https://github.com/actions/runner-images/blob/ubuntu24/20260105.202/images/ubuntu/Ubuntu2404-Readme.md
2026-01-11T16:57:43.6878419Z Image Release: https://github.com/actions/runner-images/releases/tag/ubuntu24%2F20260105.202
2026-01-11T16:57:43.6880257Z ##[endgroup]
2026-01-11T16:57:43.6884876Z ##[group]GITHUB_TOKEN Permissions
2026-01-11T16:57:43.6887869Z Actions: write
2026-01-11T16:57:43.6888806Z ArtifactMetadata: write
2026-01-11T16:57:43.6889896Z Attestations: write
2026-01-11T16:57:43.6890707Z Checks: write
2026-01-11T16:57:43.6891617Z Contents: write
2026-01-11T16:57:43.6892344Z Deployments: write
2026-01-11T16:57:43.6893190Z Discussions: write
2026-01-11T16:57:43.6894133Z Issues: write
2026-01-11T16:57:43.6894923Z Metadata: read
2026-01-11T16:57:43.6895625Z Models: read
2026-01-11T16:57:43.6897061Z Packages: write
2026-01-11T16:57:43.6897852Z Pages: write
2026-01-11T16:57:43.6898649Z PullRequests: write
2026-01-11T16:57:43.6899918Z RepositoryProjects: write
2026-01-11T16:57:43.6900887Z SecurityEvents: write
2026-01-11T16:57:43.6901857Z Statuses: write
2026-01-11T16:57:43.6902770Z ##[endgroup]
2026-01-11T16:57:43.6906475Z Secret source: Actions
2026-01-11T16:57:43.6907896Z Prepare workflow directory
2026-01-11T16:57:43.7381856Z Prepare all required actions
2026-01-11T16:57:43.7439035Z Getting action download info
2026-01-11T16:57:44.0155214Z Download action repository 'actions/checkout@v4' (SHA:34e114876b0b11c390a56381ad16ebd13914f8d5)
2026-01-11T16:57:44.1106999Z Download action repository 'actions/setup-node@v4' (SHA:49933ea5288caeca8642d1e84afbd3f7d6820020)
2026-01-11T16:57:44.2440975Z Download action repository 'actions/upload-artifact@v4' (SHA:ea165f8d65b6e75b540449e92b4886f43607fa02)
2026-01-11T16:57:44.4894772Z Complete job name: Test (Node 20.x)
2026-01-11T16:57:44.5586139Z ##[group]Run actions/checkout@v4
2026-01-11T16:57:44.5587058Z with:
2026-01-11T16:57:44.5587503Z   repository: nfe/client-nodejs
2026-01-11T16:57:44.5588258Z   token: ***
2026-01-11T16:57:44.5588671Z   ssh-strict: true
2026-01-11T16:57:44.5589080Z   ssh-user: git
2026-01-11T16:57:44.5589752Z   persist-credentials: true
2026-01-11T16:57:44.5590241Z   clean: true
2026-01-11T16:57:44.5590701Z   sparse-checkout-cone-mode: true
2026-01-11T16:57:44.5591212Z   fetch-depth: 1
2026-01-11T16:57:44.5591630Z   fetch-tags: false
2026-01-11T16:57:44.5592060Z   show-progress: true
2026-01-11T16:57:44.5592492Z   lfs: false
2026-01-11T16:57:44.5592900Z   submodules: false
2026-01-11T16:57:44.5593345Z   set-safe-directory: true
2026-01-11T16:57:44.5594146Z ##[endgroup]
2026-01-11T16:57:44.6695255Z Syncing repository: nfe/client-nodejs
2026-01-11T16:57:44.6697290Z ##[group]Getting Git version info
2026-01-11T16:57:44.6698224Z Working directory is '/home/runner/work/client-nodejs/client-nodejs'
2026-01-11T16:57:44.6700365Z [command]/usr/bin/git version
2026-01-11T16:57:44.6776562Z git version 2.52.0
2026-01-11T16:57:44.6805377Z ##[endgroup]
2026-01-11T16:57:44.6823796Z Temporarily overriding HOME='/home/runner/work/_temp/e26af3e1-ce07-40b7-b36b-f82d87fbe3a0' before making global git config changes
2026-01-11T16:57:44.6826128Z Adding repository directory to the temporary git global config as a safe directory
2026-01-11T16:57:44.6842403Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/client-nodejs/client-nodejs
2026-01-11T16:57:44.6886509Z Deleting the contents of '/home/runner/work/client-nodejs/client-nodejs'
2026-01-11T16:57:44.6890662Z ##[group]Initializing the repository
2026-01-11T16:57:44.6895903Z [command]/usr/bin/git init /home/runner/work/client-nodejs/client-nodejs
2026-01-11T16:57:44.7001081Z hint: Using 'master' as the name for the initial branch. This default branch name
2026-01-11T16:57:44.7003185Z hint: will change to "main" in Git 3.0. To configure the initial branch name
2026-01-11T16:57:44.7006435Z hint: to use in all of your new repositories, which will suppress this warning,
2026-01-11T16:57:44.7007745Z hint: call:
2026-01-11T16:57:44.7008479Z hint:
2026-01-11T16:57:44.7009699Z hint: 	git config --global init.defaultBranch <name>
2026-01-11T16:57:44.7010800Z hint:
2026-01-11T16:57:44.7011792Z hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and
2026-01-11T16:57:44.7013475Z hint: 'development'. The just-created branch can be renamed via this command:
2026-01-11T16:57:44.7014835Z hint:
2026-01-11T16:57:44.7015625Z hint: 	git branch -m <name>
2026-01-11T16:57:44.7016381Z hint:
2026-01-11T16:57:44.7017436Z hint: Disable this message with "git config set advice.defaultBranchName false"
2026-01-11T16:57:44.7019281Z Initialized empty Git repository in /home/runner/work/client-nodejs/client-nodejs/.git/
2026-01-11T16:57:44.7022572Z [command]/usr/bin/git remote add origin https://github.com/nfe/client-nodejs
2026-01-11T16:57:44.7056730Z ##[endgroup]
2026-01-11T16:57:44.7058117Z ##[group]Disabling automatic garbage collection
2026-01-11T16:57:44.7061471Z [command]/usr/bin/git config --local gc.auto 0
2026-01-11T16:57:44.7094862Z ##[endgroup]
2026-01-11T16:57:44.7096196Z ##[group]Setting up auth
2026-01-11T16:57:44.7102742Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2026-01-11T16:57:44.7136773Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2026-01-11T16:57:44.7500124Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2026-01-11T16:57:44.7529837Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2026-01-11T16:57:44.7772226Z [command]/usr/bin/git config --local --name-only --get-regexp ^includeIf\.gitdir:
2026-01-11T16:57:44.7803435Z [command]/usr/bin/git submodule foreach --recursive git config --local --show-origin --name-only --get-regexp remote.origin.url
2026-01-11T16:57:44.8042045Z [command]/usr/bin/git config --local http.https://github.com/.extraheader AUTHORIZATION: basic ***
2026-01-11T16:57:44.8078207Z ##[endgroup]
2026-01-11T16:57:44.8079716Z ##[group]Fetching the repository
2026-01-11T16:57:44.8088123Z [command]/usr/bin/git -c protocol.version=2 fetch --no-tags --prune --no-recurse-submodules --depth=1 origin +a771f030fcbb2b3435623cbab00424ea942afa7b:refs/remotes/origin/v3
2026-01-11T16:57:45.3657116Z From https://github.com/nfe/client-nodejs
2026-01-11T16:57:45.3660995Z  * [new ref]         a771f030fcbb2b3435623cbab00424ea942afa7b -> origin/v3
2026-01-11T16:57:45.3690693Z ##[endgroup]
2026-01-11T16:57:45.3691744Z ##[group]Determining the checkout info
2026-01-11T16:57:45.3693306Z ##[endgroup]
2026-01-11T16:57:45.3697413Z [command]/usr/bin/git sparse-checkout disable
2026-01-11T16:57:45.3739624Z [command]/usr/bin/git config --local --unset-all extensions.worktreeConfig
2026-01-11T16:57:45.3764600Z ##[group]Checking out the ref
2026-01-11T16:57:45.3767949Z [command]/usr/bin/git checkout --progress --force -B v3 refs/remotes/origin/v3
2026-01-11T16:57:45.3938347Z Switched to a new branch 'v3'
2026-01-11T16:57:45.3940606Z branch 'v3' set up to track 'origin/v3'.
2026-01-11T16:57:45.3950093Z ##[endgroup]
2026-01-11T16:57:45.3983686Z [command]/usr/bin/git log -1 --format=%H
2026-01-11T16:57:45.4004828Z a771f030fcbb2b3435623cbab00424ea942afa7b
2026-01-11T16:57:45.4346113Z ##[group]Run actions/setup-node@v4
2026-01-11T16:57:45.4347423Z with:
2026-01-11T16:57:45.4348280Z   node-version: 20.x
2026-01-11T16:57:45.4349185Z   cache: npm
2026-01-11T16:57:45.4350302Z   always-auth: false
2026-01-11T16:57:45.4351244Z   check-latest: false
2026-01-11T16:57:45.4352580Z   token: ***
2026-01-11T16:57:45.4353386Z ##[endgroup]
2026-01-11T16:57:45.6513922Z Found in cache @ /opt/hostedtoolcache/node/20.19.6/x64
2026-01-11T16:57:45.6521243Z ##[group]Environment details
2026-01-11T16:57:47.8534200Z node: v20.19.6
2026-01-11T16:57:47.8534941Z npm: 10.8.2
2026-01-11T16:57:47.8535217Z yarn: 1.22.22
2026-01-11T16:57:47.8536193Z ##[endgroup]
2026-01-11T16:57:47.8558308Z [command]/opt/hostedtoolcache/node/20.19.6/x64/bin/npm config get cache
2026-01-11T16:57:48.1193519Z /home/runner/.npm
2026-01-11T16:57:48.2312372Z Cache hit for: node-cache-Linux-x64-npm-79533a046739a4b7054b7da16e0e319fc41b4abcbdf12622349b24825ea64787
2026-01-11T16:57:48.5826268Z Received 34248714 of 34248714 (100.0%), 108.9 MBs/sec
2026-01-11T16:57:48.5827014Z Cache Size: ~33 MB (34248714 B)
2026-01-11T16:57:48.5856003Z [command]/usr/bin/tar -xf /home/runner/work/_temp/121df265-8fe0-4331-bf75-89044bcc9bd1/cache.tzst -P -C /home/runner/work/client-nodejs/client-nodejs --use-compress-program unzstd
2026-01-11T16:57:48.7044334Z Cache restored successfully
2026-01-11T16:57:48.7113057Z Cache restored from key: node-cache-Linux-x64-npm-79533a046739a4b7054b7da16e0e319fc41b4abcbdf12622349b24825ea64787
2026-01-11T16:57:48.7262899Z ##[group]Run npm ci
2026-01-11T16:57:48.7263210Z [36;1mnpm ci[0m
2026-01-11T16:57:48.7307596Z shell: /usr/bin/bash -e {0}
2026-01-11T16:57:48.7376328Z ##[endgroup]
2026-01-11T16:57:51.2365848Z npm warn deprecated inflight@1.0.6: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.
2026-01-11T16:57:51.3028663Z npm warn deprecated @humanwhocodes/config-array@0.13.0: Use @eslint/config-array instead
2026-01-11T16:57:51.3204625Z npm warn deprecated rimraf@3.0.2: Rimraf versions prior to v4 are no longer supported
2026-01-11T16:57:51.3558626Z npm warn deprecated @humanwhocodes/object-schema@2.0.3: Use @eslint/object-schema instead
2026-01-11T16:57:51.3565805Z npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
2026-01-11T16:57:51.3570593Z npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
2026-01-11T16:57:51.5319958Z npm warn deprecated source-map@0.8.0-beta.0: The work that was done in this beta branch won't be included in future versions
2026-01-11T16:57:52.2509131Z npm warn deprecated eslint@8.57.1: This version is no longer supported. Please see https://eslint.org/version-support for other options.
2026-01-11T16:57:52.5016840Z 
2026-01-11T16:57:52.5018578Z added 318 packages, and audited 319 packages in 4s
2026-01-11T16:57:52.5019085Z 
2026-01-11T16:57:52.5019560Z 88 packages are looking for funding
2026-01-11T16:57:52.5020107Z   run `npm fund` for details
2026-01-11T16:57:52.5353604Z 
2026-01-11T16:57:52.5354418Z 8 vulnerabilities (7 moderate, 1 high)
2026-01-11T16:57:52.5354848Z 
2026-01-11T16:57:52.5356153Z To address issues that do not require attention, run:
2026-01-11T16:57:52.5356783Z   npm audit fix
2026-01-11T16:57:52.5357081Z 
2026-01-11T16:57:52.5357500Z To address all issues (including breaking changes), run:
2026-01-11T16:57:52.5358187Z   npm audit fix --force
2026-01-11T16:57:52.5358457Z 
2026-01-11T16:57:52.5358683Z Run `npm audit` for details.
2026-01-11T16:57:52.5627997Z ##[group]Run npm run validate:spec
2026-01-11T16:57:52.5628334Z [36;1mnpm run validate:spec[0m
2026-01-11T16:57:52.5660573Z shell: /usr/bin/bash -e {0}
2026-01-11T16:57:52.5660806Z ##[endgroup]
2026-01-11T16:57:52.6908420Z 
2026-01-11T16:57:52.6909971Z > nfe-io@3.0.0 validate:spec
2026-01-11T16:57:52.6910867Z > tsx scripts/validate-spec.ts
2026-01-11T16:57:52.6911829Z 
2026-01-11T16:57:53.0483294Z 🔍 Validating OpenAPI specifications...
2026-01-11T16:57:53.0485566Z 
2026-01-11T16:57:53.0488361Z Found 12 spec file(s) to validate
2026-01-11T16:57:53.0488667Z 
2026-01-11T16:57:53.1090656Z ✓ calculo-impostos-v1.yaml - 6 warning(s)
2026-01-11T16:57:53.1092243Z   Warnings:
2026-01-11T16:57:53.1092543Z     ⚠️  No servers defined
2026-01-11T16:57:53.1092772Z        at: servers
2026-01-11T16:57:53.1093111Z        💡 Consider adding at least one server URL
2026-01-11T16:57:53.1093639Z     ⚠️  Operation GET /tax-codes/operation-code missing operationId
2026-01-11T16:57:53.1094147Z        at: paths./tax-codes/operation-code.get
2026-01-11T16:57:53.1094557Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.1095053Z     ⚠️  Operation GET /tax-codes/acquisition-purpose missing operationId
2026-01-11T16:57:53.1095489Z        at: paths./tax-codes/acquisition-purpose.get
2026-01-11T16:57:53.1095939Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.1096420Z     ⚠️  Operation GET /tax-codes/issuer-tax-profile missing operationId
2026-01-11T16:57:53.1096834Z        at: paths./tax-codes/issuer-tax-profile.get
2026-01-11T16:57:53.1097228Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.1097757Z     ⚠️  Operation GET /tax-codes/recipient-tax-profile missing operationId
2026-01-11T16:57:53.1098194Z        at: paths./tax-codes/recipient-tax-profile.get
2026-01-11T16:57:53.1098583Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.1099260Z     ⚠️  Operation POST /tax-rules/{tenantId}/engine/calculate missing operationId
2026-01-11T16:57:53.1103780Z        at: paths./tax-rules/{tenantId}/engine/calculate.post
2026-01-11T16:57:53.1104559Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.1104916Z 
2026-01-11T16:57:53.1791642Z ✓ consulta-cnpj.yaml - 2 warning(s)
2026-01-11T16:57:53.1795474Z   Warnings:
2026-01-11T16:57:53.1799128Z     ⚠️  Swagger 2.0 spec detected (2.0)
2026-01-11T16:57:53.1802933Z        at: swagger
2026-01-11T16:57:53.1805352Z        💡 Consider converting to OpenAPI 3.0 for better tooling support
2026-01-11T16:57:53.1806655Z     ⚠️  No servers defined
2026-01-11T16:57:53.1807239Z        at: servers
2026-01-11T16:57:53.1808037Z        💡 Consider adding at least one server URL
2026-01-11T16:57:53.1819331Z 
2026-01-11T16:57:53.2097226Z ✓ consulta-cte-v2.yaml - 7 warning(s)
2026-01-11T16:57:53.2099114Z   Warnings:
2026-01-11T16:57:53.2100297Z     ⚠️  Operation GET /v2/companies/{companyId}/inbound/transportationinvoices missing operationId
2026-01-11T16:57:53.2101330Z        at: paths./v2/companies/{companyId}/inbound/transportationinvoices.get
2026-01-11T16:57:53.2102147Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.2103108Z     ⚠️  Operation POST /v2/companies/{companyId}/inbound/transportationinvoices missing operationId
2026-01-11T16:57:53.2104108Z        at: paths./v2/companies/{companyId}/inbound/transportationinvoices.post
2026-01-11T16:57:53.2104903Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.2105922Z     ⚠️  Operation DELETE /v2/companies/{companyId}/inbound/transportationinvoices missing operationId
2026-01-11T16:57:53.2106949Z        at: paths./v2/companies/{companyId}/inbound/transportationinvoices.delete
2026-01-11T16:57:53.2107762Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.2108647Z     ⚠️  Operation GET /v2/companies/{company_id}/inbound/{access_key} missing operationId
2026-01-11T16:57:53.2109674Z        at: paths./v2/companies/{company_id}/inbound/{access_key}.get
2026-01-11T16:57:53.2110927Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.2111890Z     ⚠️  Operation GET /v2/companies/{company_id}/inbound/{access_key}/xml missing operationId
2026-01-11T16:57:53.2112811Z        at: paths./v2/companies/{company_id}/inbound/{access_key}/xml.get
2026-01-11T16:57:53.2113811Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.2114874Z     ⚠️  Operation GET /v2/companies/{company_id}/inbound/{access_key}/events/{event_key} missing operationId
2026-01-11T16:57:53.2115954Z        at: paths./v2/companies/{company_id}/inbound/{access_key}/events/{event_key}.get
2026-01-11T16:57:53.2116800Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.2117913Z     ⚠️  Operation GET /v2/companies/{company_id}/inbound/{access_key}/events/{event_key}/xml missing operationId
2026-01-11T16:57:53.2119015Z        at: paths./v2/companies/{company_id}/inbound/{access_key}/events/{event_key}/xml.get
2026-01-11T16:57:53.2120094Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.2120429Z 
2026-01-11T16:57:53.2268875Z ✓ consulta-endereco.yaml - 2 warning(s)
2026-01-11T16:57:53.2269553Z   Warnings:
2026-01-11T16:57:53.2270043Z     ⚠️  Swagger 2.0 spec detected (2.0)
2026-01-11T16:57:53.2270928Z        at: swagger
2026-01-11T16:57:53.2271660Z        💡 Consider converting to OpenAPI 3.0 for better tooling support
2026-01-11T16:57:53.2272786Z     ⚠️  No servers defined
2026-01-11T16:57:53.2273013Z        at: servers
2026-01-11T16:57:53.2273327Z        💡 Consider adding at least one server URL
2026-01-11T16:57:53.2273547Z 
2026-01-11T16:57:53.2683758Z ✓ consulta-nf-consumidor.yaml - 2 warning(s)
2026-01-11T16:57:53.2684327Z   Warnings:
2026-01-11T16:57:53.2684850Z     ⚠️  Swagger 2.0 spec detected (2.0)
2026-01-11T16:57:53.2685286Z        at: swagger
2026-01-11T16:57:53.2685988Z        💡 Consider converting to OpenAPI 3.0 for better tooling support
2026-01-11T16:57:53.2686658Z     ⚠️  No servers defined
2026-01-11T16:57:53.2687053Z        at: servers
2026-01-11T16:57:53.2687544Z        💡 Consider adding at least one server URL
2026-01-11T16:57:53.2687897Z 
2026-01-11T16:57:53.3360146Z ✓ consulta-nf.yaml - 2 warning(s)
2026-01-11T16:57:53.3361319Z   Warnings:
2026-01-11T16:57:53.3361860Z     ⚠️  Swagger 2.0 spec detected (2.0)
2026-01-11T16:57:53.3362335Z        at: swagger
2026-01-11T16:57:53.3363065Z        💡 Consider converting to OpenAPI 3.0 for better tooling support
2026-01-11T16:57:53.3363803Z     ⚠️  No servers defined
2026-01-11T16:57:53.3364201Z        at: servers
2026-01-11T16:57:53.3364777Z        💡 Consider adding at least one server URL
2026-01-11T16:57:53.3365152Z 
2026-01-11T16:57:53.3861405Z ✓ consulta-nfe-distribuicao-v1.yaml
2026-01-11T16:57:53.3861814Z 
2026-01-11T16:57:53.3903396Z ✓ cpf-api.yaml - 2 warning(s)
2026-01-11T16:57:53.3904991Z   Warnings:
2026-01-11T16:57:53.3905491Z     ⚠️  Swagger 2.0 spec detected (2.0)
2026-01-11T16:57:53.3905928Z        at: swagger
2026-01-11T16:57:53.3906642Z        💡 Consider converting to OpenAPI 3.0 for better tooling support
2026-01-11T16:57:53.3907292Z     ⚠️  No servers defined
2026-01-11T16:57:53.3907647Z        at: servers
2026-01-11T16:57:53.3908133Z        💡 Consider adding at least one server URL
2026-01-11T16:57:53.3908472Z 
2026-01-11T16:57:53.5205429Z ✓ nf-consumidor-v2.yaml - 10 warning(s)
2026-01-11T16:57:53.5206071Z   Warnings:
2026-01-11T16:57:53.5207388Z     ⚠️  Operation GET /v2/companies/{companyId}/consumerinvoices missing operationId
2026-01-11T16:57:53.5208291Z        at: paths./v2/companies/{companyId}/consumerinvoices.get
2026-01-11T16:57:53.5209054Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.5210193Z     ⚠️  Operation POST /v2/companies/{companyId}/consumerinvoices missing operationId
2026-01-11T16:57:53.5211056Z        at: paths./v2/companies/{companyId}/consumerinvoices.post
2026-01-11T16:57:53.5211792Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.5213193Z     ⚠️  Operation GET /v2/companies/{companyId}/consumerinvoices/{invoiceId} missing operationId
2026-01-11T16:57:53.5214218Z        at: paths./v2/companies/{companyId}/consumerinvoices/{invoiceId}.get
2026-01-11T16:57:53.5215026Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.5216255Z     ⚠️  Operation DELETE /v2/companies/{companyId}/consumerinvoices/{invoiceId} missing operationId
2026-01-11T16:57:53.5217309Z        at: paths./v2/companies/{companyId}/consumerinvoices/{invoiceId}.delete
2026-01-11T16:57:53.5218124Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.5219176Z     ⚠️  Operation GET /v2/companies/{companyId}/consumerinvoices/{invoiceId}/items missing operationId
2026-01-11T16:57:53.5220428Z        at: paths./v2/companies/{companyId}/consumerinvoices/{invoiceId}/items.get
2026-01-11T16:57:53.5221271Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.5222333Z     ⚠️  Operation GET /v2/companies/{companyId}/consumerinvoices/{invoiceId}/events missing operationId
2026-01-11T16:57:53.5223432Z        at: paths./v2/companies/{companyId}/consumerinvoices/{invoiceId}/events.get
2026-01-11T16:57:53.5224261Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.5225311Z     ⚠️  Operation GET /v2/companies/{companyId}/consumerinvoices/{invoiceId}/pdf missing operationId
2026-01-11T16:57:53.5238912Z        at: paths./v2/companies/{companyId}/consumerinvoices/{invoiceId}/pdf.get
2026-01-11T16:57:53.5240037Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.5241064Z     ⚠️  Operation GET /v2/companies/{companyId}/consumerinvoices/{invoiceId}/xml missing operationId
2026-01-11T16:57:53.5242085Z        at: paths./v2/companies/{companyId}/consumerinvoices/{invoiceId}/xml.get
2026-01-11T16:57:53.5242878Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.5243944Z     ⚠️  Operation GET /v2/companies/{companyId}/consumerinvoices/{invoiceId}/xml/rejection missing operationId
2026-01-11T16:57:53.5245101Z        at: paths./v2/companies/{companyId}/consumerinvoices/{invoiceId}/xml/rejection.get
2026-01-11T16:57:53.5245968Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.5247074Z     ⚠️  Operation POST /v2/companies/{companyId}/consumerinvoices/disablement missing operationId
2026-01-11T16:57:53.5248049Z        at: paths./v2/companies/{companyId}/consumerinvoices/disablement.post
2026-01-11T16:57:53.5248876Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.5249235Z 
2026-01-11T16:57:53.6461097Z ✓ nf-produto-v2.yaml - 24 warning(s)
2026-01-11T16:57:53.6461857Z   Warnings:
2026-01-11T16:57:53.6462904Z     ⚠️  Operation GET /v2/companies/{companyId}/productinvoices missing operationId
2026-01-11T16:57:53.6463937Z        at: paths./v2/companies/{companyId}/productinvoices.get
2026-01-11T16:57:53.6464764Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.6466484Z     ⚠️  Operation POST /v2/companies/{companyId}/productinvoices missing operationId
2026-01-11T16:57:53.6468376Z        at: paths./v2/companies/{companyId}/productinvoices.post
2026-01-11T16:57:53.6469164Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.6470373Z     ⚠️  Operation GET /v2/companies/{companyId}/productinvoices/{invoiceId} missing operationId
2026-01-11T16:57:53.6471399Z        at: paths./v2/companies/{companyId}/productinvoices/{invoiceId}.get
2026-01-11T16:57:53.6472193Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.6473237Z     ⚠️  Operation DELETE /v2/companies/{companyId}/productinvoices/{invoiceId} missing operationId
2026-01-11T16:57:53.6474282Z        at: paths./v2/companies/{companyId}/productinvoices/{invoiceId}.delete
2026-01-11T16:57:53.6475104Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.6476141Z     ⚠️  Operation GET /v2/companies/{companyId}/productinvoices/{invoiceId}/items missing operationId
2026-01-11T16:57:53.6477197Z        at: paths./v2/companies/{companyId}/productinvoices/{invoiceId}/items.get
2026-01-11T16:57:53.6478396Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.6479614Z     ⚠️  Operation GET /v2/companies/{companyId}/productinvoices/{invoiceId}/events missing operationId
2026-01-11T16:57:53.6480691Z        at: paths./v2/companies/{companyId}/productinvoices/{invoiceId}/events.get
2026-01-11T16:57:53.6481725Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.6482756Z     ⚠️  Operation GET /v2/companies/{companyId}/productinvoices/{invoiceId}/pdf missing operationId
2026-01-11T16:57:53.6483784Z        at: paths./v2/companies/{companyId}/productinvoices/{invoiceId}/pdf.get
2026-01-11T16:57:53.6484606Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.6485627Z     ⚠️  Operation GET /v2/companies/{companyId}/productinvoices/{invoiceId}/xml missing operationId
2026-01-11T16:57:53.6486665Z        at: paths./v2/companies/{companyId}/productinvoices/{invoiceId}/xml.get
2026-01-11T16:57:53.6487498Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.6488623Z     ⚠️  Operation GET /v2/companies/{companyId}/productinvoices/{invoiceId}/xml/rejection missing operationId
2026-01-11T16:57:53.6489853Z        at: paths./v2/companies/{companyId}/productinvoices/{invoiceId}/xml/rejection.get
2026-01-11T16:57:53.6490632Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.6491595Z     ⚠️  Operation GET /v2/companies/{companyId}/productinvoices/{invoiceId}/xml-rejection missing operationId
2026-01-11T16:57:53.6492586Z        at: paths./v2/companies/{companyId}/productinvoices/{invoiceId}/xml-rejection.get
2026-01-11T16:57:53.6493324Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.6494208Z     ⚠️  Operation GET /v2/companies/{companyId}/productinvoices/{invoiceId}/xml-epec missing operationId
2026-01-11T16:57:53.6495243Z        at: paths./v2/companies/{companyId}/productinvoices/{invoiceId}/xml-epec.get
2026-01-11T16:57:53.6496169Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.6497294Z     ⚠️  Operation PUT /v2/companies/{companyId}/productinvoices/{invoiceId}/correctionletter missing operationId
2026-01-11T16:57:53.6498336Z        at: paths./v2/companies/{companyId}/productinvoices/{invoiceId}/correctionletter.put
2026-01-11T16:57:53.6499124Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.6500468Z     ⚠️  Operation GET /v2/companies/{companyId}/productinvoices/{invoiceId}/correctionletter/pdf missing operationId
2026-01-11T16:57:53.6501747Z        at: paths./v2/companies/{companyId}/productinvoices/{invoiceId}/correctionletter/pdf.get
2026-01-11T16:57:53.6502696Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.6503898Z     ⚠️  Operation GET /v2/companies/{companyId}/productinvoices/{invoiceId}/correctionletter/xml missing operationId
2026-01-11T16:57:53.6505227Z        at: paths./v2/companies/{companyId}/productinvoices/{invoiceId}/correctionletter/xml.get
2026-01-11T16:57:53.6506246Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.6507434Z     ⚠️  Operation POST /v2/companies/{companyId}/productinvoices/{invoiceId}/disablement missing operationId
2026-01-11T16:57:53.6508665Z        at: paths./v2/companies/{companyId}/productinvoices/{invoiceId}/disablement.post
2026-01-11T16:57:53.6509767Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.6510702Z     ⚠️  Operation POST /v2/companies/{companyId}/productinvoices/disablement missing operationId
2026-01-11T16:57:53.6511804Z        at: paths./v2/companies/{companyId}/productinvoices/disablement.post
2026-01-11T16:57:53.6512637Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.6513779Z     ⚠️  Operation POST /v2/companies/{companyId}/statetaxes/{statetaxId}/productinvoices missing operationId
2026-01-11T16:57:53.6514962Z        at: paths./v2/companies/{companyId}/statetaxes/{statetaxId}/productinvoices.post
2026-01-11T16:57:53.6515850Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.6516824Z     ⚠️  Operation GET /v2/webhooks/eventtypes missing operationId
2026-01-11T16:57:53.6517469Z        at: paths./v2/webhooks/eventtypes.get
2026-01-11T16:57:53.6518120Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.6518954Z     ⚠️  Operation GET /v2/webhooks missing operationId
2026-01-11T16:57:53.6519684Z        at: paths./v2/webhooks.get
2026-01-11T16:57:53.6520317Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.6521028Z     ⚠️  Operation POST /v2/webhooks missing operationId
2026-01-11T16:57:53.6521615Z        at: paths./v2/webhooks.post
2026-01-11T16:57:53.6522242Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.6522980Z     ⚠️  Operation DELETE /v2/webhooks missing operationId
2026-01-11T16:57:53.6523543Z        at: paths./v2/webhooks.delete
2026-01-11T16:57:53.6524173Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.6524985Z     ⚠️  Operation PUT /v2/webhooks/{webhook_id} missing operationId
2026-01-11T16:57:53.6525675Z        at: paths./v2/webhooks/{webhook_id}.put
2026-01-11T16:57:53.6526379Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.6527210Z     ⚠️  Operation DELETE /v2/webhooks/{webhook_id} missing operationId
2026-01-11T16:57:53.6527935Z        at: paths./v2/webhooks/{webhook_id}.delete
2026-01-11T16:57:53.6528623Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.6529613Z     ⚠️  Operation PUT /v2/webhooks/{webhook_id}/pings missing operationId
2026-01-11T16:57:53.6530351Z        at: paths./v2/webhooks/{webhook_id}/pings.put
2026-01-11T16:57:53.6531030Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.6531399Z 
2026-01-11T16:57:53.7435036Z ✓ nf-servico-v1.yaml - 7 warning(s)
2026-01-11T16:57:53.7436610Z   Warnings:
2026-01-11T16:57:53.7437380Z     ⚠️  Operation GET /v2/webhooks/eventtypes missing operationId
2026-01-11T16:57:53.7438070Z        at: paths./v2/webhooks/eventtypes.get
2026-01-11T16:57:53.7438858Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.7439878Z     ⚠️  Operation GET /v2/webhooks missing operationId
2026-01-11T16:57:53.7440466Z        at: paths./v2/webhooks.get
2026-01-11T16:57:53.7441137Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.7441945Z     ⚠️  Operation POST /v2/webhooks missing operationId
2026-01-11T16:57:53.7442551Z        at: paths./v2/webhooks.post
2026-01-11T16:57:53.7443457Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.7444267Z     ⚠️  Operation DELETE /v2/webhooks missing operationId
2026-01-11T16:57:53.7444888Z        at: paths./v2/webhooks.delete
2026-01-11T16:57:53.7445570Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.7446440Z     ⚠️  Operation PUT /v2/webhooks/{webhook_id} missing operationId
2026-01-11T16:57:53.7447162Z        at: paths./v2/webhooks/{webhook_id}.put
2026-01-11T16:57:53.7447884Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.7448789Z     ⚠️  Operation DELETE /v2/webhooks/{webhook_id} missing operationId
2026-01-11T16:57:53.7449739Z        at: paths./v2/webhooks/{webhook_id}.delete
2026-01-11T16:57:53.7450493Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.7451411Z     ⚠️  Operation PUT /v2/webhooks/{webhook_id}/pings missing operationId
2026-01-11T16:57:53.7452190Z        at: paths./v2/webhooks/{webhook_id}/pings.put
2026-01-11T16:57:53.7452933Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.7453323Z 
2026-01-11T16:57:53.7523089Z ✓ nfeio.yaml - 9 warning(s)
2026-01-11T16:57:53.7523779Z   Warnings:
2026-01-11T16:57:53.7524264Z     ⚠️  No servers defined
2026-01-11T16:57:53.7524658Z        at: servers
2026-01-11T16:57:53.7525216Z        💡 Consider adding at least one server URL
2026-01-11T16:57:53.7526005Z     ⚠️  Operation POST /api/notifications/zip missing operationId
2026-01-11T16:57:53.7526698Z        at: paths./api/notifications/zip.post
2026-01-11T16:57:53.7529206Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.7530421Z     ⚠️  Operation POST /api/notifications/{id} missing operationId
2026-01-11T16:57:53.7531108Z        at: paths./api/notifications/{id}.post
2026-01-11T16:57:53.7531824Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.7532984Z     ⚠️  Operation POST /api/notifications/workflow/finished missing operationId
2026-01-11T16:57:53.7533792Z        at: paths./api/notifications/workflow/finished.post
2026-01-11T16:57:53.7534528Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.7535466Z     ⚠️  Operation GET /api/processing-jobs/resources/outputs missing operationId
2026-01-11T16:57:53.7536320Z        at: paths./api/processing-jobs/resources/outputs.get
2026-01-11T16:57:53.7537066Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.7537851Z     ⚠️  Operation GET /api/processing-jobs missing operationId
2026-01-11T16:57:53.7538475Z        at: paths./api/processing-jobs.get
2026-01-11T16:57:53.7539741Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.7540634Z     ⚠️  Operation POST /api/processing-jobs missing operationId
2026-01-11T16:57:53.7541284Z        at: paths./api/processing-jobs.post
2026-01-11T16:57:53.7541967Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.7542772Z     ⚠️  Operation GET /api/processing-jobs/{id} missing operationId
2026-01-11T16:57:53.7543463Z        at: paths./api/processing-jobs/{id}.get
2026-01-11T16:57:53.7544136Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.7544971Z     ⚠️  Operation DELETE /api/processing-jobs/{id} missing operationId
2026-01-11T16:57:53.7545904Z        at: paths./api/processing-jobs/{id}.delete
2026-01-11T16:57:53.7546565Z        💡 Add operationId for better code generation
2026-01-11T16:57:53.7546915Z 
2026-01-11T16:57:53.7547274Z ──────────────────────────────────────────────────
2026-01-11T16:57:53.7547665Z Summary:
2026-01-11T16:57:53.7547953Z   Total specs:     12
2026-01-11T16:57:53.7548283Z   Valid:           12 ✓
2026-01-11T16:57:53.7548580Z   Invalid:         0
2026-01-11T16:57:53.7548873Z   Total errors:    0
2026-01-11T16:57:53.7549161Z   Total warnings:  73
2026-01-11T16:57:53.7549941Z ──────────────────────────────────────────────────
2026-01-11T16:57:53.7550255Z 
2026-01-11T16:57:53.7550506Z ✅ All specifications are valid!
2026-01-11T16:57:53.7550747Z 
2026-01-11T16:57:53.7831643Z ##[group]Run npm run generate
2026-01-11T16:57:53.7832080Z [36;1mnpm run generate[0m
2026-01-11T16:57:53.7874804Z shell: /usr/bin/bash -e {0}
2026-01-11T16:57:53.7875175Z ##[endgroup]
2026-01-11T16:57:53.9021568Z 
2026-01-11T16:57:53.9022020Z > nfe-io@3.0.0 generate
2026-01-11T16:57:53.9022553Z > tsx scripts/generate-types.ts
2026-01-11T16:57:53.9022842Z 
2026-01-11T16:57:54.3312008Z 🚀 Starting OpenAPI type generation...
2026-01-11T16:57:54.3314107Z 
2026-01-11T16:57:54.3314546Z 📁 Discovering OpenAPI specs...
2026-01-11T16:57:54.3329234Z    Found 12 spec file(s)
2026-01-11T16:57:54.3329960Z 
2026-01-11T16:57:54.3330557Z ⚙️  Generating TypeScript types...
2026-01-11T16:57:54.3331843Z    • calculo-impostos-v1...
2026-01-11T16:57:54.3670576Z      ✓ Generated /home/runner/work/client-nodejs/client-nodejs/src/generated/calculo-impostos-v1.ts
2026-01-11T16:57:54.3671434Z    • consulta-cnpj...
2026-01-11T16:57:54.3672588Z      ⚠️  Skipped (Swagger 2.0 not supported by openapi-typescript v6+)
2026-01-11T16:57:54.3673503Z      💡 Consider converting to OpenAPI 3.0 for type generation
2026-01-11T16:57:54.3673884Z    • consulta-cte-v2...
2026-01-11T16:57:54.3778419Z      ✓ Generated /home/runner/work/client-nodejs/client-nodejs/src/generated/consulta-cte-v2.ts
2026-01-11T16:57:54.3779305Z    • consulta-endereco...
2026-01-11T16:57:54.3781600Z      ⚠️  Skipped (Swagger 2.0 not supported by openapi-typescript v6+)
2026-01-11T16:57:54.3782495Z      💡 Consider converting to OpenAPI 3.0 for type generation
2026-01-11T16:57:54.3782894Z    • consulta-nf-consumidor...
2026-01-11T16:57:54.3788974Z      ⚠️  Skipped (Swagger 2.0 not supported by openapi-typescript v6+)
2026-01-11T16:57:54.3790341Z      💡 Consider converting to OpenAPI 3.0 for type generation
2026-01-11T16:57:54.3790946Z    • consulta-nf...
2026-01-11T16:57:54.3799220Z      ⚠️  Skipped (Swagger 2.0 not supported by openapi-typescript v6+)
2026-01-11T16:57:54.3800622Z      💡 Consider converting to OpenAPI 3.0 for type generation
2026-01-11T16:57:54.3801051Z    • consulta-nfe-distribuicao-v1...
2026-01-11T16:57:54.4051259Z      ✓ Generated /home/runner/work/client-nodejs/client-nodejs/src/generated/consulta-nfe-distribuicao-v1.ts
2026-01-11T16:57:54.4052348Z    • cpf-api...
2026-01-11T16:57:54.4054926Z      ⚠️  Skipped (Swagger 2.0 not supported by openapi-typescript v6+)
2026-01-11T16:57:54.4055904Z      💡 Consider converting to OpenAPI 3.0 for type generation
2026-01-11T16:57:54.4062091Z    • nf-consumidor-v2...
2026-01-11T16:57:54.4602266Z      ✓ Generated /home/runner/work/client-nodejs/client-nodejs/src/generated/nf-consumidor-v2.ts
2026-01-11T16:57:54.4605383Z    • nf-produto-v2...
2026-01-11T16:57:54.5083020Z      ✓ Generated /home/runner/work/client-nodejs/client-nodejs/src/generated/nf-produto-v2.ts
2026-01-11T16:57:54.5090320Z    • nf-servico-v1...
2026-01-11T16:57:54.5388177Z      ✓ Generated /home/runner/work/client-nodejs/client-nodejs/src/generated/nf-servico-v1.ts
2026-01-11T16:57:54.5389097Z    • nfeio...
2026-01-11T16:57:54.5426951Z      ✓ Generated /home/runner/work/client-nodejs/client-nodejs/src/generated/nfeio.ts
2026-01-11T16:57:54.5430464Z 
2026-01-11T16:57:54.5431130Z 📦 Creating unified index...
2026-01-11T16:57:54.5434863Z    ✓ Created unified index: /home/runner/work/client-nodejs/client-nodejs/src/generated/index.ts
2026-01-11T16:57:54.5435472Z 
2026-01-11T16:57:54.5435719Z ✅ Type generation completed successfully!
2026-01-11T16:57:54.5436047Z    Generated 7 of 12 spec file(s)
2026-01-11T16:57:54.5436480Z    Output directory: /home/runner/work/client-nodejs/client-nodejs/src/generated
2026-01-11T16:57:54.5436792Z 
2026-01-11T16:57:54.5731464Z ##[group]Run npm run lint
2026-01-11T16:57:54.5731769Z [36;1mnpm run lint[0m
2026-01-11T16:57:54.5766292Z shell: /usr/bin/bash -e {0}
2026-01-11T16:57:54.5766530Z ##[endgroup]
2026-01-11T16:57:54.6915728Z 
2026-01-11T16:57:54.6916388Z > nfe-io@3.0.0 lint
2026-01-11T16:57:54.6916885Z > eslint src --ext .ts --fix
2026-01-11T16:57:54.6917183Z 
2026-01-11T16:57:55.8865272Z 
2026-01-11T16:57:55.8866149Z /home/runner/work/client-nodejs/client-nodejs/src/core/client.ts
2026-01-11T16:57:55.8900763Z ##[warning]  332:29  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8912672Z ##[warning]  363:29  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8915089Z ##[warning]  529:46  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8917429Z ##[warning]  571:36  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8919852Z ##[warning]  579:34  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8922162Z ##[warning]  629:75  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8923544Z 
2026-01-11T16:57:55.8924035Z /home/runner/work/client-nodejs/client-nodejs/src/core/errors/index.ts
2026-01-11T16:57:55.8925543Z ##[warning]  29:58  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8927899Z ##[warning]  30:17  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8929249Z 
2026-01-11T16:57:55.8929894Z /home/runner/work/client-nodejs/client-nodejs/src/core/http/client.ts
2026-01-11T16:57:55.8931460Z ##[warning]   18:22  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8933794Z ##[warning]   19:32  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8936128Z ##[warning]   20:32  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8938469Z ##[warning]   21:25  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8941377Z ##[warning]   22:27  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8943651Z ##[warning]   23:29  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8945942Z ##[warning]   24:23  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8948208Z ##[warning]   25:24  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8950708Z ##[warning]  143:46  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8952981Z ##[warning]  175:48  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8955250Z ##[warning]  191:47  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8957501Z ##[warning]  270:47  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8959950Z ##[warning]  277:22  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8962291Z ##[warning]  298:36  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8964557Z ##[warning]  300:38  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8966795Z ##[warning]  300:48  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8968173Z 
2026-01-11T16:57:55.8969027Z /home/runner/work/client-nodejs/client-nodejs/src/core/resources/companies.ts
2026-01-11T16:57:55.8970784Z ##[warning]   87:13  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8973106Z ##[warning]  124:15  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8975469Z ##[warning]  131:17  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8977755Z ##[warning]  187:53  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8980257Z ##[warning]  190:59  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8982623Z ##[warning]  222:29  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8984056Z 
2026-01-11T16:57:55.8984673Z /home/runner/work/client-nodejs/client-nodejs/src/core/resources/service-invoices.ts
2026-01-11T16:57:55.8986219Z ##[warning]   97:69  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8988489Z ##[warning]  107:42  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8991278Z ##[warning]  114:69  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8993077Z ##[warning]  124:42  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8994167Z 
2026-01-11T16:57:55.8994567Z /home/runner/work/client-nodejs/client-nodejs/src/core/resources/webhooks.ts
2026-01-11T16:57:55.8995656Z ##[warning]  171:37  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8996690Z 
2026-01-11T16:57:55.8996973Z /home/runner/work/client-nodejs/client-nodejs/src/index.ts
2026-01-11T16:57:55.8997956Z ##[warning]  263:34  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.8999912Z ##[warning]  342:36  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.9001682Z ##[warning]  348:67  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.9003591Z ##[warning]  350:29  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.9005246Z ##[warning]  400:33  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:55.9006253Z 
2026-01-11T16:57:55.9006681Z ✖ 40 problems (0 errors, 40 warnings)
2026-01-11T16:57:55.9006929Z 
2026-01-11T16:57:55.9205440Z ##[group]Run npm run typecheck
2026-01-11T16:57:55.9205743Z [36;1mnpm run typecheck[0m
2026-01-11T16:57:55.9237524Z shell: /usr/bin/bash -e {0}
2026-01-11T16:57:55.9237779Z ##[endgroup]
2026-01-11T16:57:56.0331910Z 
2026-01-11T16:57:56.0332415Z > nfe-io@3.0.0 typecheck
2026-01-11T16:57:56.0332922Z > tsc --noEmit
2026-01-11T16:57:56.0333146Z 
2026-01-11T16:57:57.3882402Z ##[group]Run npm test -- --run --reporter=verbose
2026-01-11T16:57:57.3883098Z [36;1mnpm test -- --run --reporter=verbose[0m
2026-01-11T16:57:57.3916557Z shell: /usr/bin/bash -e {0}
2026-01-11T16:57:57.3916970Z ##[endgroup]
2026-01-11T16:57:57.5104142Z 
2026-01-11T16:57:57.5104928Z > nfe-io@3.0.0 test
2026-01-11T16:57:57.5106163Z > vitest --run --reporter=verbose
2026-01-11T16:57:57.5106525Z 
2026-01-11T16:57:57.8497562Z 
2026-01-11T16:57:57.8499117Z [7m[1m[36m RUN [39m[22m[27m [36mv1.6.1[39m [90m/home/runner/work/client-nodejs/client-nodejs[39m
2026-01-11T16:57:57.8500187Z 
2026-01-11T16:57:58.3354266Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mcreate[2m > [22mshould create a service invoice and return completed invoice
2026-01-11T16:57:58.3359211Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mcreate[2m > [22mshould handle async response (202 status)
2026-01-11T16:57:58.3361751Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mlist[2m > [22mshould list service invoices for a company
2026-01-11T16:57:58.3364105Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mlist[2m > [22mshould pass pagination options to http client
2026-01-11T16:57:58.3366431Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mretrieve[2m > [22mshould retrieve a service invoice by id
2026-01-11T16:57:58.3368671Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mcancel[2m > [22mshould cancel a service invoice
2026-01-11T16:57:58.3370380Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22msendEmail[2m > [22mshould send invoice via email
2026-01-11T16:57:58.3371602Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mdownloadPdf[2m > [22mshould download PDF for a specific invoice
2026-01-11T16:57:58.3372930Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mdownloadPdf[2m > [22mshould download PDF for all invoices when invoiceId is not provided
2026-01-11T16:57:58.3374263Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mdownloadXml[2m > [22mshould download XML for a specific invoice
2026-01-11T16:57:58.3375549Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mdownloadXml[2m > [22mshould download XML for all invoices when invoiceId is not provided
2026-01-11T16:57:58.3376815Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22merror handling[2m > [22mshould propagate errors from http client
2026-01-11T16:57:58.3378094Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mcreateAndWait[2m > [22mshould handle synchronous response (201) without polling
2026-01-11T16:57:58.3473880Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mcreateAndWait[2m > [22mshould poll until completion for async response (202)
2026-01-11T16:57:58.3688381Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mcreateAndWait[2m > [22mshould throw InvoiceProcessingError on polling timeout
2026-01-11T16:57:58.3718984Z  [32m✓[39m tests/unit/client-polling-integration.test.ts[2m > [22mClient Polling Integration[2m > [22mend-to-end invoice creation with polling[2m > [22mshould create invoice and poll until completion (pending → pending → issued)
2026-01-11T16:57:58.3721931Z  [32m✓[39m tests/unit/client-polling-integration.test.ts[2m > [22mClient Polling Integration[2m > [22mend-to-end invoice creation with polling[2m > [22mshould handle immediate completion (201 response)
2026-01-11T16:57:58.4002315Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mGET Requests[2m > [22mshould make successful GET request
2026-01-11T16:57:58.4003887Z [31m   → Connection error[39m
2026-01-11T16:57:58.4033926Z  [32m✓[39m tests/unit/client-polling-integration.test.ts[2m > [22mClient Polling Integration[2m > [22mend-to-end invoice creation with polling[2m > [22mshould handle progressive status changes (pending → processing → authorized → issued)
2026-01-11T16:57:58.4251570Z  [32m✓[39m tests/unit/client-polling-integration.test.ts[2m > [22mClient Polling Integration[2m > [22mend-to-end invoice creation with polling[2m > [22mshould handle network errors during polling and retry
2026-01-11T16:57:58.4474755Z  [32m✓[39m tests/unit/client-polling-integration.test.ts[2m > [22mClient Polling Integration[2m > [22mend-to-end invoice creation with polling[2m > [22mshould timeout when invoice never completes
2026-01-11T16:57:58.4618581Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mcreateAndWait[2m > [22mshould throw InvoiceProcessingError if invoice processing fails
2026-01-11T16:57:58.4622284Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mcreateAndWait[2m > [22mshould throw InvoiceProcessingError on unexpected response format
2026-01-11T16:57:58.4625727Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mcreateAndWait[2m > [22mshould respect custom polling options
2026-01-11T16:57:58.4629047Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mcreateAndWait[2m > [22mshould handle async response without location header
2026-01-11T16:57:58.4632580Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mcreateAndWait[2m > [22mshould extract path from full URL in location header
2026-01-11T16:57:58.4693168Z  [32m✓[39m tests/unit/client-polling-integration.test.ts[2m > [22mClient Polling Integration[2m > [22mend-to-end invoice creation with polling[2m > [22mshould fail when invoice processing fails
2026-01-11T16:57:58.4747890Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mGET Requests[2m > [22mshould include query parameters in GET request
2026-01-11T16:57:58.4748956Z [31m   → Connection error[39m
2026-01-11T16:57:58.4810493Z  [32m✓[39m tests/unit/client-polling-integration.test.ts[2m > [22mClient Polling Integration[2m > [22mdirect pollUntilComplete usage[2m > [22mshould poll any resource endpoint until complete
2026-01-11T16:57:58.4813203Z  [32m✓[39m tests/unit/client-polling-integration.test.ts[2m > [22mClient Polling Integration[2m > [22mdirect pollUntilComplete usage[2m > [22mshould work with full URLs
2026-01-11T16:57:58.5130765Z  [32m✓[39m tests/unit/client-polling-integration.test.ts[2m > [22mClient Polling Integration[2m > [22mreal-world scenarios[2m > [22mshould handle typical NFE.io invoice workflow
2026-01-11T16:57:58.5257900Z  [32m✓[39m tests/unit/client-polling-integration.test.ts[2m > [22mClient Polling Integration[2m > [22mreal-world scenarios[2m > [22mshould handle multiple concurrent invoice creations with polling
2026-01-11T16:57:58.5260966Z  [32m✓[39m tests/unit/client-polling-integration.test.ts[2m > [22mClient Polling Integration[2m > [22medge cases[2m > [22mshould handle missing location in 202 response
2026-01-11T16:57:58.5263040Z  [32m✓[39m tests/unit/client-polling-integration.test.ts[2m > [22mClient Polling Integration[2m > [22medge cases[2m > [22mshould handle invoice with id and number but no status
2026-01-11T16:57:58.5623568Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mGET Requests[2m > [22mshould omit undefined query parameters
2026-01-11T16:57:58.5625380Z [31m   → Connection error[39m
2026-01-11T16:57:58.5704169Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mcreateAndWait[2m > [22mshould handle timeoutMs correctly
2026-01-11T16:57:58.5707421Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mgetStatus[2m > [22mshould return invoice status with completion flags
2026-01-11T16:57:58.5709984Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mgetStatus[2m > [22mshould recognize failed status
2026-01-11T16:57:58.5712263Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mgetStatus[2m > [22mshould recognize cancelled status as failed
2026-01-11T16:57:58.5714724Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mcreateBatch[2m > [22mshould create multiple invoices without waiting
2026-01-11T16:57:58.5717279Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mcreateBatch[2m > [22mshould create multiple invoices and wait for completion
2026-01-11T16:57:58.6026553Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mcreateBatch[2m > [22mshould respect maxConcurrent option
2026-01-11T16:57:58.6543224Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mPOST Requests[2m > [22mshould make successful POST request with JSON body
2026-01-11T16:57:58.6551623Z [31m   → Connection error[39m
2026-01-11T16:57:58.6553113Z  [32m✓[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mPOST Requests[2m > [22mshould handle 202 Accepted with location header
2026-01-11T16:57:58.7382443Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mPUT Requests[2m > [22mshould make successful PUT request
2026-01-11T16:57:58.7383858Z [31m   → Connection error[39m
2026-01-11T16:57:58.7385378Z  [32m✓[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mDELETE Requests[2m > [22mshould make successful DELETE request
2026-01-11T16:57:58.8056819Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22mlist[2m > [22mshould list all companies
2026-01-11T16:57:58.8058622Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22mretrieve[2m > [22mshould retrieve a specific company
2026-01-11T16:57:58.8060587Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22mcreate[2m > [22mshould create a new company
2026-01-11T16:57:58.8062451Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22mupdate[2m > [22mshould update an existing company
2026-01-11T16:57:58.8064309Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22mError Handling[2m > [22mshould propagate HTTP client errors
2026-01-11T16:57:58.8066406Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22muploadCertificate[2m > [22mshould upload certificate with buffer and password
2026-01-11T16:57:58.8068864Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22muploadCertificate[2m > [22mshould upload certificate with custom filename
2026-01-11T16:57:58.8071276Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22muploadCertificate[2m > [22mshould handle Blob as file input
2026-01-11T16:57:58.8073965Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22muploadCertificate[2m > [22mshould propagate errors from HTTP client
2026-01-11T16:57:58.8076216Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22muploadCertificate[2m > [22mshould handle invalid certificate error
2026-01-11T16:57:58.8078537Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22muploadCertificate[2m > [22mshould throw error if FormData is not available
2026-01-11T16:57:58.8080986Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22mgetCertificateStatus[2m > [22mshould get certificate status
2026-01-11T16:57:58.8083320Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22mgetCertificateStatus[2m > [22mshould handle company without certificate
2026-01-11T16:57:58.8085435Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22mfindByTaxNumber[2m > [22mshould find company by tax number
2026-01-11T16:57:58.8087459Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22mfindByTaxNumber[2m > [22mshould return null if company not found
2026-01-11T16:57:58.8089948Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22mgetCompaniesWithCertificates[2m > [22mshould return companies with valid certificates
2026-01-11T16:57:58.8092456Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22mgetCompaniesWithCertificates[2m > [22mshould skip companies where certificate check fails
2026-01-11T16:57:58.8094615Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22mcreateBatch[2m > [22mshould create multiple companies
2026-01-11T16:57:58.8096671Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22mcreateBatch[2m > [22mshould continue on error when continueOnError is true
2026-01-11T16:57:58.8099084Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mAuthentication[2m > [22mshould include Basic Auth header
2026-01-11T16:57:58.8100820Z [31m   → Connection error[39m
2026-01-11T16:57:58.8400419Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22mcreateBatch[2m > [22mshould respect maxConcurrent option
2026-01-11T16:57:58.8746512Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22msuccessful polling[2m > [22mshould return immediately if resource is already complete
2026-01-11T16:57:58.8890242Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mAuthentication[2m > [22mshould throw AuthenticationError on 401
2026-01-11T16:57:58.8895238Z [31m   → expected ConnectionError: Connection error { …(4) } to match object { name: 'AuthenticationError', …(1) }
2026-01-11T16:57:58.8896399Z (13 matching properties omitted from actual)[39m
2026-01-11T16:57:58.8989317Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22msuccessful polling[2m > [22mshould poll multiple times until resource completes
2026-01-11T16:57:58.8991833Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22msuccessful polling[2m > [22mshould recognize "completed" status as complete
2026-01-11T16:57:58.8993582Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22msuccessful polling[2m > [22mshould recognize invoice with id and number (no explicit status) as complete
2026-01-11T16:57:58.8995206Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22mURL path extraction[2m > [22mshould extract path from full URL
2026-01-11T16:57:58.8996741Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22mURL path extraction[2m > [22mshould extract path with query parameters from full URL
2026-01-11T16:57:58.8998663Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22mURL path extraction[2m > [22mshould handle relative path starting with /
2026-01-11T16:57:58.9000423Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22mURL path extraction[2m > [22mshould add leading slash to path without one
2026-01-11T16:57:58.9221097Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22mtimeout and error handling[2m > [22mshould throw PollingTimeoutError after maxAttempts
2026-01-11T16:57:58.9652091Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mError Handling[2m > [22mshould throw ValidationError on 400
2026-01-11T16:57:58.9653929Z [31m   → expected ConnectionError: Connection error { …(4) } to match object { name: 'ValidationError', code: 400 }
2026-01-11T16:57:58.9654649Z (13 matching properties omitted from actual)[39m
2026-01-11T16:57:58.9750544Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22mtimeout and error handling[2m > [22mshould include polling details in timeout error
2026-01-11T16:57:59.0396327Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mError Handling[2m > [22mshould throw NotFoundError on 404
2026-01-11T16:57:59.0398159Z [31m   → expected ConnectionError: Connection error { …(4) } to match object { name: 'NotFoundError', code: 404 }
2026-01-11T16:57:59.0402737Z (13 matching properties omitted from actual)[39m
2026-01-11T16:57:59.1180764Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mError Handling[2m > [22mshould throw RateLimitError on 429 after retries
2026-01-11T16:57:59.1191449Z [31m   → expected ConnectionError: Connection error { …(4) } to match object { name: 'RateLimitError', code: 429 }
2026-01-11T16:57:59.1192689Z (13 matching properties omitted from actual)[39m
2026-01-11T16:57:59.1942092Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mError Handling[2m > [22mshould throw ServerError on 500 after retries
2026-01-11T16:57:59.1944130Z [31m   → expected ConnectionError: Connection error { …(4) } to match object { name: 'ServerError', code: 500 }
2026-01-11T16:57:59.1945370Z (13 matching properties omitted from actual)[39m
2026-01-11T16:57:59.2670918Z  [32m✓[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mError Handling[2m > [22mshould throw ConnectionError on network failure after retries
2026-01-11T16:57:59.2716405Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22mtimeout and error handling[2m > [22mshould throw error if resource processing failed
2026-01-11T16:57:59.3405954Z  [32m✓[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mError Handling[2m > [22mshould throw TimeoutError on abort after retries
2026-01-11T16:57:59.4151739Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mRetry Logic[2m > [22mshould retry on 503 Service Unavailable
2026-01-11T16:57:59.4152560Z [31m   → Connection error[39m
2026-01-11T16:57:59.4885007Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mRetry Logic[2m > [22mshould retry on network errors
2026-01-11T16:57:59.4886261Z [31m   → Connection error[39m
2026-01-11T16:57:59.5662259Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mRetry Logic[2m > [22mshould not retry on 400 Bad Request
2026-01-11T16:57:59.5663175Z [31m   → expected "spy" to be called 1 times, but got 4 times[39m
2026-01-11T16:57:59.5683736Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22mtimeout and error handling[2m > [22mshould throw error if resource has error status
2026-01-11T16:57:59.6372885Z  [32m✓[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mRetry Logic[2m > [22mshould respect maxRetries limit
2026-01-11T16:57:59.7138692Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mRetry Logic[2m > [22mshould retry rate limit errors
2026-01-11T16:57:59.7140441Z [31m   → Connection error[39m
2026-01-11T16:57:59.7896762Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mURL Construction[2m > [22mshould handle leading slashes in paths
2026-01-11T16:57:59.7897718Z [31m   → Connection error[39m
2026-01-11T16:57:59.7898716Z  [32m✓[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mURL Construction[2m > [22mshould handle trailing slashes in baseUrl
2026-01-11T16:57:59.8638670Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22mtimeout and error handling[2m > [22mshould throw error if response contains error property
2026-01-11T16:57:59.8640929Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mResponse Parsing[2m > [22mshould parse JSON responses
2026-01-11T16:57:59.8641627Z [31m   → Connection error[39m
2026-01-11T16:57:59.8857437Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22mtimeout and error handling[2m > [22mshould continue polling on temporary network errors
2026-01-11T16:57:59.9094672Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22mtimeout and error handling[2m > [22mshould throw error on last attempt if still failing
2026-01-11T16:57:59.9097353Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22mpolling options[2m > [22mshould use default options when not specified
2026-01-11T16:57:59.9386195Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mResponse Parsing[2m > [22mshould parse text responses
2026-01-11T16:57:59.9387263Z [31m   → Connection error[39m
2026-01-11T16:57:59.9509913Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22mpolling options[2m > [22mshould respect custom maxAttempts
2026-01-11T16:58:00.0020221Z (node:2334) PromiseRejectionHandledWarning: Promise rejection was handled asynchronously (rejection id: 5)
2026-01-11T16:58:00.0022611Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22mpolling options[2m > [22mshould wait specified intervalMs between polls
2026-01-11T16:58:00.0027266Z (Use `node --trace-warnings ...` to show where the warning was created)
2026-01-11T16:58:00.0029097Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22mwith fake timers[2m > [22mshould timeout correctly with fake timers
2026-01-11T16:58:00.0128460Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mResponse Parsing[2m > [22mshould handle PDF responses as Buffer
2026-01-11T16:58:00.0130230Z [31m   → Connection error[39m
2026-01-11T16:58:00.0910832Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mResponse Parsing[2m > [22mshould handle XML responses as Buffer
2026-01-11T16:58:00.0913427Z [31m   → Connection error[39m
2026-01-11T16:58:00.1663417Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mHeaders[2m > [22mshould include User-Agent header
2026-01-11T16:58:00.1667638Z [31m   → Connection error[39m
2026-01-11T16:58:00.2416457Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mHeaders[2m > [22mshould include Accept header
2026-01-11T16:58:00.2417770Z [31m   → Connection error[39m
2026-01-11T16:58:00.3087324Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mHeaders[2m > [22mshould include Content-Type for POST with JSON
2026-01-11T16:58:00.3089161Z [31m   → Connection error[39m
2026-01-11T16:58:00.3094990Z  [32m✓[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mHeaders[2m > [22mshould extract response headers
2026-01-11T16:58:00.3096808Z  [32m✓[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mUtility Functions[2m > [22mshould create default retry config
2026-01-11T16:58:00.3098996Z  [32m✓[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mUtility Functions[2m > [22mshould build HTTP config
2026-01-11T16:58:00.3101191Z  [32m✓[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mFetch Support Validation[2m > [22mshould throw error if fetch is not available
2026-01-11T16:58:00.6223531Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mNfeError Base Class[2m > [22mshould create error with message
2026-01-11T16:58:00.6225719Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mNfeError Base Class[2m > [22mshould have stack trace
2026-01-11T16:58:00.6228039Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mHTTP Errors[2m > [22mshould create AuthenticationError
2026-01-11T16:58:00.6230124Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mHTTP Errors[2m > [22mshould create ValidationError
2026-01-11T16:58:00.6231871Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mHTTP Errors[2m > [22mshould create NotFoundError
2026-01-11T16:58:00.6233524Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mHTTP Errors[2m > [22mshould create RateLimitError
2026-01-11T16:58:00.6235266Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mHTTP Errors[2m > [22mshould create ServerError
2026-01-11T16:58:00.6236989Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mConnection Errors[2m > [22mshould create ConnectionError
2026-01-11T16:58:00.6238781Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mConnection Errors[2m > [22mshould create TimeoutError
2026-01-11T16:58:00.6242457Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mSDK Errors[2m > [22mshould create ConfigurationError
2026-01-11T16:58:00.6244185Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mSDK Errors[2m > [22mshould create PollingTimeoutError
2026-01-11T16:58:00.6245950Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mSDK Errors[2m > [22mshould create InvoiceProcessingError
2026-01-11T16:58:00.6247895Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mErrorFactory[2m > [22mshould create AuthenticationError from HTTP 401
2026-01-11T16:58:00.6253914Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mErrorFactory[2m > [22mshould create ValidationError from HTTP 400
2026-01-11T16:58:00.6255736Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mErrorFactory[2m > [22mshould create NotFoundError from HTTP 404
2026-01-11T16:58:00.6257530Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mErrorFactory[2m > [22mshould create RateLimitError from HTTP 429
2026-01-11T16:58:00.6258788Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mErrorFactory[2m > [22mshould create ServerError from HTTP 500
2026-01-11T16:58:00.6260366Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mErrorFactory[2m > [22mshould create error from missing API key
2026-01-11T16:58:00.6261354Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mErrorFactory[2m > [22mshould create error from invalid Node version
2026-01-11T16:58:00.6262794Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mErrorFactory[2m > [22mshould create ConnectionError from network error
2026-01-11T16:58:00.6264764Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mErrorFactory[2m > [22mshould create TimeoutError from AbortError
2026-01-11T16:58:00.6266670Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mType Guards[2m > [22misNfeError should identify NfeError instances
2026-01-11T16:58:00.6268503Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mType Guards[2m > [22misAuthenticationError should identify AuthenticationError
2026-01-11T16:58:00.6270478Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mType Guards[2m > [22misValidationError should identify ValidationError
2026-01-11T16:58:00.6272231Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mType Guards[2m > [22misNotFoundError should identify NotFoundError
2026-01-11T16:58:00.6274009Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mType Guards[2m > [22misConnectionError should identify ConnectionError
2026-01-11T16:58:00.6275757Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mType Guards[2m > [22misTimeoutError should identify TimeoutError
2026-01-11T16:58:00.6277865Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mType Guards[2m > [22misPollingTimeoutError should identify PollingTimeoutError
2026-01-11T16:58:00.6279947Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mLegacy Aliases[2m > [22mBadRequestError should be ValidationError
2026-01-11T16:58:00.6281658Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mLegacy Aliases[2m > [22mAPIError should be NfeError
2026-01-11T16:58:00.6283322Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mLegacy Aliases[2m > [22mInternalServerError should be ServerError
2026-01-11T16:58:00.6284995Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mErrorTypes object[2m > [22mshould export all error classes
2026-01-11T16:58:01.0235919Z  [32m✓[39m tests/core.test.ts[2m > [22mNfeClient Core[2m > [22mshould create client with valid config
2026-01-11T16:58:01.0237618Z  [31m×[39m tests/core.test.ts[2m > [22mNfeClient Core[2m > [22mshould throw error for invalid config
2026-01-11T16:58:01.0238754Z [31m   → expected [Function] to throw an error[39m
2026-01-11T16:58:01.0240168Z  [32m✓[39m tests/core.test.ts[2m > [22mNfeClient Core[2m > [22mshould use same URL for both environments
2026-01-11T16:58:01.0241629Z  [32m✓[39m tests/core.test.ts[2m > [22mError System[2m > [22mshould create proper error hierarchy
2026-01-11T16:58:01.0242969Z  [32m✓[39m tests/core.test.ts[2m > [22mError System[2m > [22mshould create bad request errors
2026-01-11T16:58:01.0244382Z  [31m×[39m tests/core.test.ts[2m > [22mServiceInvoices Resource[2m > [22mshould create service invoice
2026-01-11T16:58:01.0245702Z [31m   → expected undefined to be '123' // Object.is equality[39m
2026-01-11T16:58:01.0416414Z  [32m✓[39m tests/unit/webhooks.test.ts[2m > [22mWebhooksResource[2m > [22mlist[2m > [22mshould list all webhooks for a company
2026-01-11T16:58:01.0419780Z  [32m✓[39m tests/unit/webhooks.test.ts[2m > [22mWebhooksResource[2m > [22mretrieve[2m > [22mshould retrieve a specific webhook
2026-01-11T16:58:01.0421627Z  [32m✓[39m tests/unit/webhooks.test.ts[2m > [22mWebhooksResource[2m > [22mcreate[2m > [22mshould create a new webhook
2026-01-11T16:58:01.0423969Z  [32m✓[39m tests/unit/webhooks.test.ts[2m > [22mWebhooksResource[2m > [22mupdate[2m > [22mshould update an existing webhook
2026-01-11T16:58:01.0425677Z  [32m✓[39m tests/unit/webhooks.test.ts[2m > [22mWebhooksResource[2m > [22mdelete[2m > [22mshould delete a webhook
2026-01-11T16:58:01.0427497Z  [32m✓[39m tests/unit/webhooks.test.ts[2m > [22mWebhooksResource[2m > [22mError Handling[2m > [22mshould propagate HTTP client errors
2026-01-11T16:58:01.2697366Z  [32m✓[39m tests/unit/nfe-client.test.ts[2m > [22mNfeClient[2m > [22mconstructor[2m > [22mshould create client with valid configuration
2026-01-11T16:58:01.2699793Z  [32m✓[39m tests/unit/nfe-client.test.ts[2m > [22mNfeClient[2m > [22mconstructor[2m > [22mshould throw ConfigurationError when environment is invalid
2026-01-11T16:58:01.2701786Z  [32m✓[39m tests/unit/nfe-client.test.ts[2m > [22mNfeClient[2m > [22mconstructor[2m > [22mshould accept production environment
2026-01-11T16:58:01.2703608Z  [32m✓[39m tests/unit/nfe-client.test.ts[2m > [22mNfeClient[2m > [22mconstructor[2m > [22mshould accept development environment
2026-01-11T16:58:01.2705356Z  [32m✓[39m tests/unit/nfe-client.test.ts[2m > [22mNfeClient[2m > [22mconstructor[2m > [22mshould accept custom timeout
2026-01-11T16:58:01.2707119Z  [32m✓[39m tests/unit/nfe-client.test.ts[2m > [22mNfeClient[2m > [22mconstructor[2m > [22mshould accept custom retry configuration
2026-01-11T16:58:01.2709023Z  [32m✓[39m tests/unit/nfe-client.test.ts[2m > [22mNfeClient[2m > [22mresource instantiation[2m > [22mshould have serviceInvoices resource
2026-01-11T16:58:01.2711440Z  [32m✓[39m tests/unit/nfe-client.test.ts[2m > [22mNfeClient[2m > [22mresource instantiation[2m > [22mshould have companies resource
2026-01-11T16:58:01.2713430Z  [32m✓[39m tests/unit/nfe-client.test.ts[2m > [22mNfeClient[2m > [22mresource instantiation[2m > [22mshould have legalPeople resource
2026-01-11T16:58:01.2715384Z  [32m✓[39m tests/unit/nfe-client.test.ts[2m > [22mNfeClient[2m > [22mresource instantiation[2m > [22mshould have naturalPeople resource
2026-01-11T16:58:01.2717284Z  [32m✓[39m tests/unit/nfe-client.test.ts[2m > [22mNfeClient[2m > [22mresource instantiation[2m > [22mshould have webhooks resource
2026-01-11T16:58:01.2719611Z  [32m✓[39m tests/unit/nfe-client.test.ts[2m > [22mNfeClient[2m > [22mconfiguration validation[2m > [22mshould use default environment (production) when not specified
2026-01-11T16:58:01.2721726Z  [32m✓[39m tests/unit/nfe-client.test.ts[2m > [22mNfeClient[2m > [22mconfiguration validation[2m > [22mshould accept custom base URL
2026-01-11T16:58:01.5060357Z  [32m✓[39m tests/unit/natural-people.test.ts[2m > [22mNaturalPeopleResource[2m > [22mlist[2m > [22mshould list natural people for a company
2026-01-11T16:58:01.5062556Z  [32m✓[39m tests/unit/natural-people.test.ts[2m > [22mNaturalPeopleResource[2m > [22mretrieve[2m > [22mshould retrieve a natural person by id
2026-01-11T16:58:01.5069732Z  [32m✓[39m tests/unit/natural-people.test.ts[2m > [22mNaturalPeopleResource[2m > [22mcreate[2m > [22mshould create a new natural person
2026-01-11T16:58:01.5071839Z  [32m✓[39m tests/unit/natural-people.test.ts[2m > [22mNaturalPeopleResource[2m > [22mupdate[2m > [22mshould update an existing natural person
2026-01-11T16:58:01.5073832Z  [32m✓[39m tests/unit/natural-people.test.ts[2m > [22mNaturalPeopleResource[2m > [22mdelete[2m > [22mshould delete a natural person
2026-01-11T16:58:01.5075913Z  [32m✓[39m tests/unit/natural-people.test.ts[2m > [22mNaturalPeopleResource[2m > [22merror handling[2m > [22mshould propagate errors from http client
2026-01-11T16:58:01.7006091Z  [32m✓[39m tests/unit/legal-people.test.ts[2m > [22mLegalPeopleResource[2m > [22mlist[2m > [22mshould list legal people for a company
2026-01-11T16:58:01.7008200Z  [32m✓[39m tests/unit/legal-people.test.ts[2m > [22mLegalPeopleResource[2m > [22mretrieve[2m > [22mshould retrieve a legal person by id
2026-01-11T16:58:01.7010696Z  [32m✓[39m tests/unit/legal-people.test.ts[2m > [22mLegalPeopleResource[2m > [22mcreate[2m > [22mshould create a new legal person
2026-01-11T16:58:01.7012576Z  [32m✓[39m tests/unit/legal-people.test.ts[2m > [22mLegalPeopleResource[2m > [22mupdate[2m > [22mshould update an existing legal person
2026-01-11T16:58:01.7014371Z  [32m✓[39m tests/unit/legal-people.test.ts[2m > [22mLegalPeopleResource[2m > [22mdelete[2m > [22mshould delete a legal person
2026-01-11T16:58:01.7016296Z  [32m✓[39m tests/unit/legal-people.test.ts[2m > [22mLegalPeopleResource[2m > [22merror handling[2m > [22mshould propagate errors from http client
2026-01-11T16:58:01.7395349Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mGenerated Files[2m > [22mshould have generated directory
2026-01-11T16:58:01.7397958Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mGenerated Files[2m > [22mshould have index.ts in generated directory
2026-01-11T16:58:01.7400163Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mGenerated Files[2m > [22mshould have at least one spec-specific generated file
2026-01-11T16:58:01.7401812Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mGenerated Files[2m > [22mgenerated index should have proper exports
2026-01-11T16:58:01.7403421Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mGenerated Files[2m > [22mgenerated files should be valid TypeScript syntax
2026-01-11T16:58:01.7405232Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mGenerated Type Exports[2m > [22mshould export ServiceInvoice type
2026-01-11T16:58:01.7406769Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mGenerated Type Exports[2m > [22mshould export Company type
2026-01-11T16:58:01.7407948Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mGenerated Type Exports[2m > [22mshould export LegalPerson type
2026-01-11T16:58:01.7409053Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mGenerated Type Exports[2m > [22mshould export NaturalPerson type
2026-01-11T16:58:01.7410501Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mGenerated Type Exports[2m > [22mshould export CreateServiceInvoiceRequest type
2026-01-11T16:58:01.7411683Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mSpec Validation[2m > [22mshould validate correct OpenAPI 3.0 spec
2026-01-11T16:58:01.7412956Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mSpec Validation[2m > [22mshould detect Swagger 2.0 specs
2026-01-11T16:58:01.7415057Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mSpec Validation[2m > [22mshould have OpenAPI specs in spec directory
2026-01-11T16:58:01.7416457Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mGeneration Script[2m > [22mgenerate script should be executable
2026-01-11T16:58:01.7417575Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mGeneration Script[2m > [22mvalidate script should be executable
2026-01-11T16:58:01.7418731Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mGeneration Script[2m > [22mnpm run generate should work[33m 658[2mms[22m[39m
2026-01-11T16:58:01.7420142Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mGeneration Script[2m > [22mnpm run validate:spec should work[33m 1546[2mms[22m[39m
2026-01-11T16:58:01.7421395Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mType Integration[2m > [22mgenerated types should be importable from src/core/types
2026-01-11T16:58:01.7422769Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mType Integration[2m > [22mresources should use generated types
2026-01-11T16:58:01.7423949Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mTypeScript Compilation[2m > [22mgenerated types should pass TypeScript compilation
2026-01-11T16:58:01.7425226Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mGenerated Type Structure[2m > [22mServiceInvoice should have expected OpenAPI fields
2026-01-11T16:58:01.7426447Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mGenerated Type Structure[2m > [22mCompany should have typed taxRegime enum
2026-01-11T16:58:01.7427522Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mSpec File Integrity[2m > [22mmain service invoice spec should exist and be valid YAML
2026-01-11T16:58:01.7428474Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mSpec File Integrity[2m > [22mspecs should have OpenAPI version specified
2026-01-11T16:58:06.0229224Z  [31m×[39m tests/core.test.ts[2m > [22mServiceInvoices Resource[2m > [22mshould handle async polling[33m 5000[2mms[22m[39m
2026-01-11T16:58:06.0230951Z [31m   → Test timed out in 5000ms.
2026-01-11T16:58:06.0232200Z If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
2026-01-11T16:58:11.0244843Z  [31m×[39m tests/core.test.ts[2m > [22mCompanies Resource[2m > [22mshould list companies[33m 5000[2mms[22m[39m
2026-01-11T16:58:11.0245964Z [31m   → Test timed out in 5000ms.
2026-01-11T16:58:11.0247739Z If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
2026-01-11T16:58:16.0157029Z  [31m×[39m tests/core.test.ts[2m > [22mCompanies Resource[2m > [22mshould create company[33m 5002[2mms[22m[39m
2026-01-11T16:58:16.0158785Z [31m   → Test timed out in 5000ms.
2026-01-11T16:58:16.0160831Z If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
2026-01-11T16:58:16.0219807Z 
2026-01-11T16:58:16.0232830Z [31m⎯⎯⎯⎯⎯⎯[1m[7m Failed Tests 28 [27m[22m⎯⎯⎯⎯⎯⎯⎯[39m
2026-01-11T16:58:16.0233628Z 
2026-01-11T16:58:16.0237534Z [31m[1m[7m FAIL [27m[22m[39m tests/core.test.ts[2m > [22mNfeClient Core[2m > [22mshould throw error for invalid config
2026-01-11T16:58:16.0255694Z [31m[1mAssertionError[22m: expected [Function] to throw an error[39m
2026-01-11T16:58:16.0257366Z [36m [2m❯[22m tests/core.test.ts:[2m36:8[22m[39m
2026-01-11T16:58:16.0495186Z     [90m 34| [39m    [34mexpect[39m(() [33m=>[39m {
2026-01-11T16:58:16.0497709Z     [90m 35| [39m      [35mnew[39m [33mNfeClient[39m({ apiKey[33m:[39m [32m''[39m })[33m;[39m
2026-01-11T16:58:16.0498817Z     [90m 36| [39m    })[33m.[39m[34mtoThrow[39m()[33m;[39m
2026-01-11T16:58:16.0499711Z     [90m   | [39m       [31m^[39m
2026-01-11T16:58:16.0500273Z     [90m 37| [39m  })[33m;[39m
2026-01-11T16:58:16.0500756Z     [90m 38| [39m
2026-01-11T16:58:16.0500967Z 
2026-01-11T16:58:16.0501401Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/28]⎯[22m[39m
2026-01-11T16:58:16.0501771Z 
2026-01-11T16:58:16.0504800Z [31m[1m[7m FAIL [27m[22m[39m tests/core.test.ts[2m > [22mServiceInvoices Resource[2m > [22mshould create service invoice
2026-01-11T16:58:16.0506455Z [31m[1mAssertionError[22m: expected undefined to be '123' // Object.is equality[39m
2026-01-11T16:58:16.0507092Z 
2026-01-11T16:58:16.0507240Z - Expected: 
2026-01-11T16:58:16.0507567Z "123"
2026-01-11T16:58:16.0507729Z 
2026-01-11T16:58:16.0507884Z + Received: 
2026-01-11T16:58:16.0508199Z undefined
2026-01-11T16:58:16.0508376Z 
2026-01-11T16:58:16.0508866Z [36m [2m❯[22m tests/core.test.ts:[2m111:24[22m[39m
2026-01-11T16:58:16.0512525Z     [90m109| [39m    })[33m;[39m
2026-01-11T16:58:16.0514342Z     [90m110| [39m
2026-01-11T16:58:16.0515377Z     [90m111| [39m    [34mexpect[39m(invoice[33m.[39mid)[33m.[39m[34mtoBe[39m([32m'123'[39m)[33m;[39m
2026-01-11T16:58:16.0516424Z     [90m   | [39m                       [31m^[39m
2026-01-11T16:58:16.0517657Z     [90m112| [39m    [34mexpect[39m(invoice[33m.[39mflowStatus)[33m.[39m[34mtoBe[39m([32m'WaitingSend'[39m)[33m;[39m
2026-01-11T16:58:16.0520622Z     [90m113| [39m  })[33m;[39m
2026-01-11T16:58:16.0520947Z 
2026-01-11T16:58:16.0521434Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/28]⎯[22m[39m
2026-01-11T16:58:16.0521794Z 
2026-01-11T16:58:16.0522870Z [31m[1m[7m FAIL [27m[22m[39m tests/core.test.ts[2m > [22mServiceInvoices Resource[2m > [22mshould handle async polling
2026-01-11T16:58:16.0524576Z [31m[1m[7m FAIL [27m[22m[39m tests/core.test.ts[2m > [22mCompanies Resource[2m > [22mshould list companies
2026-01-11T16:58:16.0526172Z [31m[1m[7m FAIL [27m[22m[39m tests/core.test.ts[2m > [22mCompanies Resource[2m > [22mshould create company
2026-01-11T16:58:16.0527258Z [31m[1mError[22m: Test timed out in 5000ms.
2026-01-11T16:58:16.0528670Z If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
2026-01-11T16:58:16.0530090Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/28]⎯[22m[39m
2026-01-11T16:58:16.0530443Z 
2026-01-11T16:58:16.0531719Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mGET Requests[2m > [22mshould make successful GET request
2026-01-11T16:58:16.0533073Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:16.0534187Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:16.0584073Z     [90m195| [39m    }
2026-01-11T16:58:16.0584890Z     [90m196| [39m
2026-01-11T16:58:16.0586075Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:16.0586731Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:16.0587025Z     [90m198| [39m  }
2026-01-11T16:58:16.0587256Z     [90m199| [39m
2026-01-11T16:58:16.0587779Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:16.0588513Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:16.0589758Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m53:24[22m[39m
2026-01-11T16:58:16.0590223Z 
2026-01-11T16:58:16.0590667Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:16.0592192Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: response.headers.forEach is not a function }[39m
2026-01-11T16:58:16.0593486Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/28]⎯[22m[39m
2026-01-11T16:58:16.0593849Z 
2026-01-11T16:58:16.0595293Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mGET Requests[2m > [22mshould include query parameters in GET request
2026-01-11T16:58:16.0596861Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:16.0598056Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:16.0599812Z     [90m195| [39m    }
2026-01-11T16:58:16.0600264Z     [90m196| [39m
2026-01-11T16:58:16.0601477Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:16.0602591Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:16.0603085Z     [90m198| [39m  }
2026-01-11T16:58:16.0603504Z     [90m199| [39m
2026-01-11T16:58:16.0604468Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:16.0605696Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:16.0607128Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m73:7[22m[39m
2026-01-11T16:58:16.0607602Z 
2026-01-11T16:58:16.0608050Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:16.0609780Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: response.headers.forEach is not a function }[39m
2026-01-11T16:58:16.0611124Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/28]⎯[22m[39m
2026-01-11T16:58:16.0611481Z 
2026-01-11T16:58:16.0612794Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mGET Requests[2m > [22mshould omit undefined query parameters
2026-01-11T16:58:16.0614333Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:16.0617228Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:16.0618374Z     [90m195| [39m    }
2026-01-11T16:58:16.0619183Z     [90m196| [39m
2026-01-11T16:58:16.0620846Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:16.0622785Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:16.0623617Z     [90m198| [39m  }
2026-01-11T16:58:16.0625121Z     [90m199| [39m
2026-01-11T16:58:16.0626125Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:16.0627345Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:16.0628427Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m88:7[22m[39m
2026-01-11T16:58:16.0628875Z 
2026-01-11T16:58:16.0629288Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:16.0631223Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: response.headers.forEach is not a function }[39m
2026-01-11T16:58:16.0632607Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/28]⎯[22m[39m
2026-01-11T16:58:16.0632983Z 
2026-01-11T16:58:16.0634478Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mPOST Requests[2m > [22mshould make successful POST request with JSON body
2026-01-11T16:58:16.0636024Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:16.0637185Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:16.0638044Z     [90m195| [39m    }
2026-01-11T16:58:16.0638440Z     [90m196| [39m
2026-01-11T16:58:16.0639794Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:16.0640852Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:16.0641350Z     [90m198| [39m  }
2026-01-11T16:58:16.0641754Z     [90m199| [39m
2026-01-11T16:58:16.0642671Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:16.0643842Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:16.0644855Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m114:24[22m[39m
2026-01-11T16:58:16.0645300Z 
2026-01-11T16:58:16.0645730Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:16.0647181Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: response.headers.forEach is not a function }[39m
2026-01-11T16:58:16.0648484Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[7/28]⎯[22m[39m
2026-01-11T16:58:16.0648840Z 
2026-01-11T16:58:16.0650355Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mPUT Requests[2m > [22mshould make successful PUT request
2026-01-11T16:58:16.0651780Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:16.0652961Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:16.0653854Z     [90m195| [39m    }
2026-01-11T16:58:16.0654311Z     [90m196| [39m
2026-01-11T16:58:16.0655527Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:16.0656942Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:16.0657452Z     [90m198| [39m  }
2026-01-11T16:58:16.0657845Z     [90m199| [39m
2026-01-11T16:58:16.0658798Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:16.0660319Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:16.0661491Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m161:24[22m[39m
2026-01-11T16:58:16.0661953Z 
2026-01-11T16:58:16.0662383Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:16.0664113Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: response.headers.forEach is not a function }[39m
2026-01-11T16:58:16.0665424Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[8/28]⎯[22m[39m
2026-01-11T16:58:16.0665770Z 
2026-01-11T16:58:16.0667054Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mAuthentication[2m > [22mshould include Basic Auth header
2026-01-11T16:58:16.0668449Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:16.0669761Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:16.0670576Z     [90m195| [39m    }
2026-01-11T16:58:16.0670989Z     [90m196| [39m
2026-01-11T16:58:16.0672127Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:16.0673200Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:16.0673685Z     [90m198| [39m  }
2026-01-11T16:58:16.0674077Z     [90m199| [39m
2026-01-11T16:58:16.0674992Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:16.0676209Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:16.0677259Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m194:7[22m[39m
2026-01-11T16:58:16.0677691Z 
2026-01-11T16:58:16.0678092Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:16.0679660Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: response.headers.forEach is not a function }[39m
2026-01-11T16:58:16.0680844Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[9/28]⎯[22m[39m
2026-01-11T16:58:16.0681162Z 
2026-01-11T16:58:16.0682453Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mAuthentication[2m > [22mshould throw AuthenticationError on 401
2026-01-11T16:58:16.0684597Z [31m[1mAssertionError[22m: expected ConnectionError: Connection error { …(4) } to match object { name: 'AuthenticationError', …(1) }
2026-01-11T16:58:16.0685871Z (13 matching properties omitted from actual)[39m
2026-01-11T16:58:16.0686233Z 
2026-01-11T16:58:16.0686360Z - Expected
2026-01-11T16:58:16.0686639Z + Received
2026-01-11T16:58:16.0687222Z 
2026-01-11T16:58:16.0687369Z   Object {
2026-01-11T16:58:16.0687687Z -   "code": 401,
2026-01-11T16:58:16.0688130Z -   "name": "AuthenticationError",
2026-01-11T16:58:16.0688614Z +   "code": undefined,
2026-01-11T16:58:16.0689060Z +   "name": "ConnectionError",
2026-01-11T16:58:16.0689633Z   }
2026-01-11T16:58:16.0689798Z 
2026-01-11T16:58:16.0690384Z [36m [2m❯[22m tests/unit/http-client.test.ts:[2m210:7[22m[39m
2026-01-11T16:58:16.0780828Z     [90m208| [39m
2026-01-11T16:58:16.0781711Z     [90m209| [39m      [90m// 401 errors should not retry[39m
2026-01-11T16:58:16.0783569Z     [90m210| [39m      [35mawait[39m [34mexpect[39m(httpClient[33m.[39m[35mget[39m([32m'/test'[39m))[33m.[39mrejects[33m.[39m[34mtoMatchObject[39m({
2026-01-11T16:58:16.0785024Z     [90m   | [39m      [31m^[39m
2026-01-11T16:58:16.0786078Z     [90m211| [39m        name[33m:[39m [32m'AuthenticationError'[39m[33m,[39m
2026-01-11T16:58:16.0787214Z     [90m212| [39m        code[33m:[39m [34m401[39m[33m,[39m
2026-01-11T16:58:16.0787747Z 
2026-01-11T16:58:16.0791539Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[10/28]⎯[22m[39m
2026-01-11T16:58:16.0792149Z 
2026-01-11T16:58:16.0794603Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mError Handling[2m > [22mshould throw ValidationError on 400
2026-01-11T16:58:16.0796765Z [31m[1mAssertionError[22m: expected ConnectionError: Connection error { …(4) } to match object { name: 'ValidationError', code: 400 }
2026-01-11T16:58:16.0798151Z (13 matching properties omitted from actual)[39m
2026-01-11T16:58:16.0798543Z 
2026-01-11T16:58:16.0798690Z - Expected
2026-01-11T16:58:16.0799005Z + Received
2026-01-11T16:58:16.0799174Z 
2026-01-11T16:58:16.0799298Z   Object {
2026-01-11T16:58:16.0799791Z -   "code": 400,
2026-01-11T16:58:16.0800453Z -   "name": "ValidationError",
2026-01-11T16:58:16.0800907Z +   "code": undefined,
2026-01-11T16:58:16.0801337Z +   "name": "ConnectionError",
2026-01-11T16:58:16.0801731Z   }
2026-01-11T16:58:16.0801909Z 
2026-01-11T16:58:16.0802494Z [36m [2m❯[22m tests/unit/http-client.test.ts:[2m234:7[22m[39m
2026-01-11T16:58:16.0803180Z     [90m232| [39m
2026-01-11T16:58:16.0803811Z     [90m233| [39m      [90m// 400 errors should not retry[39m
2026-01-11T16:58:16.0807080Z     [90m234| [39m      [35mawait[39m [34mexpect[39m(httpClient[33m.[39m[35mget[39m([32m'/test'[39m))[33m.[39mrejects[33m.[39m[34mtoMatchObject[39m({
2026-01-11T16:58:16.0808242Z     [90m   | [39m      [31m^[39m
2026-01-11T16:58:16.0809011Z     [90m235| [39m        name[33m:[39m [32m'ValidationError'[39m[33m,[39m
2026-01-11T16:58:16.0810191Z     [90m236| [39m        code[33m:[39m [34m400[39m[33m,[39m
2026-01-11T16:58:16.0810596Z 
2026-01-11T16:58:16.0811022Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[11/28]⎯[22m[39m
2026-01-11T16:58:16.0811356Z 
2026-01-11T16:58:16.0812634Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mError Handling[2m > [22mshould throw NotFoundError on 404
2026-01-11T16:58:16.0814730Z [31m[1mAssertionError[22m: expected ConnectionError: Connection error { …(4) } to match object { name: 'NotFoundError', code: 404 }
2026-01-11T16:58:16.0816137Z (13 matching properties omitted from actual)[39m
2026-01-11T16:58:16.0816506Z 
2026-01-11T16:58:16.0816627Z - Expected
2026-01-11T16:58:16.0816902Z + Received
2026-01-11T16:58:16.0817054Z 
2026-01-11T16:58:16.0817167Z   Object {
2026-01-11T16:58:16.0817444Z -   "code": 404,
2026-01-11T16:58:16.0817802Z -   "name": "NotFoundError",
2026-01-11T16:58:16.0818194Z +   "code": undefined,
2026-01-11T16:58:16.0818597Z +   "name": "ConnectionError",
2026-01-11T16:58:16.0818969Z   }
2026-01-11T16:58:16.0819123Z 
2026-01-11T16:58:16.0819791Z [36m [2m❯[22m tests/unit/http-client.test.ts:[2m252:7[22m[39m
2026-01-11T16:58:16.0820453Z     [90m250| [39m
2026-01-11T16:58:16.0823532Z     [90m251| [39m      [90m// 404 errors should not retry[39m
2026-01-11T16:58:16.0828099Z     [90m252| [39m      [35mawait[39m [34mexpect[39m(httpClient[33m.[39m[35mget[39m([32m'/test'[39m))[33m.[39mrejects[33m.[39m[34mtoMatchObject[39m({
2026-01-11T16:58:16.0831882Z     [90m   | [39m      [31m^[39m
2026-01-11T16:58:16.0837078Z     [90m253| [39m        name[33m:[39m [32m'NotFoundError'[39m[33m,[39m
2026-01-11T16:58:16.0837990Z     [90m254| [39m        code[33m:[39m [34m404[39m[33m,[39m
2026-01-11T16:58:16.0838391Z 
2026-01-11T16:58:16.0838788Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[12/28]⎯[22m[39m
2026-01-11T16:58:16.0839118Z 
2026-01-11T16:58:16.0840639Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mError Handling[2m > [22mshould throw RateLimitError on 429 after retries
2026-01-11T16:58:16.0842819Z [31m[1mAssertionError[22m: expected ConnectionError: Connection error { …(4) } to match object { name: 'RateLimitError', code: 429 }
2026-01-11T16:58:16.0844073Z (13 matching properties omitted from actual)[39m
2026-01-11T16:58:16.0869996Z 
2026-01-11T16:58:16.0873360Z - Expected
2026-01-11T16:58:16.0873688Z + Received
2026-01-11T16:58:16.0873861Z 
2026-01-11T16:58:16.0873981Z   Object {
2026-01-11T16:58:16.0874275Z -   "code": 429,
2026-01-11T16:58:16.0874674Z -   "name": "RateLimitError",
2026-01-11T16:58:16.0875138Z +   "code": undefined,
2026-01-11T16:58:16.0875623Z +   "name": "ConnectionError",
2026-01-11T16:58:16.0876043Z   }
2026-01-11T16:58:16.0876227Z 
2026-01-11T16:58:16.0876859Z [36m [2m❯[22m tests/unit/http-client.test.ts:[2m276:7[22m[39m
2026-01-11T16:58:16.0877576Z     [90m274| [39m
2026-01-11T16:58:16.0878193Z     [90m275| [39m      [90m// Should fail after max retries[39m
2026-01-11T16:58:16.0879637Z     [90m276| [39m      [35mawait[39m [34mexpect[39m(promise)[33m.[39mrejects[33m.[39m[34mtoMatchObject[39m({
2026-01-11T16:58:16.0880946Z     [90m   | [39m      [31m^[39m
2026-01-11T16:58:16.0881797Z     [90m277| [39m        name[33m:[39m [32m'RateLimitError'[39m[33m,[39m
2026-01-11T16:58:16.0882780Z     [90m278| [39m        code[33m:[39m [34m429[39m[33m,[39m
2026-01-11T16:58:16.0883214Z 
2026-01-11T16:58:16.0883754Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[13/28]⎯[22m[39m
2026-01-11T16:58:16.0884125Z 
2026-01-11T16:58:16.0885544Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mError Handling[2m > [22mshould throw ServerError on 500 after retries
2026-01-11T16:58:16.0887828Z [31m[1mAssertionError[22m: expected ConnectionError: Connection error { …(4) } to match object { name: 'ServerError', code: 500 }
2026-01-11T16:58:16.0889209Z (13 matching properties omitted from actual)[39m
2026-01-11T16:58:16.0891141Z 
2026-01-11T16:58:16.0891288Z - Expected
2026-01-11T16:58:16.0891584Z + Received
2026-01-11T16:58:16.0891749Z 
2026-01-11T16:58:16.0891885Z   Object {
2026-01-11T16:58:16.0892176Z -   "code": 500,
2026-01-11T16:58:16.0892568Z -   "name": "ServerError",
2026-01-11T16:58:16.0892990Z +   "code": undefined,
2026-01-11T16:58:16.0893461Z +   "name": "ConnectionError",
2026-01-11T16:58:16.0893866Z   }
2026-01-11T16:58:16.0894035Z 
2026-01-11T16:58:16.0894637Z [36m [2m❯[22m tests/unit/http-client.test.ts:[2m298:7[22m[39m
2026-01-11T16:58:16.0895294Z     [90m296| [39m
2026-01-11T16:58:16.0895924Z     [90m297| [39m      [90m// Should fail after max retries[39m
2026-01-11T16:58:16.0897166Z     [90m298| [39m      [35mawait[39m [34mexpect[39m(promise)[33m.[39mrejects[33m.[39m[34mtoMatchObject[39m({
2026-01-11T16:58:16.0898122Z     [90m   | [39m      [31m^[39m
2026-01-11T16:58:16.0898883Z     [90m299| [39m        name[33m:[39m [32m'ServerError'[39m[33m,[39m
2026-01-11T16:58:16.0900073Z     [90m300| [39m        code[33m:[39m [34m500[39m[33m,[39m
2026-01-11T16:58:16.0900499Z 
2026-01-11T16:58:16.0900929Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[14/28]⎯[22m[39m
2026-01-11T16:58:16.0901278Z 
2026-01-11T16:58:16.0902578Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mRetry Logic[2m > [22mshould retry on 503 Service Unavailable
2026-01-11T16:58:16.0904247Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:16.0905365Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:16.0906157Z     [90m195| [39m    }
2026-01-11T16:58:16.0906568Z     [90m196| [39m
2026-01-11T16:58:16.0907753Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:16.0910303Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:16.0920935Z     [90m198| [39m  }
2026-01-11T16:58:16.0921441Z     [90m199| [39m
2026-01-11T16:58:16.0922397Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:16.0923713Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:16.0924826Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m363:24[22m[39m
2026-01-11T16:58:16.0929932Z 
2026-01-11T16:58:16.0930452Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:16.0932032Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: Cannot read properties of undefined (reading 'status') }[39m
2026-01-11T16:58:16.0933441Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[15/28]⎯[22m[39m
2026-01-11T16:58:16.0933793Z 
2026-01-11T16:58:16.0935034Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mRetry Logic[2m > [22mshould retry on network errors
2026-01-11T16:58:16.0936446Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:16.0937629Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:16.0938519Z     [90m195| [39m    }
2026-01-11T16:58:16.0939218Z     [90m196| [39m
2026-01-11T16:58:16.0940799Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:16.0942000Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:16.0942507Z     [90m198| [39m  }
2026-01-11T16:58:16.0942875Z     [90m199| [39m
2026-01-11T16:58:16.0943772Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:16.0945027Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:16.0946110Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m382:24[22m[39m
2026-01-11T16:58:16.0946598Z 
2026-01-11T16:58:16.0947075Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:16.0948709Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: Cannot read properties of undefined (reading 'status') }[39m
2026-01-11T16:58:16.0950479Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[16/28]⎯[22m[39m
2026-01-11T16:58:16.0950854Z 
2026-01-11T16:58:16.0952151Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mRetry Logic[2m > [22mshould not retry on 400 Bad Request
2026-01-11T16:58:16.0953893Z [31m[1mAssertionError[22m: expected "spy" to be called 1 times, but got 4 times[39m
2026-01-11T16:58:16.0955074Z [36m [2m❯[22m tests/unit/http-client.test.ts:[2m400:25[22m[39m
2026-01-11T16:58:16.0955736Z     [90m398| [39m
2026-01-11T16:58:16.0956836Z     [90m399| [39m      [35mawait[39m [34mexpect[39m(promise)[33m.[39mrejects[33m.[39m[34mtoThrow[39m()[33m;[39m
2026-01-11T16:58:16.0958680Z     [90m400| [39m      [34mexpect[39m(fetchMock)[33m.[39m[34mtoHaveBeenCalledTimes[39m([34m1[39m)[33m;[39m [90m// No retries[39m
2026-01-11T16:58:16.0967849Z     [90m   | [39m                        [31m^[39m
2026-01-11T16:58:16.0968719Z     [90m401| [39m    })[33m;[39m
2026-01-11T16:58:16.0969729Z     [90m402| [39m
2026-01-11T16:58:16.0969984Z 
2026-01-11T16:58:16.0970865Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[17/28]⎯[22m[39m
2026-01-11T16:58:16.0971255Z 
2026-01-11T16:58:16.0972807Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mRetry Logic[2m > [22mshould retry rate limit errors
2026-01-11T16:58:16.0974267Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:16.0975453Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:16.0976286Z     [90m195| [39m    }
2026-01-11T16:58:16.0976679Z     [90m196| [39m
2026-01-11T16:58:16.0977856Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:16.0979000Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:16.0979880Z     [90m198| [39m  }
2026-01-11T16:58:16.0980340Z     [90m199| [39m
2026-01-11T16:58:16.0981332Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:16.0983038Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:16.0984418Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m439:24[22m[39m
2026-01-11T16:58:16.0984965Z 
2026-01-11T16:58:16.0985484Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:16.0987414Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: Cannot read properties of undefined (reading 'status') }[39m
2026-01-11T16:58:16.0988948Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[18/28]⎯[22m[39m
2026-01-11T16:58:16.0989725Z 
2026-01-11T16:58:16.0991388Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mURL Construction[2m > [22mshould handle leading slashes in paths
2026-01-11T16:58:16.0993094Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:16.0994601Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:16.0995725Z     [90m195| [39m    }
2026-01-11T16:58:16.0996385Z     [90m196| [39m
2026-01-11T16:58:16.0997772Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:16.0999222Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:16.1002207Z     [90m198| [39m  }
2026-01-11T16:58:16.1002969Z     [90m199| [39m
2026-01-11T16:58:16.1004160Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:16.1005540Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:16.1032523Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m454:7[22m[39m
2026-01-11T16:58:16.1032992Z 
2026-01-11T16:58:16.1033424Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:16.1034989Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: response.headers.forEach is not a function }[39m
2026-01-11T16:58:16.1036367Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[19/28]⎯[22m[39m
2026-01-11T16:58:16.1036745Z 
2026-01-11T16:58:16.1038100Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mResponse Parsing[2m > [22mshould parse JSON responses
2026-01-11T16:58:16.1039759Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:16.1040988Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:16.1041901Z     [90m195| [39m    }
2026-01-11T16:58:16.1042385Z     [90m196| [39m
2026-01-11T16:58:16.1043478Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:16.1044116Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:16.1044397Z     [90m198| [39m  }
2026-01-11T16:58:16.1044620Z     [90m199| [39m
2026-01-11T16:58:16.1045149Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:16.1045836Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:16.1046600Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m494:24[22m[39m
2026-01-11T16:58:16.1046851Z 
2026-01-11T16:58:16.1047073Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:16.1047852Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: response.headers.forEach is not a function }[39m
2026-01-11T16:58:16.1048531Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[20/28]⎯[22m[39m
2026-01-11T16:58:16.1048725Z 
2026-01-11T16:58:16.1049559Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mResponse Parsing[2m > [22mshould parse text responses
2026-01-11T16:58:16.1050305Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:16.1051025Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:16.1051476Z     [90m195| [39m    }
2026-01-11T16:58:16.1051708Z     [90m196| [39m
2026-01-11T16:58:16.1052322Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:16.1052902Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:16.1053169Z     [90m198| [39m  }
2026-01-11T16:58:16.1053393Z     [90m199| [39m
2026-01-11T16:58:16.1053889Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:16.1054531Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:16.1055195Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m506:24[22m[39m
2026-01-11T16:58:16.1055662Z 
2026-01-11T16:58:16.1056076Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:16.1057551Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: response.headers.forEach is not a function }[39m
2026-01-11T16:58:16.1058814Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[21/28]⎯[22m[39m
2026-01-11T16:58:16.1059177Z 
2026-01-11T16:58:16.1060735Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mResponse Parsing[2m > [22mshould handle PDF responses as Buffer
2026-01-11T16:58:16.1062219Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:16.1063372Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:16.1064179Z     [90m195| [39m    }
2026-01-11T16:58:16.1064620Z     [90m196| [39m
2026-01-11T16:58:16.1065823Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:16.1066961Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:16.1067472Z     [90m198| [39m  }
2026-01-11T16:58:16.1067892Z     [90m199| [39m
2026-01-11T16:58:16.1068867Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:16.1070423Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:16.1071738Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m521:24[22m[39m
2026-01-11T16:58:16.1072227Z 
2026-01-11T16:58:16.1072672Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:16.1074179Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: response.headers.forEach is not a function }[39m
2026-01-11T16:58:16.1075481Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22/28]⎯[22m[39m
2026-01-11T16:58:16.1075835Z 
2026-01-11T16:58:16.1077239Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mResponse Parsing[2m > [22mshould handle XML responses as Buffer
2026-01-11T16:58:16.1078692Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:16.1080090Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:16.1080949Z     [90m195| [39m    }
2026-01-11T16:58:16.1081378Z     [90m196| [39m
2026-01-11T16:58:16.1086998Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:16.1088193Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:16.1088728Z     [90m198| [39m  }
2026-01-11T16:58:16.1089149Z     [90m199| [39m
2026-01-11T16:58:16.1090272Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:16.1091531Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:16.1092600Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m538:24[22m[39m
2026-01-11T16:58:16.1093067Z 
2026-01-11T16:58:16.1093493Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:16.1095202Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: response.headers.forEach is not a function }[39m
2026-01-11T16:58:16.1096519Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[23/28]⎯[22m[39m
2026-01-11T16:58:16.1096874Z 
2026-01-11T16:58:16.1098141Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mHeaders[2m > [22mshould include User-Agent header
2026-01-11T16:58:16.1099737Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:16.1100889Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:16.1101702Z     [90m195| [39m    }
2026-01-11T16:58:16.1102116Z     [90m196| [39m
2026-01-11T16:58:16.1103247Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:16.1104282Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:16.1104754Z     [90m198| [39m  }
2026-01-11T16:58:16.1105129Z     [90m199| [39m
2026-01-11T16:58:16.1106025Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:16.1107176Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:16.1108168Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m554:7[22m[39m
2026-01-11T16:58:16.1109202Z 
2026-01-11T16:58:16.1109835Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:16.1111162Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: response.headers.forEach is not a function }[39m
2026-01-11T16:58:16.1112463Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[24/28]⎯[22m[39m
2026-01-11T16:58:16.1112849Z 
2026-01-11T16:58:16.1114012Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mHeaders[2m > [22mshould include Accept header
2026-01-11T16:58:16.1115290Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:16.1116395Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:16.1117463Z [31m⎯⎯⎯⎯⎯⎯[1m[7m Unhandled Errors [27m[22m⎯⎯⎯⎯⎯⎯[39m
2026-01-11T16:58:16.1118020Z [31m[1m
2026-01-11T16:58:16.1118518Z Vitest caught 1 unhandled error during the test run.
2026-01-11T16:58:16.1120393Z This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.[22m[39m
2026-01-11T16:58:16.1121393Z     [90m195| [39m    }
2026-01-11T16:58:16.1121810Z     [90m196| [39m
2026-01-11T16:58:16.1122950Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:16.1124130Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:16.1124636Z     [90m198| [39m  }
2026-01-11T16:58:16.1125040Z     [90m199| [39m
2026-01-11T16:58:16.1125945Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:16.1127212Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:16.1128249Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m569:7[22m[39m
2026-01-11T16:58:16.1128697Z 
2026-01-11T16:58:16.1129107Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:16.1130741Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: response.headers.forEach is not a function }[39m
2026-01-11T16:58:16.1132051Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[25/28]⎯[22m[39m
2026-01-11T16:58:16.1132446Z 
2026-01-11T16:58:16.1133787Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mHeaders[2m > [22mshould include Content-Type for POST with JSON
2026-01-11T16:58:16.1135207Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:16.1136370Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:16.1137177Z     [90m195| [39m    }
2026-01-11T16:58:16.1137607Z     [90m196| [39m
2026-01-11T16:58:16.1139022Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:16.1140264Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:16.1140754Z     [90m198| [39m  }
2026-01-11T16:58:16.1141144Z     [90m199| [39m
2026-01-11T16:58:16.1142042Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:16.1143257Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:16.1144345Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m583:7[22m[39m
2026-01-11T16:58:16.1144814Z 
2026-01-11T16:58:16.1145248Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:16.1146682Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: response.headers.forEach is not a function }[39m
2026-01-11T16:58:16.1147978Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[26/28]⎯[22m[39m
2026-01-11T16:58:16.1148339Z 
2026-01-11T16:58:16.1148371Z 
2026-01-11T16:58:16.1148836Z [31m⎯⎯⎯⎯[1m[7m Unhandled Rejection [27m[22m⎯⎯⎯⎯⎯[39m
2026-01-11T16:58:16.1150332Z [31m[1mPollingTimeoutError[22m: Polling timeout after 3 attempts. Resource may still be processing.[39m
2026-01-11T16:58:16.1151853Z [36m [2m❯[22m NfeClient.pollUntilComplete src/core/client.ts:[2m555:11[22m[39m
2026-01-11T16:58:16.1169611Z     [90m553| [39m    }
2026-01-11T16:58:16.1170269Z     [90m554| [39m
2026-01-11T16:58:16.1171213Z     [90m555| [39m    [35mthrow[39m [35mnew[39m [33mPollingTimeoutError[39m(
2026-01-11T16:58:16.1172238Z     [90m   | [39m          [31m^[39m
2026-01-11T16:58:16.1173668Z     [90m556| [39m      [32m`Polling timeout after [39m[36m${[39mmaxAttempts[36m}[39m[32m attempts. Resource may sti[39m…
2026-01-11T16:58:16.1174988Z     [90m557| [39m      { maxAttempts[33m,[39m intervalMs }
2026-01-11T16:58:16.1175555Z 
2026-01-11T16:58:16.1178605Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:16.1179325Z [31m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[39m
2026-01-11T16:58:16.1180687Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: { maxAttempts: 3, intervalMs: 1000 } }[39m
2026-01-11T16:58:16.1182989Z [31mThis error originated in "[1mtests/unit/polling.test.ts[22m" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.[39m
2026-01-11T16:58:16.1185303Z [31mThe latest test that might've caused the error is "[1mshould timeout correctly with fake timers[22m". It might mean one of the following:
2026-01-11T16:58:16.1186622Z - The error was thrown, while Vitest was running this test.
2026-01-11T16:58:16.1188113Z - If the error occurred after the test had been completed, this was the last documented test before it was thrown.[39m
2026-01-11T16:58:16.1188921Z 
2026-01-11T16:58:16.1192347Z [2m Test Files [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m10 passed[39m[22m[2m | [22m[33m3 skipped[39m[90m (15)[39m
2026-01-11T16:58:16.1199272Z [2m      Tests [22m [1m[31m28 failed[39m[22m[2m | [22m[1m[32m179 passed[39m[22m[2m | [22m[33m32 skipped[39m[90m (239)[39m
2026-01-11T16:58:16.1216026Z [2m     Errors [22m [1m[31m1 error[39m[22m
2026-01-11T16:58:16.1224500Z [2m   Start at [22m 16:57:57
2026-01-11T16:58:16.1229766Z [2m   Duration [22m 18.17s[2m (transform 447ms, setup 77ms, collect 731ms, tests 21.32s, environment 3ms, prepare 1.63s)[22m
2026-01-11T16:58:16.1249800Z 
2026-01-11T16:58:16.1648260Z ##[error]Process completed with exit code 1.
2026-01-11T16:58:16.1710970Z ##[group]Run actions/upload-artifact@v4
2026-01-11T16:58:16.1711250Z with:
2026-01-11T16:58:16.1711453Z   name: test-results-node-20.x
2026-01-11T16:58:16.1711700Z   path: coverage/
test-results/

2026-01-11T16:58:16.1711941Z   if-no-files-found: warn
2026-01-11T16:58:16.1712159Z   compression-level: 6
2026-01-11T16:58:16.1712359Z   overwrite: false
2026-01-11T16:58:16.1712548Z   include-hidden-files: false
2026-01-11T16:58:16.1712771Z ##[endgroup]
2026-01-11T16:58:16.3869284Z Multiple search paths detected. Calculating the least common ancestor of all paths
2026-01-11T16:58:16.3871894Z The least common ancestor is /home/runner/work/client-nodejs/client-nodejs. This will be the root directory of the artifact
2026-01-11T16:58:16.3887038Z ##[warning]No files were found with the provided path: coverage/
test-results/. No artifacts will be uploaded.
2026-01-11T16:58:16.4021087Z Post job cleanup.
2026-01-11T16:58:16.4953456Z [command]/usr/bin/git version
2026-01-11T16:58:16.4989195Z git version 2.52.0
2026-01-11T16:58:16.5031410Z Temporarily overriding HOME='/home/runner/work/_temp/0a3c3408-a4ab-46ae-be1a-2ed553294900' before making global git config changes
2026-01-11T16:58:16.5032527Z Adding repository directory to the temporary git global config as a safe directory
2026-01-11T16:58:16.5036622Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/client-nodejs/client-nodejs
2026-01-11T16:58:16.5071617Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2026-01-11T16:58:16.5103759Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2026-01-11T16:58:16.5330686Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2026-01-11T16:58:16.5351128Z http.https://github.com/.extraheader
2026-01-11T16:58:16.5364074Z [command]/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
2026-01-11T16:58:16.5395029Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2026-01-11T16:58:16.5614647Z [command]/usr/bin/git config --local --name-only --get-regexp ^includeIf\.gitdir:
2026-01-11T16:58:16.5644855Z [command]/usr/bin/git submodule foreach --recursive git config --local --show-origin --name-only --get-regexp remote.origin.url
2026-01-11T16:58:16.5969128Z Cleaning up orphan processes
