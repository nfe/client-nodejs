2026-01-11T16:57:43.6221132Z Current runner version: '2.330.0'
2026-01-11T16:57:43.6243097Z ##[group]Runner Image Provisioner
2026-01-11T16:57:43.6243828Z Hosted Compute Agent
2026-01-11T16:57:43.6244361Z Version: 20251211.462
2026-01-11T16:57:43.6245097Z Commit: 6cbad8c2bb55d58165063d031ccabf57e2d2db61
2026-01-11T16:57:43.6245754Z Build Date: 2025-12-11T16:28:49Z
2026-01-11T16:57:43.6246381Z Worker ID: {e2ec81d5-00fe-4854-bc7c-7dd8d0d75b68}
2026-01-11T16:57:43.6247096Z ##[endgroup]
2026-01-11T16:57:43.6247612Z ##[group]Operating System
2026-01-11T16:57:43.6248124Z Ubuntu
2026-01-11T16:57:43.6248624Z 24.04.3
2026-01-11T16:57:43.6249367Z LTS
2026-01-11T16:57:43.6249829Z ##[endgroup]
2026-01-11T16:57:43.6250363Z ##[group]Runner Image
2026-01-11T16:57:43.6250907Z Image: ubuntu-24.04
2026-01-11T16:57:43.6251401Z Version: 20260105.202.1
2026-01-11T16:57:43.6252416Z Included Software: https://github.com/actions/runner-images/blob/ubuntu24/20260105.202/images/ubuntu/Ubuntu2404-Readme.md
2026-01-11T16:57:43.6253941Z Image Release: https://github.com/actions/runner-images/releases/tag/ubuntu24%2F20260105.202
2026-01-11T16:57:43.6254963Z ##[endgroup]
2026-01-11T16:57:43.6257448Z ##[group]GITHUB_TOKEN Permissions
2026-01-11T16:57:43.6259611Z Actions: write
2026-01-11T16:57:43.6260204Z ArtifactMetadata: write
2026-01-11T16:57:43.6260700Z Attestations: write
2026-01-11T16:57:43.6261287Z Checks: write
2026-01-11T16:57:43.6261733Z Contents: write
2026-01-11T16:57:43.6262208Z Deployments: write
2026-01-11T16:57:43.6262739Z Discussions: write
2026-01-11T16:57:43.6263266Z Issues: write
2026-01-11T16:57:43.6263701Z Metadata: read
2026-01-11T16:57:43.6264600Z Models: read
2026-01-11T16:57:43.6265046Z Packages: write
2026-01-11T16:57:43.6265539Z Pages: write
2026-01-11T16:57:43.6266079Z PullRequests: write
2026-01-11T16:57:43.6266669Z RepositoryProjects: write
2026-01-11T16:57:43.6267257Z SecurityEvents: write
2026-01-11T16:57:43.6267774Z Statuses: write
2026-01-11T16:57:43.6268286Z ##[endgroup]
2026-01-11T16:57:43.6270911Z Secret source: Actions
2026-01-11T16:57:43.6272058Z Prepare workflow directory
2026-01-11T16:57:43.6584517Z Prepare all required actions
2026-01-11T16:57:43.6622443Z Getting action download info
2026-01-11T16:57:44.0268289Z Download action repository 'actions/checkout@v4' (SHA:34e114876b0b11c390a56381ad16ebd13914f8d5)
2026-01-11T16:57:44.1366166Z Download action repository 'actions/setup-node@v4' (SHA:49933ea5288caeca8642d1e84afbd3f7d6820020)
2026-01-11T16:57:44.2709380Z Download action repository 'actions/upload-artifact@v4' (SHA:ea165f8d65b6e75b540449e92b4886f43607fa02)
2026-01-11T16:57:44.5600709Z Complete job name: Test (Node 18.x)
2026-01-11T16:57:44.6240393Z ##[group]Run actions/checkout@v4
2026-01-11T16:57:44.6241232Z with:
2026-01-11T16:57:44.6241630Z   repository: nfe/client-nodejs
2026-01-11T16:57:44.6242267Z   token: ***
2026-01-11T16:57:44.6242642Z   ssh-strict: true
2026-01-11T16:57:44.6243019Z   ssh-user: git
2026-01-11T16:57:44.6243416Z   persist-credentials: true
2026-01-11T16:57:44.6243845Z   clean: true
2026-01-11T16:57:44.6244258Z   sparse-checkout-cone-mode: true
2026-01-11T16:57:44.6244736Z   fetch-depth: 1
2026-01-11T16:57:44.6245112Z   fetch-tags: false
2026-01-11T16:57:44.6245491Z   show-progress: true
2026-01-11T16:57:44.6245884Z   lfs: false
2026-01-11T16:57:44.6246244Z   submodules: false
2026-01-11T16:57:44.6246640Z   set-safe-directory: true
2026-01-11T16:57:44.6247269Z ##[endgroup]
2026-01-11T16:57:44.7362583Z Syncing repository: nfe/client-nodejs
2026-01-11T16:57:44.7365138Z ##[group]Getting Git version info
2026-01-11T16:57:44.7366312Z Working directory is '/home/runner/work/client-nodejs/client-nodejs'
2026-01-11T16:57:44.7368059Z [command]/usr/bin/git version
2026-01-11T16:57:45.2321783Z git version 2.52.0
2026-01-11T16:57:45.2350161Z ##[endgroup]
2026-01-11T16:57:45.2367183Z Temporarily overriding HOME='/home/runner/work/_temp/d956deb3-f754-47a7-bed8-b2f2000832db' before making global git config changes
2026-01-11T16:57:45.2370834Z Adding repository directory to the temporary git global config as a safe directory
2026-01-11T16:57:45.2382454Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/client-nodejs/client-nodejs
2026-01-11T16:57:45.2479225Z Deleting the contents of '/home/runner/work/client-nodejs/client-nodejs'
2026-01-11T16:57:45.2482355Z ##[group]Initializing the repository
2026-01-11T16:57:45.2486397Z [command]/usr/bin/git init /home/runner/work/client-nodejs/client-nodejs
2026-01-11T16:57:45.3389375Z hint: Using 'master' as the name for the initial branch. This default branch name
2026-01-11T16:57:45.3391235Z hint: will change to "main" in Git 3.0. To configure the initial branch name
2026-01-11T16:57:45.3392896Z hint: to use in all of your new repositories, which will suppress this warning,
2026-01-11T16:57:45.3394227Z hint: call:
2026-01-11T16:57:45.3394848Z hint:
2026-01-11T16:57:45.3395689Z hint: 	git config --global init.defaultBranch <name>
2026-01-11T16:57:45.3396811Z hint:
2026-01-11T16:57:45.3397840Z hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and
2026-01-11T16:57:45.3399883Z hint: 'development'. The just-created branch can be renamed via this command:
2026-01-11T16:57:45.3401322Z hint:
2026-01-11T16:57:45.3401971Z hint: 	git branch -m <name>
2026-01-11T16:57:45.3402772Z hint:
2026-01-11T16:57:45.3403916Z hint: Disable this message with "git config set advice.defaultBranchName false"
2026-01-11T16:57:45.3452603Z Initialized empty Git repository in /home/runner/work/client-nodejs/client-nodejs/.git/
2026-01-11T16:57:45.3463219Z [command]/usr/bin/git remote add origin https://github.com/nfe/client-nodejs
2026-01-11T16:57:45.3560862Z ##[endgroup]
2026-01-11T16:57:45.3562742Z ##[group]Disabling automatic garbage collection
2026-01-11T16:57:45.3564691Z [command]/usr/bin/git config --local gc.auto 0
2026-01-11T16:57:45.3591425Z ##[endgroup]
2026-01-11T16:57:45.3593088Z ##[group]Setting up auth
2026-01-11T16:57:45.3597298Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2026-01-11T16:57:45.3627084Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2026-01-11T16:57:45.5602371Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2026-01-11T16:57:45.5636664Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2026-01-11T16:57:45.5868731Z [command]/usr/bin/git config --local --name-only --get-regexp ^includeIf\.gitdir:
2026-01-11T16:57:45.5903111Z [command]/usr/bin/git submodule foreach --recursive git config --local --show-origin --name-only --get-regexp remote.origin.url
2026-01-11T16:57:45.6147095Z [command]/usr/bin/git config --local http.https://github.com/.extraheader AUTHORIZATION: basic ***
2026-01-11T16:57:45.6182112Z ##[endgroup]
2026-01-11T16:57:45.6184500Z ##[group]Fetching the repository
2026-01-11T16:57:45.6192765Z [command]/usr/bin/git -c protocol.version=2 fetch --no-tags --prune --no-recurse-submodules --depth=1 origin +a771f030fcbb2b3435623cbab00424ea942afa7b:refs/remotes/origin/v3
2026-01-11T16:57:45.9755350Z From https://github.com/nfe/client-nodejs
2026-01-11T16:57:45.9756475Z  * [new ref]         a771f030fcbb2b3435623cbab00424ea942afa7b -> origin/v3
2026-01-11T16:57:45.9852763Z ##[endgroup]
2026-01-11T16:57:45.9853327Z ##[group]Determining the checkout info
2026-01-11T16:57:45.9855089Z ##[endgroup]
2026-01-11T16:57:45.9860264Z [command]/usr/bin/git sparse-checkout disable
2026-01-11T16:57:45.9966169Z [command]/usr/bin/git config --local --unset-all extensions.worktreeConfig
2026-01-11T16:57:45.9990710Z ##[group]Checking out the ref
2026-01-11T16:57:45.9994464Z [command]/usr/bin/git checkout --progress --force -B v3 refs/remotes/origin/v3
2026-01-11T16:57:46.0241074Z Switched to a new branch 'v3'
2026-01-11T16:57:46.0243568Z branch 'v3' set up to track 'origin/v3'.
2026-01-11T16:57:46.0251215Z ##[endgroup]
2026-01-11T16:57:46.0283752Z [command]/usr/bin/git log -1 --format=%H
2026-01-11T16:57:46.0305179Z a771f030fcbb2b3435623cbab00424ea942afa7b
2026-01-11T16:57:46.0541010Z ##[group]Run actions/setup-node@v4
2026-01-11T16:57:46.0541291Z with:
2026-01-11T16:57:46.0541481Z   node-version: 18.x
2026-01-11T16:57:46.0541689Z   cache: npm
2026-01-11T16:57:46.0541875Z   always-auth: false
2026-01-11T16:57:46.0542067Z   check-latest: false
2026-01-11T16:57:46.0542397Z   token: ***
2026-01-11T16:57:46.0542580Z ##[endgroup]
2026-01-11T16:57:46.3098007Z Attempting to download 18.x...
2026-01-11T16:57:46.6641336Z Acquiring 18.20.8 - x64 from https://github.com/actions/node-versions/releases/download/18.20.8-14110393767/node-18.20.8-linux-x64.tar.gz
2026-01-11T16:57:46.9997953Z Extracting ...
2026-01-11T16:57:47.0103771Z [command]/usr/bin/tar xz --strip 1 --warning=no-unknown-keyword --overwrite -C /home/runner/work/_temp/f3d3e1c0-677e-4c75-ace1-6158d997bad0 -f /home/runner/work/_temp/50964002-5dfe-4df3-b863-df64848865b7
2026-01-11T16:57:47.9684377Z Adding to the cache ...
2026-01-11T16:57:49.6061395Z ##[group]Environment details
2026-01-11T16:57:49.9355821Z node: v18.20.8
2026-01-11T16:57:49.9357036Z npm: 10.8.2
2026-01-11T16:57:49.9357462Z yarn: 1.22.22
2026-01-11T16:57:49.9358115Z ##[endgroup]
2026-01-11T16:57:49.9379544Z [command]/opt/hostedtoolcache/node/18.20.8/x64/bin/npm config get cache
2026-01-11T16:57:50.0528756Z /home/runner/.npm
2026-01-11T16:57:50.1477733Z Cache hit for: node-cache-Linux-x64-npm-79533a046739a4b7054b7da16e0e319fc41b4abcbdf12622349b24825ea64787
2026-01-11T16:57:50.5179245Z Received 34248714 of 34248714 (100.0%), 107.4 MBs/sec
2026-01-11T16:57:50.5179842Z Cache Size: ~33 MB (34248714 B)
2026-01-11T16:57:50.5285806Z [command]/usr/bin/tar -xf /home/runner/work/_temp/d0c1f07f-ac4d-425c-bc2c-439d16b8716c/cache.tzst -P -C /home/runner/work/client-nodejs/client-nodejs --use-compress-program unzstd
2026-01-11T16:57:50.6954989Z Cache restored successfully
2026-01-11T16:57:50.7021271Z Cache restored from key: node-cache-Linux-x64-npm-79533a046739a4b7054b7da16e0e319fc41b4abcbdf12622349b24825ea64787
2026-01-11T16:57:50.7181645Z ##[group]Run npm ci
2026-01-11T16:57:50.7181900Z [36;1mnpm ci[0m
2026-01-11T16:57:50.7219898Z shell: /usr/bin/bash -e {0}
2026-01-11T16:57:50.7220170Z ##[endgroup]
2026-01-11T16:57:52.3303737Z npm warn deprecated inflight@1.0.6: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.
2026-01-11T16:57:52.3978365Z npm warn deprecated @humanwhocodes/config-array@0.13.0: Use @eslint/config-array instead
2026-01-11T16:57:52.4136123Z npm warn deprecated rimraf@3.0.2: Rimraf versions prior to v4 are no longer supported
2026-01-11T16:57:52.4462015Z npm warn deprecated @humanwhocodes/object-schema@2.0.3: Use @eslint/object-schema instead
2026-01-11T16:57:52.4470864Z npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
2026-01-11T16:57:52.4472416Z npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
2026-01-11T16:57:52.6812711Z npm warn deprecated source-map@0.8.0-beta.0: The work that was done in this beta branch won't be included in future versions
2026-01-11T16:57:53.4870711Z npm warn deprecated eslint@8.57.1: This version is no longer supported. Please see https://eslint.org/version-support for other options.
2026-01-11T16:57:53.7540080Z 
2026-01-11T16:57:53.7544158Z added 318 packages, and audited 319 packages in 3s
2026-01-11T16:57:53.7547848Z 
2026-01-11T16:57:53.7551451Z 88 packages are looking for funding
2026-01-11T16:57:53.7555106Z   run `npm fund` for details
2026-01-11T16:57:53.7792777Z 
2026-01-11T16:57:53.7796428Z 8 vulnerabilities (7 moderate, 1 high)
2026-01-11T16:57:53.7800098Z 
2026-01-11T16:57:53.7803602Z To address issues that do not require attention, run:
2026-01-11T16:57:53.7808580Z   npm audit fix
2026-01-11T16:57:53.7812325Z 
2026-01-11T16:57:53.7813715Z To address all issues (including breaking changes), run:
2026-01-11T16:57:53.7814305Z   npm audit fix --force
2026-01-11T16:57:53.7821968Z 
2026-01-11T16:57:53.7822332Z Run `npm audit` for details.
2026-01-11T16:57:53.8124406Z ##[group]Run npm run validate:spec
2026-01-11T16:57:53.8124871Z [36;1mnpm run validate:spec[0m
2026-01-11T16:57:53.8166919Z shell: /usr/bin/bash -e {0}
2026-01-11T16:57:53.8167289Z ##[endgroup]
2026-01-11T16:57:53.9459623Z 
2026-01-11T16:57:53.9460021Z > nfe-io@3.0.0 validate:spec
2026-01-11T16:57:53.9460543Z > tsx scripts/validate-spec.ts
2026-01-11T16:57:53.9460823Z 
2026-01-11T16:57:54.2753341Z 🔍 Validating OpenAPI specifications...
2026-01-11T16:57:54.2753957Z 
2026-01-11T16:57:54.2757062Z Found 12 spec file(s) to validate
2026-01-11T16:57:54.2757390Z 
2026-01-11T16:57:54.3440529Z ✓ calculo-impostos-v1.yaml - 6 warning(s)
2026-01-11T16:57:54.3441400Z   Warnings:
2026-01-11T16:57:54.3442012Z     ⚠️  No servers defined
2026-01-11T16:57:54.3445132Z        at: servers
2026-01-11T16:57:54.3445753Z        💡 Consider adding at least one server URL
2026-01-11T16:57:54.3446624Z     ⚠️  Operation GET /tax-codes/operation-code missing operationId
2026-01-11T16:57:54.3447400Z        at: paths./tax-codes/operation-code.get
2026-01-11T16:57:54.3448078Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.3448899Z     ⚠️  Operation GET /tax-codes/acquisition-purpose missing operationId
2026-01-11T16:57:54.3449886Z        at: paths./tax-codes/acquisition-purpose.get
2026-01-11T16:57:54.3450578Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.3451406Z     ⚠️  Operation GET /tax-codes/issuer-tax-profile missing operationId
2026-01-11T16:57:54.3452117Z        at: paths./tax-codes/issuer-tax-profile.get
2026-01-11T16:57:54.3452789Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.3453658Z     ⚠️  Operation GET /tax-codes/recipient-tax-profile missing operationId
2026-01-11T16:57:54.3454410Z        at: paths./tax-codes/recipient-tax-profile.get
2026-01-11T16:57:54.3455108Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.3455985Z     ⚠️  Operation POST /tax-rules/{tenantId}/engine/calculate missing operationId
2026-01-11T16:57:54.3456792Z        at: paths./tax-rules/{tenantId}/engine/calculate.post
2026-01-11T16:57:54.3457500Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.3457840Z 
2026-01-11T16:57:54.4047909Z ✓ consulta-cnpj.yaml - 2 warning(s)
2026-01-11T16:57:54.4048461Z   Warnings:
2026-01-11T16:57:54.4060019Z     ⚠️  Swagger 2.0 spec detected (2.0)
2026-01-11T16:57:54.4062591Z        at: swagger
2026-01-11T16:57:54.4063357Z        💡 Consider converting to OpenAPI 3.0 for better tooling support
2026-01-11T16:57:54.4064040Z     ⚠️  No servers defined
2026-01-11T16:57:54.4064398Z        at: servers
2026-01-11T16:57:54.4064900Z        💡 Consider adding at least one server URL
2026-01-11T16:57:54.4065232Z 
2026-01-11T16:57:54.4452755Z ✓ consulta-cte-v2.yaml - 7 warning(s)
2026-01-11T16:57:54.4453876Z   Warnings:
2026-01-11T16:57:54.4454822Z     ⚠️  Operation GET /v2/companies/{companyId}/inbound/transportationinvoices missing operationId
2026-01-11T16:57:54.4455528Z        at: paths./v2/companies/{companyId}/inbound/transportationinvoices.get
2026-01-11T16:57:54.4456039Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.4456645Z     ⚠️  Operation POST /v2/companies/{companyId}/inbound/transportationinvoices missing operationId
2026-01-11T16:57:54.4457283Z        at: paths./v2/companies/{companyId}/inbound/transportationinvoices.post
2026-01-11T16:57:54.4458196Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.4459489Z     ⚠️  Operation DELETE /v2/companies/{companyId}/inbound/transportationinvoices missing operationId
2026-01-11T16:57:54.4460602Z        at: paths./v2/companies/{companyId}/inbound/transportationinvoices.delete
2026-01-11T16:57:54.4461491Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.4462790Z     ⚠️  Operation GET /v2/companies/{company_id}/inbound/{access_key} missing operationId
2026-01-11T16:57:54.4463727Z        at: paths./v2/companies/{company_id}/inbound/{access_key}.get
2026-01-11T16:57:54.4464797Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.4465824Z     ⚠️  Operation GET /v2/companies/{company_id}/inbound/{access_key}/xml missing operationId
2026-01-11T16:57:54.4466799Z        at: paths./v2/companies/{company_id}/inbound/{access_key}/xml.get
2026-01-11T16:57:54.4467585Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.4468723Z     ⚠️  Operation GET /v2/companies/{company_id}/inbound/{access_key}/events/{event_key} missing operationId
2026-01-11T16:57:54.4470055Z        at: paths./v2/companies/{company_id}/inbound/{access_key}/events/{event_key}.get
2026-01-11T16:57:54.4470966Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.4472110Z     ⚠️  Operation GET /v2/companies/{company_id}/inbound/{access_key}/events/{event_key}/xml missing operationId
2026-01-11T16:57:54.4473536Z        at: paths./v2/companies/{company_id}/inbound/{access_key}/events/{event_key}/xml.get
2026-01-11T16:57:54.4474491Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.4474863Z 
2026-01-11T16:57:54.4615539Z ✓ consulta-endereco.yaml - 2 warning(s)
2026-01-11T16:57:54.4616365Z   Warnings:
2026-01-11T16:57:54.4617258Z     ⚠️  Swagger 2.0 spec detected (2.0)
2026-01-11T16:57:54.4617889Z        at: swagger
2026-01-11T16:57:54.4618600Z        💡 Consider converting to OpenAPI 3.0 for better tooling support
2026-01-11T16:57:54.4619405Z     ⚠️  No servers defined
2026-01-11T16:57:54.4619759Z        at: servers
2026-01-11T16:57:54.4620250Z        💡 Consider adding at least one server URL
2026-01-11T16:57:54.4620580Z 
2026-01-11T16:57:54.4903303Z ✓ consulta-nf-consumidor.yaml - 2 warning(s)
2026-01-11T16:57:54.4904233Z   Warnings:
2026-01-11T16:57:54.4905047Z     ⚠️  Swagger 2.0 spec detected (2.0)
2026-01-11T16:57:54.4905564Z        at: swagger
2026-01-11T16:57:54.4906268Z        💡 Consider converting to OpenAPI 3.0 for better tooling support
2026-01-11T16:57:54.4906944Z     ⚠️  No servers defined
2026-01-11T16:57:54.4907333Z        at: servers
2026-01-11T16:57:54.4907877Z        💡 Consider adding at least one server URL
2026-01-11T16:57:54.4908172Z 
2026-01-11T16:57:54.5594825Z ✓ consulta-nf.yaml - 2 warning(s)
2026-01-11T16:57:54.5595393Z   Warnings:
2026-01-11T16:57:54.5595958Z     ⚠️  Swagger 2.0 spec detected (2.0)
2026-01-11T16:57:54.5596483Z        at: swagger
2026-01-11T16:57:54.5597282Z        💡 Consider converting to OpenAPI 3.0 for better tooling support
2026-01-11T16:57:54.5598089Z     ⚠️  No servers defined
2026-01-11T16:57:54.5598533Z        at: servers
2026-01-11T16:57:54.5599390Z        💡 Consider adding at least one server URL
2026-01-11T16:57:54.5599797Z 
2026-01-11T16:57:54.6035022Z ✓ consulta-nfe-distribuicao-v1.yaml
2026-01-11T16:57:54.6035583Z 
2026-01-11T16:57:54.6069868Z ✓ cpf-api.yaml - 2 warning(s)
2026-01-11T16:57:54.6070539Z   Warnings:
2026-01-11T16:57:54.6071162Z     ⚠️  Swagger 2.0 spec detected (2.0)
2026-01-11T16:57:54.6071831Z        at: swagger
2026-01-11T16:57:54.6072698Z        💡 Consider converting to OpenAPI 3.0 for better tooling support
2026-01-11T16:57:54.6073554Z     ⚠️  No servers defined
2026-01-11T16:57:54.6074764Z        at: servers
2026-01-11T16:57:54.6075310Z        💡 Consider adding at least one server URL
2026-01-11T16:57:54.6075667Z 
2026-01-11T16:57:54.7140173Z ✓ nf-consumidor-v2.yaml - 10 warning(s)
2026-01-11T16:57:54.7140746Z   Warnings:
2026-01-11T16:57:54.7141442Z     ⚠️  Operation GET /v2/companies/{companyId}/consumerinvoices missing operationId
2026-01-11T16:57:54.7142035Z        at: paths./v2/companies/{companyId}/consumerinvoices.get
2026-01-11T16:57:54.7142870Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.7143672Z     ⚠️  Operation POST /v2/companies/{companyId}/consumerinvoices missing operationId
2026-01-11T16:57:54.7144426Z        at: paths./v2/companies/{companyId}/consumerinvoices.post
2026-01-11T16:57:54.7145451Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.7146612Z     ⚠️  Operation GET /v2/companies/{companyId}/consumerinvoices/{invoiceId} missing operationId
2026-01-11T16:57:54.7147224Z        at: paths./v2/companies/{companyId}/consumerinvoices/{invoiceId}.get
2026-01-11T16:57:54.7147711Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.7148298Z     ⚠️  Operation DELETE /v2/companies/{companyId}/consumerinvoices/{invoiceId} missing operationId
2026-01-11T16:57:54.7148892Z        at: paths./v2/companies/{companyId}/consumerinvoices/{invoiceId}.delete
2026-01-11T16:57:54.7149571Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.7150162Z     ⚠️  Operation GET /v2/companies/{companyId}/consumerinvoices/{invoiceId}/items missing operationId
2026-01-11T16:57:54.7150771Z        at: paths./v2/companies/{companyId}/consumerinvoices/{invoiceId}/items.get
2026-01-11T16:57:54.7151253Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.7151846Z     ⚠️  Operation GET /v2/companies/{companyId}/consumerinvoices/{invoiceId}/events missing operationId
2026-01-11T16:57:54.7152453Z        at: paths./v2/companies/{companyId}/consumerinvoices/{invoiceId}/events.get
2026-01-11T16:57:54.7152915Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.7153494Z     ⚠️  Operation GET /v2/companies/{companyId}/consumerinvoices/{invoiceId}/pdf missing operationId
2026-01-11T16:57:54.7154082Z        at: paths./v2/companies/{companyId}/consumerinvoices/{invoiceId}/pdf.get
2026-01-11T16:57:54.7154546Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.7155107Z     ⚠️  Operation GET /v2/companies/{companyId}/consumerinvoices/{invoiceId}/xml missing operationId
2026-01-11T16:57:54.7155673Z        at: paths./v2/companies/{companyId}/consumerinvoices/{invoiceId}/xml.get
2026-01-11T16:57:54.7156126Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.7156742Z     ⚠️  Operation GET /v2/companies/{companyId}/consumerinvoices/{invoiceId}/xml/rejection missing operationId
2026-01-11T16:57:54.7157399Z        at: paths./v2/companies/{companyId}/consumerinvoices/{invoiceId}/xml/rejection.get
2026-01-11T16:57:54.7157888Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.7158433Z     ⚠️  Operation POST /v2/companies/{companyId}/consumerinvoices/disablement missing operationId
2026-01-11T16:57:54.7159191Z        at: paths./v2/companies/{companyId}/consumerinvoices/disablement.post
2026-01-11T16:57:54.7159766Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.7159966Z 
2026-01-11T16:57:54.8348519Z ✓ nf-produto-v2.yaml - 24 warning(s)
2026-01-11T16:57:54.8349166Z   Warnings:
2026-01-11T16:57:54.8350030Z     ⚠️  Operation GET /v2/companies/{companyId}/productinvoices missing operationId
2026-01-11T16:57:54.8350994Z        at: paths./v2/companies/{companyId}/productinvoices.get
2026-01-11T16:57:54.8351861Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.8352897Z     ⚠️  Operation POST /v2/companies/{companyId}/productinvoices missing operationId
2026-01-11T16:57:54.8353476Z        at: paths./v2/companies/{companyId}/productinvoices.post
2026-01-11T16:57:54.8353918Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.8354644Z     ⚠️  Operation GET /v2/companies/{companyId}/productinvoices/{invoiceId} missing operationId
2026-01-11T16:57:54.8355715Z        at: paths./v2/companies/{companyId}/productinvoices/{invoiceId}.get
2026-01-11T16:57:54.8356562Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.8357272Z     ⚠️  Operation DELETE /v2/companies/{companyId}/productinvoices/{invoiceId} missing operationId
2026-01-11T16:57:54.8357993Z        at: paths./v2/companies/{companyId}/productinvoices/{invoiceId}.delete
2026-01-11T16:57:54.8358500Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.8359323Z     ⚠️  Operation GET /v2/companies/{companyId}/productinvoices/{invoiceId}/items missing operationId
2026-01-11T16:57:54.8360251Z        at: paths./v2/companies/{companyId}/productinvoices/{invoiceId}/items.get
2026-01-11T16:57:54.8361260Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.8362283Z     ⚠️  Operation GET /v2/companies/{companyId}/productinvoices/{invoiceId}/events missing operationId
2026-01-11T16:57:54.8363268Z        at: paths./v2/companies/{companyId}/productinvoices/{invoiceId}/events.get
2026-01-11T16:57:54.8364060Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.8365004Z     ⚠️  Operation GET /v2/companies/{companyId}/productinvoices/{invoiceId}/pdf missing operationId
2026-01-11T16:57:54.8365971Z        at: paths./v2/companies/{companyId}/productinvoices/{invoiceId}/pdf.get
2026-01-11T16:57:54.8366733Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.8367706Z     ⚠️  Operation GET /v2/companies/{companyId}/productinvoices/{invoiceId}/xml missing operationId
2026-01-11T16:57:54.8368704Z        at: paths./v2/companies/{companyId}/productinvoices/{invoiceId}/xml.get
2026-01-11T16:57:54.8369658Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.8370742Z     ⚠️  Operation GET /v2/companies/{companyId}/productinvoices/{invoiceId}/xml/rejection missing operationId
2026-01-11T16:57:54.8371842Z        at: paths./v2/companies/{companyId}/productinvoices/{invoiceId}/xml/rejection.get
2026-01-11T16:57:54.8372668Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.8373724Z     ⚠️  Operation GET /v2/companies/{companyId}/productinvoices/{invoiceId}/xml-rejection missing operationId
2026-01-11T16:57:54.8374799Z        at: paths./v2/companies/{companyId}/productinvoices/{invoiceId}/xml-rejection.get
2026-01-11T16:57:54.8375636Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.8376623Z     ⚠️  Operation GET /v2/companies/{companyId}/productinvoices/{invoiceId}/xml-epec missing operationId
2026-01-11T16:57:54.8377688Z        at: paths./v2/companies/{companyId}/productinvoices/{invoiceId}/xml-epec.get
2026-01-11T16:57:54.8378573Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.8392687Z     ⚠️  Operation PUT /v2/companies/{companyId}/productinvoices/{invoiceId}/correctionletter missing operationId
2026-01-11T16:57:54.8393961Z        at: paths./v2/companies/{companyId}/productinvoices/{invoiceId}/correctionletter.put
2026-01-11T16:57:54.8394866Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.8395573Z     ⚠️  Operation GET /v2/companies/{companyId}/productinvoices/{invoiceId}/correctionletter/pdf missing operationId
2026-01-11T16:57:54.8396304Z        at: paths./v2/companies/{companyId}/productinvoices/{invoiceId}/correctionletter/pdf.get
2026-01-11T16:57:54.8396842Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.8397490Z     ⚠️  Operation GET /v2/companies/{companyId}/productinvoices/{invoiceId}/correctionletter/xml missing operationId
2026-01-11T16:57:54.8398204Z        at: paths./v2/companies/{companyId}/productinvoices/{invoiceId}/correctionletter/xml.get
2026-01-11T16:57:54.8398922Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.8399806Z     ⚠️  Operation POST /v2/companies/{companyId}/productinvoices/{invoiceId}/disablement missing operationId
2026-01-11T16:57:54.8400477Z        at: paths./v2/companies/{companyId}/productinvoices/{invoiceId}/disablement.post
2026-01-11T16:57:54.8401178Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.8402155Z     ⚠️  Operation POST /v2/companies/{companyId}/productinvoices/disablement missing operationId
2026-01-11T16:57:54.8403114Z        at: paths./v2/companies/{companyId}/productinvoices/disablement.post
2026-01-11T16:57:54.8403904Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.8404911Z     ⚠️  Operation POST /v2/companies/{companyId}/statetaxes/{statetaxId}/productinvoices missing operationId
2026-01-11T16:57:54.8406323Z        at: paths./v2/companies/{companyId}/statetaxes/{statetaxId}/productinvoices.post
2026-01-11T16:57:54.8407140Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.8408075Z     ⚠️  Operation GET /v2/webhooks/eventtypes missing operationId
2026-01-11T16:57:54.8408724Z        at: paths./v2/webhooks/eventtypes.get
2026-01-11T16:57:54.8409511Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.8410168Z     ⚠️  Operation GET /v2/webhooks missing operationId
2026-01-11T16:57:54.8410669Z        at: paths./v2/webhooks.get
2026-01-11T16:57:54.8411263Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.8411953Z     ⚠️  Operation POST /v2/webhooks missing operationId
2026-01-11T16:57:54.8412470Z        at: paths./v2/webhooks.post
2026-01-11T16:57:54.8413013Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.8413632Z     ⚠️  Operation DELETE /v2/webhooks missing operationId
2026-01-11T16:57:54.8414148Z        at: paths./v2/webhooks.delete
2026-01-11T16:57:54.8414710Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.8415388Z     ⚠️  Operation PUT /v2/webhooks/{webhook_id} missing operationId
2026-01-11T16:57:54.8415876Z        at: paths./v2/webhooks/{webhook_id}.put
2026-01-11T16:57:54.8416476Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.8417325Z     ⚠️  Operation DELETE /v2/webhooks/{webhook_id} missing operationId
2026-01-11T16:57:54.8418000Z        at: paths./v2/webhooks/{webhook_id}.delete
2026-01-11T16:57:54.8418637Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.8419600Z     ⚠️  Operation PUT /v2/webhooks/{webhook_id}/pings missing operationId
2026-01-11T16:57:54.8420304Z        at: paths./v2/webhooks/{webhook_id}/pings.put
2026-01-11T16:57:54.8420962Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.8421305Z 
2026-01-11T16:57:54.9227105Z ✓ nf-servico-v1.yaml - 7 warning(s)
2026-01-11T16:57:54.9227608Z   Warnings:
2026-01-11T16:57:54.9228247Z     ⚠️  Operation GET /v2/webhooks/eventtypes missing operationId
2026-01-11T16:57:54.9228882Z        at: paths./v2/webhooks/eventtypes.get
2026-01-11T16:57:54.9229733Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.9230436Z     ⚠️  Operation GET /v2/webhooks missing operationId
2026-01-11T16:57:54.9230971Z        at: paths./v2/webhooks.get
2026-01-11T16:57:54.9231565Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.9232294Z     ⚠️  Operation POST /v2/webhooks missing operationId
2026-01-11T16:57:54.9232655Z        at: paths./v2/webhooks.post
2026-01-11T16:57:54.9233040Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.9233457Z     ⚠️  Operation DELETE /v2/webhooks missing operationId
2026-01-11T16:57:54.9233794Z        at: paths./v2/webhooks.delete
2026-01-11T16:57:54.9234154Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.9234593Z     ⚠️  Operation PUT /v2/webhooks/{webhook_id} missing operationId
2026-01-11T16:57:54.9234982Z        at: paths./v2/webhooks/{webhook_id}.put
2026-01-11T16:57:54.9235357Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.9235812Z     ⚠️  Operation DELETE /v2/webhooks/{webhook_id} missing operationId
2026-01-11T16:57:54.9236213Z        at: paths./v2/webhooks/{webhook_id}.delete
2026-01-11T16:57:54.9236587Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.9237038Z     ⚠️  Operation PUT /v2/webhooks/{webhook_id}/pings missing operationId
2026-01-11T16:57:54.9237608Z        at: paths./v2/webhooks/{webhook_id}/pings.put
2026-01-11T16:57:54.9238261Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.9238599Z 
2026-01-11T16:57:54.9310942Z ✓ nfeio.yaml - 9 warning(s)
2026-01-11T16:57:54.9311436Z   Warnings:
2026-01-11T16:57:54.9311887Z     ⚠️  No servers defined
2026-01-11T16:57:54.9312336Z        at: servers
2026-01-11T16:57:54.9312950Z        💡 Consider adding at least one server URL
2026-01-11T16:57:54.9314304Z     ⚠️  Operation POST /api/notifications/zip missing operationId
2026-01-11T16:57:54.9315102Z        at: paths./api/notifications/zip.post
2026-01-11T16:57:54.9316747Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.9317771Z     ⚠️  Operation POST /api/notifications/{id} missing operationId
2026-01-11T16:57:54.9318574Z        at: paths./api/notifications/{id}.post
2026-01-11T16:57:54.9319453Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.9320298Z     ⚠️  Operation POST /api/notifications/workflow/finished missing operationId
2026-01-11T16:57:54.9321058Z        at: paths./api/notifications/workflow/finished.post
2026-01-11T16:57:54.9321781Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.9322637Z     ⚠️  Operation GET /api/processing-jobs/resources/outputs missing operationId
2026-01-11T16:57:54.9323427Z        at: paths./api/processing-jobs/resources/outputs.get
2026-01-11T16:57:54.9324104Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.9324850Z     ⚠️  Operation GET /api/processing-jobs missing operationId
2026-01-11T16:57:54.9325451Z        at: paths./api/processing-jobs.get
2026-01-11T16:57:54.9326539Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.9327342Z     ⚠️  Operation POST /api/processing-jobs missing operationId
2026-01-11T16:57:54.9327941Z        at: paths./api/processing-jobs.post
2026-01-11T16:57:54.9328528Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.9329334Z     ⚠️  Operation GET /api/processing-jobs/{id} missing operationId
2026-01-11T16:57:54.9329968Z        at: paths./api/processing-jobs/{id}.get
2026-01-11T16:57:54.9330410Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.9330870Z     ⚠️  Operation DELETE /api/processing-jobs/{id} missing operationId
2026-01-11T16:57:54.9331298Z        at: paths./api/processing-jobs/{id}.delete
2026-01-11T16:57:54.9331682Z        💡 Add operationId for better code generation
2026-01-11T16:57:54.9331894Z 
2026-01-11T16:57:54.9332122Z ──────────────────────────────────────────────────
2026-01-11T16:57:54.9332380Z Summary:
2026-01-11T16:57:54.9332574Z   Total specs:     12
2026-01-11T16:57:54.9332801Z   Valid:           12 ✓
2026-01-11T16:57:54.9333004Z   Invalid:         0
2026-01-11T16:57:54.9333189Z   Total errors:    0
2026-01-11T16:57:54.9333381Z   Total warnings:  73
2026-01-11T16:57:54.9333718Z ──────────────────────────────────────────────────
2026-01-11T16:57:54.9333905Z 
2026-01-11T16:57:54.9334072Z ✅ All specifications are valid!
2026-01-11T16:57:54.9334225Z 
2026-01-11T16:57:54.9564455Z ##[group]Run npm run generate
2026-01-11T16:57:54.9564731Z [36;1mnpm run generate[0m
2026-01-11T16:57:54.9596342Z shell: /usr/bin/bash -e {0}
2026-01-11T16:57:54.9596570Z ##[endgroup]
2026-01-11T16:57:55.0807498Z 
2026-01-11T16:57:55.0807967Z > nfe-io@3.0.0 generate
2026-01-11T16:57:55.0808525Z > tsx scripts/generate-types.ts
2026-01-11T16:57:55.0808895Z 
2026-01-11T16:57:55.4491685Z 🚀 Starting OpenAPI type generation...
2026-01-11T16:57:55.4492201Z 
2026-01-11T16:57:55.4493184Z 📁 Discovering OpenAPI specs...
2026-01-11T16:57:55.4501152Z    Found 12 spec file(s)
2026-01-11T16:57:55.4501445Z 
2026-01-11T16:57:55.4501986Z ⚙️  Generating TypeScript types...
2026-01-11T16:57:55.4503345Z    • calculo-impostos-v1...
2026-01-11T16:57:55.4811850Z      ✓ Generated /home/runner/work/client-nodejs/client-nodejs/src/generated/calculo-impostos-v1.ts
2026-01-11T16:57:55.4812692Z    • consulta-cnpj...
2026-01-11T16:57:55.4817170Z      ⚠️  Skipped (Swagger 2.0 not supported by openapi-typescript v6+)
2026-01-11T16:57:55.4818261Z      💡 Consider converting to OpenAPI 3.0 for type generation
2026-01-11T16:57:55.4818954Z    • consulta-cte-v2...
2026-01-11T16:57:55.4913819Z      ✓ Generated /home/runner/work/client-nodejs/client-nodejs/src/generated/consulta-cte-v2.ts
2026-01-11T16:57:55.4914994Z    • consulta-endereco...
2026-01-11T16:57:55.4917751Z      ⚠️  Skipped (Swagger 2.0 not supported by openapi-typescript v6+)
2026-01-11T16:57:55.4919332Z      💡 Consider converting to OpenAPI 3.0 for type generation
2026-01-11T16:57:55.4920031Z    • consulta-nf-consumidor...
2026-01-11T16:57:55.4922952Z      ⚠️  Skipped (Swagger 2.0 not supported by openapi-typescript v6+)
2026-01-11T16:57:55.4924340Z      💡 Consider converting to OpenAPI 3.0 for type generation
2026-01-11T16:57:55.4925521Z    • consulta-nf...
2026-01-11T16:57:55.4930833Z      ⚠️  Skipped (Swagger 2.0 not supported by openapi-typescript v6+)
2026-01-11T16:57:55.4931856Z      💡 Consider converting to OpenAPI 3.0 for type generation
2026-01-11T16:57:55.4932599Z    • consulta-nfe-distribuicao-v1...
2026-01-11T16:57:55.5121893Z      ✓ Generated /home/runner/work/client-nodejs/client-nodejs/src/generated/consulta-nfe-distribuicao-v1.ts
2026-01-11T16:57:55.5123047Z    • cpf-api...
2026-01-11T16:57:55.5123926Z      ⚠️  Skipped (Swagger 2.0 not supported by openapi-typescript v6+)
2026-01-11T16:57:55.5124949Z      💡 Consider converting to OpenAPI 3.0 for type generation
2026-01-11T16:57:55.5125511Z    • nf-consumidor-v2...
2026-01-11T16:57:55.5628569Z      ✓ Generated /home/runner/work/client-nodejs/client-nodejs/src/generated/nf-consumidor-v2.ts
2026-01-11T16:57:55.5629531Z    • nf-produto-v2...
2026-01-11T16:57:55.6119736Z      ✓ Generated /home/runner/work/client-nodejs/client-nodejs/src/generated/nf-produto-v2.ts
2026-01-11T16:57:55.6120728Z    • nf-servico-v1...
2026-01-11T16:57:55.6487901Z      ✓ Generated /home/runner/work/client-nodejs/client-nodejs/src/generated/nf-servico-v1.ts
2026-01-11T16:57:55.6489168Z    • nfeio...
2026-01-11T16:57:55.6526030Z      ✓ Generated /home/runner/work/client-nodejs/client-nodejs/src/generated/nfeio.ts
2026-01-11T16:57:55.6526632Z 
2026-01-11T16:57:55.6526913Z 📦 Creating unified index...
2026-01-11T16:57:55.6531889Z    ✓ Created unified index: /home/runner/work/client-nodejs/client-nodejs/src/generated/index.ts
2026-01-11T16:57:55.6532582Z 
2026-01-11T16:57:55.6532961Z ✅ Type generation completed successfully!
2026-01-11T16:57:55.6533517Z    Generated 7 of 12 spec file(s)
2026-01-11T16:57:55.6534149Z    Output directory: /home/runner/work/client-nodejs/client-nodejs/src/generated
2026-01-11T16:57:55.6534482Z 
2026-01-11T16:57:55.6775622Z ##[group]Run npm run lint
2026-01-11T16:57:55.6775884Z [36;1mnpm run lint[0m
2026-01-11T16:57:55.6807803Z shell: /usr/bin/bash -e {0}
2026-01-11T16:57:55.6808040Z ##[endgroup]
2026-01-11T16:57:55.8027732Z 
2026-01-11T16:57:55.8028034Z > nfe-io@3.0.0 lint
2026-01-11T16:57:55.8028463Z > eslint src --ext .ts --fix
2026-01-11T16:57:55.8028689Z 
2026-01-11T16:57:57.0098257Z 
2026-01-11T16:57:57.0099192Z /home/runner/work/client-nodejs/client-nodejs/src/core/client.ts
2026-01-11T16:57:57.0124394Z ##[warning]  332:29  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0132150Z ##[warning]  363:29  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0133667Z ##[warning]  529:46  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0135048Z ##[warning]  571:36  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0136330Z ##[warning]  579:34  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0137579Z ##[warning]  629:75  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0138352Z 
2026-01-11T16:57:57.0138637Z /home/runner/work/client-nodejs/client-nodejs/src/core/errors/index.ts
2026-01-11T16:57:57.0139713Z ##[warning]  29:58  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0141049Z ##[warning]  30:17  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0141794Z 
2026-01-11T16:57:57.0142060Z /home/runner/work/client-nodejs/client-nodejs/src/core/http/client.ts
2026-01-11T16:57:57.0143241Z ##[warning]   18:22  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0144600Z ##[warning]   19:32  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0145852Z ##[warning]   20:32  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0147117Z ##[warning]   21:25  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0148380Z ##[warning]   22:27  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0149979Z ##[warning]   23:29  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0151309Z ##[warning]   24:23  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0152555Z ##[warning]   25:24  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0153812Z ##[warning]  143:46  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0155057Z ##[warning]  175:48  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0156300Z ##[warning]  191:47  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0157540Z ##[warning]  270:47  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0159385Z ##[warning]  277:22  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0160712Z ##[warning]  298:36  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0161952Z ##[warning]  300:38  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0163243Z ##[warning]  300:48  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0164003Z 
2026-01-11T16:57:57.0164544Z /home/runner/work/client-nodejs/client-nodejs/src/core/resources/companies.ts
2026-01-11T16:57:57.0165465Z ##[warning]   87:13  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0166749Z ##[warning]  124:15  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0168109Z ##[warning]  131:17  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0169498Z ##[warning]  187:53  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0191294Z ##[warning]  190:59  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0192902Z ##[warning]  222:29  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0193769Z 
2026-01-11T16:57:57.0194126Z /home/runner/work/client-nodejs/client-nodejs/src/core/resources/service-invoices.ts
2026-01-11T16:57:57.0195023Z ##[warning]   97:69  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0196333Z ##[warning]  107:42  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0197661Z ##[warning]  114:69  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0198945Z ##[warning]  124:42  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0199999Z 
2026-01-11T16:57:57.0200301Z /home/runner/work/client-nodejs/client-nodejs/src/core/resources/webhooks.ts
2026-01-11T16:57:57.0201141Z ##[warning]  171:37  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0202142Z 
2026-01-11T16:57:57.0202368Z /home/runner/work/client-nodejs/client-nodejs/src/index.ts
2026-01-11T16:57:57.0203128Z ##[warning]  263:34  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0204393Z ##[warning]  342:36  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0205647Z ##[warning]  348:67  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0206886Z ##[warning]  350:29  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0208122Z ##[warning]  400:33  warning  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
2026-01-11T16:57:57.0208877Z 
2026-01-11T16:57:57.0209412Z ✖ 40 problems (0 errors, 40 warnings)
2026-01-11T16:57:57.0209601Z 
2026-01-11T16:57:57.0375663Z ##[group]Run npm run typecheck
2026-01-11T16:57:57.0375968Z [36;1mnpm run typecheck[0m
2026-01-11T16:57:57.0408514Z shell: /usr/bin/bash -e {0}
2026-01-11T16:57:57.0408752Z ##[endgroup]
2026-01-11T16:57:57.1623699Z 
2026-01-11T16:57:57.1624025Z > nfe-io@3.0.0 typecheck
2026-01-11T16:57:57.1624425Z > tsc --noEmit
2026-01-11T16:57:57.1624622Z 
2026-01-11T16:57:58.5116909Z ##[group]Run npm test -- --run --reporter=verbose
2026-01-11T16:57:58.5117314Z [36;1mnpm test -- --run --reporter=verbose[0m
2026-01-11T16:57:58.5150536Z shell: /usr/bin/bash -e {0}
2026-01-11T16:57:58.5150777Z ##[endgroup]
2026-01-11T16:57:58.6411799Z 
2026-01-11T16:57:58.6412103Z > nfe-io@3.0.0 test
2026-01-11T16:57:58.6412467Z > vitest --run --reporter=verbose
2026-01-11T16:57:58.6412649Z 
2026-01-11T16:57:58.9674940Z 
2026-01-11T16:57:58.9676561Z [7m[1m[36m RUN [39m[22m[27m [36mv1.6.1[39m [90m/home/runner/work/client-nodejs/client-nodejs[39m
2026-01-11T16:57:58.9677312Z 
2026-01-11T16:57:59.4674348Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mcreate[2m > [22mshould create a service invoice and return completed invoice
2026-01-11T16:57:59.4678272Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mcreate[2m > [22mshould handle async response (202 status)
2026-01-11T16:57:59.4680643Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mlist[2m > [22mshould list service invoices for a company
2026-01-11T16:57:59.4682799Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mlist[2m > [22mshould pass pagination options to http client
2026-01-11T16:57:59.4684921Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mretrieve[2m > [22mshould retrieve a service invoice by id
2026-01-11T16:57:59.4686965Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mcancel[2m > [22mshould cancel a service invoice
2026-01-11T16:57:59.4688948Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22msendEmail[2m > [22mshould send invoice via email
2026-01-11T16:57:59.4691421Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mdownloadPdf[2m > [22mshould download PDF for a specific invoice
2026-01-11T16:57:59.4693853Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mdownloadPdf[2m > [22mshould download PDF for all invoices when invoiceId is not provided
2026-01-11T16:57:59.4696205Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mdownloadXml[2m > [22mshould download XML for a specific invoice
2026-01-11T16:57:59.4698548Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mdownloadXml[2m > [22mshould download XML for all invoices when invoiceId is not provided
2026-01-11T16:57:59.4701022Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22merror handling[2m > [22mshould propagate errors from http client
2026-01-11T16:57:59.4703817Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mcreateAndWait[2m > [22mshould handle synchronous response (201) without polling
2026-01-11T16:57:59.4794454Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mcreateAndWait[2m > [22mshould poll until completion for async response (202)
2026-01-11T16:57:59.5009670Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mcreateAndWait[2m > [22mshould throw InvoiceProcessingError on polling timeout
2026-01-11T16:57:59.5027692Z  [32m✓[39m tests/unit/client-polling-integration.test.ts[2m > [22mClient Polling Integration[2m > [22mend-to-end invoice creation with polling[2m > [22mshould create invoice and poll until completion (pending → pending → issued)
2026-01-11T16:57:59.5029818Z  [32m✓[39m tests/unit/client-polling-integration.test.ts[2m > [22mClient Polling Integration[2m > [22mend-to-end invoice creation with polling[2m > [22mshould handle immediate completion (201 response)
2026-01-11T16:57:59.5355223Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mGET Requests[2m > [22mshould make successful GET request
2026-01-11T16:57:59.5356541Z [31m   → Connection error[39m
2026-01-11T16:57:59.5358004Z  [32m✓[39m tests/unit/client-polling-integration.test.ts[2m > [22mClient Polling Integration[2m > [22mend-to-end invoice creation with polling[2m > [22mshould handle progressive status changes (pending → processing → authorized → issued)
2026-01-11T16:57:59.5573592Z  [32m✓[39m tests/unit/client-polling-integration.test.ts[2m > [22mClient Polling Integration[2m > [22mend-to-end invoice creation with polling[2m > [22mshould handle network errors during polling and retry
2026-01-11T16:57:59.5786293Z  [32m✓[39m tests/unit/client-polling-integration.test.ts[2m > [22mClient Polling Integration[2m > [22mend-to-end invoice creation with polling[2m > [22mshould timeout when invoice never completes
2026-01-11T16:57:59.5948259Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mcreateAndWait[2m > [22mshould throw InvoiceProcessingError if invoice processing fails
2026-01-11T16:57:59.5950616Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mcreateAndWait[2m > [22mshould throw InvoiceProcessingError on unexpected response format
2026-01-11T16:57:59.5952517Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mcreateAndWait[2m > [22mshould respect custom polling options
2026-01-11T16:57:59.5954345Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mcreateAndWait[2m > [22mshould handle async response without location header
2026-01-11T16:57:59.5956107Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mcreateAndWait[2m > [22mshould extract path from full URL in location header
2026-01-11T16:57:59.6002904Z  [32m✓[39m tests/unit/client-polling-integration.test.ts[2m > [22mClient Polling Integration[2m > [22mend-to-end invoice creation with polling[2m > [22mshould fail when invoice processing fails
2026-01-11T16:57:59.6096150Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mGET Requests[2m > [22mshould include query parameters in GET request
2026-01-11T16:57:59.6096991Z [31m   → Connection error[39m
2026-01-11T16:57:59.6106099Z  [32m✓[39m tests/unit/client-polling-integration.test.ts[2m > [22mClient Polling Integration[2m > [22mdirect pollUntilComplete usage[2m > [22mshould poll any resource endpoint until complete
2026-01-11T16:57:59.6107618Z  [32m✓[39m tests/unit/client-polling-integration.test.ts[2m > [22mClient Polling Integration[2m > [22mdirect pollUntilComplete usage[2m > [22mshould work with full URLs
2026-01-11T16:57:59.6436048Z  [32m✓[39m tests/unit/client-polling-integration.test.ts[2m > [22mClient Polling Integration[2m > [22mreal-world scenarios[2m > [22mshould handle typical NFE.io invoice workflow
2026-01-11T16:57:59.6566876Z  [32m✓[39m tests/unit/client-polling-integration.test.ts[2m > [22mClient Polling Integration[2m > [22mreal-world scenarios[2m > [22mshould handle multiple concurrent invoice creations with polling
2026-01-11T16:57:59.6569343Z  [32m✓[39m tests/unit/client-polling-integration.test.ts[2m > [22mClient Polling Integration[2m > [22medge cases[2m > [22mshould handle missing location in 202 response
2026-01-11T16:57:59.6570786Z  [32m✓[39m tests/unit/client-polling-integration.test.ts[2m > [22mClient Polling Integration[2m > [22medge cases[2m > [22mshould handle invoice with id and number but no status
2026-01-11T16:57:59.6978285Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mGET Requests[2m > [22mshould omit undefined query parameters
2026-01-11T16:57:59.6979859Z [31m   → Connection error[39m
2026-01-11T16:57:59.7037413Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mcreateAndWait[2m > [22mshould handle timeoutMs correctly
2026-01-11T16:57:59.7043722Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mgetStatus[2m > [22mshould return invoice status with completion flags
2026-01-11T16:57:59.7051066Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mgetStatus[2m > [22mshould recognize failed status
2026-01-11T16:57:59.7057021Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mgetStatus[2m > [22mshould recognize cancelled status as failed
2026-01-11T16:57:59.7058876Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mcreateBatch[2m > [22mshould create multiple invoices without waiting
2026-01-11T16:57:59.7060844Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mcreateBatch[2m > [22mshould create multiple invoices and wait for completion
2026-01-11T16:57:59.7357868Z  [32m✓[39m tests/unit/service-invoices.test.ts[2m > [22mServiceInvoicesResource[2m > [22mcreateBatch[2m > [22mshould respect maxConcurrent option
2026-01-11T16:57:59.7861707Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mPOST Requests[2m > [22mshould make successful POST request with JSON body
2026-01-11T16:57:59.7866089Z [31m   → Connection error[39m
2026-01-11T16:57:59.7867588Z  [32m✓[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mPOST Requests[2m > [22mshould handle 202 Accepted with location header
2026-01-11T16:57:59.8589332Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mPUT Requests[2m > [22mshould make successful PUT request
2026-01-11T16:57:59.8590560Z [31m   → Connection error[39m
2026-01-11T16:57:59.8591950Z  [32m✓[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mDELETE Requests[2m > [22mshould make successful DELETE request
2026-01-11T16:57:59.9190494Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22mlist[2m > [22mshould list all companies
2026-01-11T16:57:59.9192505Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22mretrieve[2m > [22mshould retrieve a specific company
2026-01-11T16:57:59.9193956Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22mcreate[2m > [22mshould create a new company
2026-01-11T16:57:59.9195000Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22mupdate[2m > [22mshould update an existing company
2026-01-11T16:57:59.9196033Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22mError Handling[2m > [22mshould propagate HTTP client errors
2026-01-11T16:57:59.9197496Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22muploadCertificate[2m > [22mshould upload certificate with buffer and password
2026-01-11T16:57:59.9198693Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22muploadCertificate[2m > [22mshould upload certificate with custom filename
2026-01-11T16:57:59.9199981Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22muploadCertificate[2m > [22mshould handle Blob as file input
2026-01-11T16:57:59.9201059Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22muploadCertificate[2m > [22mshould propagate errors from HTTP client
2026-01-11T16:57:59.9202174Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22muploadCertificate[2m > [22mshould handle invalid certificate error
2026-01-11T16:57:59.9203317Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22muploadCertificate[2m > [22mshould throw error if FormData is not available
2026-01-11T16:57:59.9204405Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22mgetCertificateStatus[2m > [22mshould get certificate status
2026-01-11T16:57:59.9205639Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22mgetCertificateStatus[2m > [22mshould handle company without certificate
2026-01-11T16:57:59.9206705Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22mfindByTaxNumber[2m > [22mshould find company by tax number
2026-01-11T16:57:59.9207742Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22mfindByTaxNumber[2m > [22mshould return null if company not found
2026-01-11T16:57:59.9208932Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22mgetCompaniesWithCertificates[2m > [22mshould return companies with valid certificates
2026-01-11T16:57:59.9210332Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22mgetCompaniesWithCertificates[2m > [22mshould skip companies where certificate check fails
2026-01-11T16:57:59.9211448Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22mcreateBatch[2m > [22mshould create multiple companies
2026-01-11T16:57:59.9212711Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22mcreateBatch[2m > [22mshould continue on error when continueOnError is true
2026-01-11T16:57:59.9333257Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mAuthentication[2m > [22mshould include Basic Auth header
2026-01-11T16:57:59.9334103Z [31m   → Connection error[39m
2026-01-11T16:57:59.9503473Z  [32m✓[39m tests/unit/companies.test.ts[2m > [22mCompaniesResource[2m > [22mcreateBatch[2m > [22mshould respect maxConcurrent option
2026-01-11T16:57:59.9828954Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22msuccessful polling[2m > [22mshould return immediately if resource is already complete
2026-01-11T16:58:00.0109605Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22msuccessful polling[2m > [22mshould poll multiple times until resource completes
2026-01-11T16:58:00.0111507Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22msuccessful polling[2m > [22mshould recognize "completed" status as complete
2026-01-11T16:58:00.0112939Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22msuccessful polling[2m > [22mshould recognize invoice with id and number (no explicit status) as complete
2026-01-11T16:58:00.0114272Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22mURL path extraction[2m > [22mshould extract path from full URL
2026-01-11T16:58:00.0115508Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22mURL path extraction[2m > [22mshould extract path with query parameters from full URL
2026-01-11T16:58:00.0117065Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22mURL path extraction[2m > [22mshould handle relative path starting with /
2026-01-11T16:58:00.0118300Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22mURL path extraction[2m > [22mshould add leading slash to path without one
2026-01-11T16:58:00.0125419Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mAuthentication[2m > [22mshould throw AuthenticationError on 401
2026-01-11T16:58:00.0126841Z [31m   → expected ConnectionError: Connection error { …(4) } to match object { name: 'AuthenticationError', …(1) }
2026-01-11T16:58:00.0127513Z (13 matching properties omitted from actual)[39m
2026-01-11T16:58:00.0325061Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22mtimeout and error handling[2m > [22mshould throw PollingTimeoutError after maxAttempts
2026-01-11T16:58:00.0848689Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22mtimeout and error handling[2m > [22mshould include polling details in timeout error
2026-01-11T16:58:00.0879190Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mError Handling[2m > [22mshould throw ValidationError on 400
2026-01-11T16:58:00.0880581Z [31m   → expected ConnectionError: Connection error { …(4) } to match object { name: 'ValidationError', code: 400 }
2026-01-11T16:58:00.0881299Z (13 matching properties omitted from actual)[39m
2026-01-11T16:58:00.1629554Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mError Handling[2m > [22mshould throw NotFoundError on 404
2026-01-11T16:58:00.1630668Z [31m   → expected ConnectionError: Connection error { …(4) } to match object { name: 'NotFoundError', code: 404 }
2026-01-11T16:58:00.1631345Z (13 matching properties omitted from actual)[39m
2026-01-11T16:58:00.2382752Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mError Handling[2m > [22mshould throw RateLimitError on 429 after retries
2026-01-11T16:58:00.2384843Z [31m   → expected ConnectionError: Connection error { …(4) } to match object { name: 'RateLimitError', code: 429 }
2026-01-11T16:58:00.2385826Z (13 matching properties omitted from actual)[39m
2026-01-11T16:58:00.3132213Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mError Handling[2m > [22mshould throw ServerError on 500 after retries
2026-01-11T16:58:00.3134670Z [31m   → expected ConnectionError: Connection error { …(4) } to match object { name: 'ServerError', code: 500 }
2026-01-11T16:58:00.3136181Z (13 matching properties omitted from actual)[39m
2026-01-11T16:58:00.3823034Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22mtimeout and error handling[2m > [22mshould throw error if resource processing failed
2026-01-11T16:58:00.3881527Z  [32m✓[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mError Handling[2m > [22mshould throw ConnectionError on network failure after retries
2026-01-11T16:58:00.4598415Z  [32m✓[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mError Handling[2m > [22mshould throw TimeoutError on abort after retries
2026-01-11T16:58:00.5365305Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mRetry Logic[2m > [22mshould retry on 503 Service Unavailable
2026-01-11T16:58:00.5366567Z [31m   → Connection error[39m
2026-01-11T16:58:00.6077831Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mRetry Logic[2m > [22mshould retry on network errors
2026-01-11T16:58:00.6078539Z [31m   → Connection error[39m
2026-01-11T16:58:00.6757333Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22mtimeout and error handling[2m > [22mshould throw error if resource has error status
2026-01-11T16:58:00.6843612Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mRetry Logic[2m > [22mshould not retry on 400 Bad Request
2026-01-11T16:58:00.6845183Z [31m   → expected "spy" to be called 1 times, but got 4 times[39m
2026-01-11T16:58:00.7594790Z  [32m✓[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mRetry Logic[2m > [22mshould respect maxRetries limit
2026-01-11T16:58:00.8336265Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mRetry Logic[2m > [22mshould retry rate limit errors
2026-01-11T16:58:00.8337383Z [31m   → Connection error[39m
2026-01-11T16:58:00.9106618Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mURL Construction[2m > [22mshould handle leading slashes in paths
2026-01-11T16:58:00.9107967Z [31m   → Connection error[39m
2026-01-11T16:58:00.9109623Z  [32m✓[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mURL Construction[2m > [22mshould handle trailing slashes in baseUrl
2026-01-11T16:58:00.9742598Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22mtimeout and error handling[2m > [22mshould throw error if response contains error property
2026-01-11T16:58:00.9836316Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mResponse Parsing[2m > [22mshould parse JSON responses
2026-01-11T16:58:00.9837057Z [31m   → Connection error[39m
2026-01-11T16:58:00.9957604Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22mtimeout and error handling[2m > [22mshould continue polling on temporary network errors
2026-01-11T16:58:01.0173555Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22mtimeout and error handling[2m > [22mshould throw error on last attempt if still failing
2026-01-11T16:58:01.0175927Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22mpolling options[2m > [22mshould use default options when not specified
2026-01-11T16:58:01.0594835Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22mpolling options[2m > [22mshould respect custom maxAttempts
2026-01-11T16:58:01.0625041Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mResponse Parsing[2m > [22mshould parse text responses
2026-01-11T16:58:01.0625951Z [31m   → Connection error[39m
2026-01-11T16:58:01.1117961Z (node:2339) PromiseRejectionHandledWarning: Promise rejection was handled asynchronously (rejection id: 5)
2026-01-11T16:58:01.1119426Z (Use `node --trace-warnings ...` to show where the warning was created)
2026-01-11T16:58:01.1123997Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22mpolling options[2m > [22mshould wait specified intervalMs between polls
2026-01-11T16:58:01.1125772Z  [32m✓[39m tests/unit/polling.test.ts[2m > [22mNfeClient.pollUntilComplete()[2m > [22mwith fake timers[2m > [22mshould timeout correctly with fake timers
2026-01-11T16:58:01.1373646Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mResponse Parsing[2m > [22mshould handle PDF responses as Buffer
2026-01-11T16:58:01.1374991Z [31m   → Connection error[39m
2026-01-11T16:58:01.2131949Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mResponse Parsing[2m > [22mshould handle XML responses as Buffer
2026-01-11T16:58:01.2133544Z [31m   → Connection error[39m
2026-01-11T16:58:01.2862613Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mHeaders[2m > [22mshould include User-Agent header
2026-01-11T16:58:01.2865411Z [31m   → Connection error[39m
2026-01-11T16:58:01.3601637Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mHeaders[2m > [22mshould include Accept header
2026-01-11T16:58:01.3604483Z [31m   → Connection error[39m
2026-01-11T16:58:01.4338829Z  [31m×[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mHeaders[2m > [22mshould include Content-Type for POST with JSON
2026-01-11T16:58:01.4340628Z [31m   → Connection error[39m
2026-01-11T16:58:01.4341950Z  [32m✓[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mHeaders[2m > [22mshould extract response headers
2026-01-11T16:58:01.4343894Z  [32m✓[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mUtility Functions[2m > [22mshould create default retry config
2026-01-11T16:58:01.4345819Z  [32m✓[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mUtility Functions[2m > [22mshould build HTTP config
2026-01-11T16:58:01.4347899Z  [32m✓[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mFetch Support Validation[2m > [22mshould throw error if fetch is not available
2026-01-11T16:58:01.6691515Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mNfeError Base Class[2m > [22mshould create error with message
2026-01-11T16:58:01.6693866Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mNfeError Base Class[2m > [22mshould have stack trace
2026-01-11T16:58:01.6696715Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mHTTP Errors[2m > [22mshould create AuthenticationError
2026-01-11T16:58:01.6698427Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mHTTP Errors[2m > [22mshould create ValidationError
2026-01-11T16:58:01.6700377Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mHTTP Errors[2m > [22mshould create NotFoundError
2026-01-11T16:58:01.6701959Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mHTTP Errors[2m > [22mshould create RateLimitError
2026-01-11T16:58:01.6703466Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mHTTP Errors[2m > [22mshould create ServerError
2026-01-11T16:58:01.6705125Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mConnection Errors[2m > [22mshould create ConnectionError
2026-01-11T16:58:01.6706866Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mConnection Errors[2m > [22mshould create TimeoutError
2026-01-11T16:58:01.6708733Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mSDK Errors[2m > [22mshould create ConfigurationError
2026-01-11T16:58:01.6710601Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mSDK Errors[2m > [22mshould create PollingTimeoutError
2026-01-11T16:58:01.6712235Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mSDK Errors[2m > [22mshould create InvoiceProcessingError
2026-01-11T16:58:01.6713994Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mErrorFactory[2m > [22mshould create AuthenticationError from HTTP 401
2026-01-11T16:58:01.6716173Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mErrorFactory[2m > [22mshould create ValidationError from HTTP 400
2026-01-11T16:58:01.6718354Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mErrorFactory[2m > [22mshould create NotFoundError from HTTP 404
2026-01-11T16:58:01.6720576Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mErrorFactory[2m > [22mshould create RateLimitError from HTTP 429
2026-01-11T16:58:01.6722368Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mErrorFactory[2m > [22mshould create ServerError from HTTP 500
2026-01-11T16:58:01.6724132Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mErrorFactory[2m > [22mshould create error from missing API key
2026-01-11T16:58:01.6725971Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mErrorFactory[2m > [22mshould create error from invalid Node version
2026-01-11T16:58:01.6727859Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mErrorFactory[2m > [22mshould create ConnectionError from network error
2026-01-11T16:58:01.6730131Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mErrorFactory[2m > [22mshould create TimeoutError from AbortError
2026-01-11T16:58:01.6731967Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mType Guards[2m > [22misNfeError should identify NfeError instances
2026-01-11T16:58:01.6733881Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mType Guards[2m > [22misAuthenticationError should identify AuthenticationError
2026-01-11T16:58:01.6735837Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mType Guards[2m > [22misValidationError should identify ValidationError
2026-01-11T16:58:01.6737640Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mType Guards[2m > [22misNotFoundError should identify NotFoundError
2026-01-11T16:58:01.6739849Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mType Guards[2m > [22misConnectionError should identify ConnectionError
2026-01-11T16:58:01.6741740Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mType Guards[2m > [22misTimeoutError should identify TimeoutError
2026-01-11T16:58:01.6743929Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mType Guards[2m > [22misPollingTimeoutError should identify PollingTimeoutError
2026-01-11T16:58:01.6746119Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mLegacy Aliases[2m > [22mBadRequestError should be ValidationError
2026-01-11T16:58:01.6747822Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mLegacy Aliases[2m > [22mAPIError should be NfeError
2026-01-11T16:58:01.6749838Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mLegacy Aliases[2m > [22mInternalServerError should be ServerError
2026-01-11T16:58:01.6751658Z  [32m✓[39m tests/unit/errors.test.ts[2m > [22mError System[2m > [22mErrorTypes object[2m > [22mshould export all error classes
2026-01-11T16:58:02.0794588Z  [32m✓[39m tests/core.test.ts[2m > [22mNfeClient Core[2m > [22mshould create client with valid config
2026-01-11T16:58:02.0796038Z  [31m×[39m tests/core.test.ts[2m > [22mNfeClient Core[2m > [22mshould throw error for invalid config
2026-01-11T16:58:02.0797068Z [31m   → expected [Function] to throw an error[39m
2026-01-11T16:58:02.0798145Z  [32m✓[39m tests/core.test.ts[2m > [22mNfeClient Core[2m > [22mshould use same URL for both environments
2026-01-11T16:58:02.0799641Z  [32m✓[39m tests/core.test.ts[2m > [22mError System[2m > [22mshould create proper error hierarchy
2026-01-11T16:58:02.0800872Z  [32m✓[39m tests/core.test.ts[2m > [22mError System[2m > [22mshould create bad request errors
2026-01-11T16:58:02.0802169Z  [31m×[39m tests/core.test.ts[2m > [22mServiceInvoices Resource[2m > [22mshould create service invoice
2026-01-11T16:58:02.0803236Z [31m   → expected undefined to be '123' // Object.is equality[39m
2026-01-11T16:58:02.0977597Z  [32m✓[39m tests/unit/webhooks.test.ts[2m > [22mWebhooksResource[2m > [22mlist[2m > [22mshould list all webhooks for a company
2026-01-11T16:58:02.0980397Z  [32m✓[39m tests/unit/webhooks.test.ts[2m > [22mWebhooksResource[2m > [22mretrieve[2m > [22mshould retrieve a specific webhook
2026-01-11T16:58:02.0982087Z  [32m✓[39m tests/unit/webhooks.test.ts[2m > [22mWebhooksResource[2m > [22mcreate[2m > [22mshould create a new webhook
2026-01-11T16:58:02.0983818Z  [32m✓[39m tests/unit/webhooks.test.ts[2m > [22mWebhooksResource[2m > [22mupdate[2m > [22mshould update an existing webhook
2026-01-11T16:58:02.0985524Z  [32m✓[39m tests/unit/webhooks.test.ts[2m > [22mWebhooksResource[2m > [22mdelete[2m > [22mshould delete a webhook
2026-01-11T16:58:02.0987321Z  [32m✓[39m tests/unit/webhooks.test.ts[2m > [22mWebhooksResource[2m > [22mError Handling[2m > [22mshould propagate HTTP client errors
2026-01-11T16:58:02.3556626Z  [32m✓[39m tests/unit/nfe-client.test.ts[2m > [22mNfeClient[2m > [22mconstructor[2m > [22mshould create client with valid configuration
2026-01-11T16:58:02.3558748Z  [32m✓[39m tests/unit/nfe-client.test.ts[2m > [22mNfeClient[2m > [22mconstructor[2m > [22mshould throw ConfigurationError when environment is invalid
2026-01-11T16:58:02.3560900Z  [32m✓[39m tests/unit/nfe-client.test.ts[2m > [22mNfeClient[2m > [22mconstructor[2m > [22mshould accept production environment
2026-01-11T16:58:02.3562660Z  [32m✓[39m tests/unit/nfe-client.test.ts[2m > [22mNfeClient[2m > [22mconstructor[2m > [22mshould accept development environment
2026-01-11T16:58:02.3564358Z  [32m✓[39m tests/unit/nfe-client.test.ts[2m > [22mNfeClient[2m > [22mconstructor[2m > [22mshould accept custom timeout
2026-01-11T16:58:02.3566091Z  [32m✓[39m tests/unit/nfe-client.test.ts[2m > [22mNfeClient[2m > [22mconstructor[2m > [22mshould accept custom retry configuration
2026-01-11T16:58:02.3567967Z  [32m✓[39m tests/unit/nfe-client.test.ts[2m > [22mNfeClient[2m > [22mresource instantiation[2m > [22mshould have serviceInvoices resource
2026-01-11T16:58:02.3570362Z  [32m✓[39m tests/unit/nfe-client.test.ts[2m > [22mNfeClient[2m > [22mresource instantiation[2m > [22mshould have companies resource
2026-01-11T16:58:02.3572264Z  [32m✓[39m tests/unit/nfe-client.test.ts[2m > [22mNfeClient[2m > [22mresource instantiation[2m > [22mshould have legalPeople resource
2026-01-11T16:58:02.3574142Z  [32m✓[39m tests/unit/nfe-client.test.ts[2m > [22mNfeClient[2m > [22mresource instantiation[2m > [22mshould have naturalPeople resource
2026-01-11T16:58:02.3576007Z  [32m✓[39m tests/unit/nfe-client.test.ts[2m > [22mNfeClient[2m > [22mresource instantiation[2m > [22mshould have webhooks resource
2026-01-11T16:58:02.3578068Z  [32m✓[39m tests/unit/nfe-client.test.ts[2m > [22mNfeClient[2m > [22mconfiguration validation[2m > [22mshould use default environment (production) when not specified
2026-01-11T16:58:02.3580288Z  [32m✓[39m tests/unit/nfe-client.test.ts[2m > [22mNfeClient[2m > [22mconfiguration validation[2m > [22mshould accept custom base URL
2026-01-11T16:58:02.5958093Z  [32m✓[39m tests/unit/natural-people.test.ts[2m > [22mNaturalPeopleResource[2m > [22mlist[2m > [22mshould list natural people for a company
2026-01-11T16:58:02.5960486Z  [32m✓[39m tests/unit/natural-people.test.ts[2m > [22mNaturalPeopleResource[2m > [22mretrieve[2m > [22mshould retrieve a natural person by id
2026-01-11T16:58:02.5961667Z  [32m✓[39m tests/unit/natural-people.test.ts[2m > [22mNaturalPeopleResource[2m > [22mcreate[2m > [22mshould create a new natural person
2026-01-11T16:58:02.5962780Z  [32m✓[39m tests/unit/natural-people.test.ts[2m > [22mNaturalPeopleResource[2m > [22mupdate[2m > [22mshould update an existing natural person
2026-01-11T16:58:02.5963847Z  [32m✓[39m tests/unit/natural-people.test.ts[2m > [22mNaturalPeopleResource[2m > [22mdelete[2m > [22mshould delete a natural person
2026-01-11T16:58:02.5965268Z  [32m✓[39m tests/unit/natural-people.test.ts[2m > [22mNaturalPeopleResource[2m > [22merror handling[2m > [22mshould propagate errors from http client
2026-01-11T16:58:02.8032188Z  [32m✓[39m tests/unit/legal-people.test.ts[2m > [22mLegalPeopleResource[2m > [22mlist[2m > [22mshould list legal people for a company
2026-01-11T16:58:02.8034132Z  [32m✓[39m tests/unit/legal-people.test.ts[2m > [22mLegalPeopleResource[2m > [22mretrieve[2m > [22mshould retrieve a legal person by id
2026-01-11T16:58:02.8036177Z  [32m✓[39m tests/unit/legal-people.test.ts[2m > [22mLegalPeopleResource[2m > [22mcreate[2m > [22mshould create a new legal person
2026-01-11T16:58:02.8037894Z  [32m✓[39m tests/unit/legal-people.test.ts[2m > [22mLegalPeopleResource[2m > [22mupdate[2m > [22mshould update an existing legal person
2026-01-11T16:58:02.8039217Z  [32m✓[39m tests/unit/legal-people.test.ts[2m > [22mLegalPeopleResource[2m > [22mdelete[2m > [22mshould delete a legal person
2026-01-11T16:58:02.8040372Z  [32m✓[39m tests/unit/legal-people.test.ts[2m > [22mLegalPeopleResource[2m > [22merror handling[2m > [22mshould propagate errors from http client
2026-01-11T16:58:02.8504500Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mGenerated Files[2m > [22mshould have generated directory
2026-01-11T16:58:02.8543990Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mGenerated Files[2m > [22mshould have index.ts in generated directory
2026-01-11T16:58:02.8546520Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mGenerated Files[2m > [22mshould have at least one spec-specific generated file
2026-01-11T16:58:02.8549821Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mGenerated Files[2m > [22mgenerated index should have proper exports
2026-01-11T16:58:02.8552119Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mGenerated Files[2m > [22mgenerated files should be valid TypeScript syntax
2026-01-11T16:58:02.8554830Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mGenerated Type Exports[2m > [22mshould export ServiceInvoice type
2026-01-11T16:58:02.8557112Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mGenerated Type Exports[2m > [22mshould export Company type
2026-01-11T16:58:02.8559621Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mGenerated Type Exports[2m > [22mshould export LegalPerson type
2026-01-11T16:58:02.8561913Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mGenerated Type Exports[2m > [22mshould export NaturalPerson type
2026-01-11T16:58:02.8564260Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mGenerated Type Exports[2m > [22mshould export CreateServiceInvoiceRequest type
2026-01-11T16:58:02.8566612Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mSpec Validation[2m > [22mshould validate correct OpenAPI 3.0 spec
2026-01-11T16:58:02.8568842Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mSpec Validation[2m > [22mshould detect Swagger 2.0 specs
2026-01-11T16:58:02.8571299Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mSpec Validation[2m > [22mshould have OpenAPI specs in spec directory
2026-01-11T16:58:02.8573501Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mGeneration Script[2m > [22mgenerate script should be executable
2026-01-11T16:58:02.8575528Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mGeneration Script[2m > [22mvalidate script should be executable
2026-01-11T16:58:02.8577870Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mGeneration Script[2m > [22mnpm run generate should work[33m 707[2mms[22m[39m
2026-01-11T16:58:02.8580425Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mGeneration Script[2m > [22mnpm run validate:spec should work[33m 1472[2mms[22m[39m
2026-01-11T16:58:02.8582031Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mType Integration[2m > [22mgenerated types should be importable from src/core/types
2026-01-11T16:58:02.8583490Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mType Integration[2m > [22mresources should use generated types
2026-01-11T16:58:02.8584998Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mTypeScript Compilation[2m > [22mgenerated types should pass TypeScript compilation
2026-01-11T16:58:02.8586587Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mGenerated Type Structure[2m > [22mServiceInvoice should have expected OpenAPI fields
2026-01-11T16:58:02.8588220Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mOpenAPI Type Generation[2m > [22mGenerated Type Structure[2m > [22mCompany should have typed taxRegime enum
2026-01-11T16:58:02.8589887Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mSpec File Integrity[2m > [22mmain service invoice spec should exist and be valid YAML
2026-01-11T16:58:02.8591220Z  [32m✓[39m tests/unit/generation.test.ts[2m > [22mSpec File Integrity[2m > [22mspecs should have OpenAPI version specified
2026-01-11T16:58:07.0784050Z  [31m×[39m tests/core.test.ts[2m > [22mServiceInvoices Resource[2m > [22mshould handle async polling[33m 5001[2mms[22m[39m
2026-01-11T16:58:07.0784985Z [31m   → Test timed out in 5000ms.
2026-01-11T16:58:07.0786034Z If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
2026-01-11T16:58:12.0796879Z  [31m×[39m tests/core.test.ts[2m > [22mCompanies Resource[2m > [22mshould list companies[33m 5001[2mms[22m[39m
2026-01-11T16:58:12.0797560Z [31m   → Test timed out in 5000ms.
2026-01-11T16:58:12.0798642Z If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
2026-01-11T16:58:17.0726084Z  [31m×[39m tests/core.test.ts[2m > [22mCompanies Resource[2m > [22mshould create company[33m 5002[2mms[22m[39m
2026-01-11T16:58:17.0727229Z [31m   → Test timed out in 5000ms.
2026-01-11T16:58:17.0728380Z If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
2026-01-11T16:58:17.0797231Z 
2026-01-11T16:58:17.0811281Z [31m⎯⎯⎯⎯⎯⎯[1m[7m Failed Tests 28 [27m[22m⎯⎯⎯⎯⎯⎯⎯[39m
2026-01-11T16:58:17.0811710Z 
2026-01-11T16:58:17.0815835Z [31m[1m[7m FAIL [27m[22m[39m tests/core.test.ts[2m > [22mNfeClient Core[2m > [22mshould throw error for invalid config
2026-01-11T16:58:17.0836035Z [31m[1mAssertionError[22m: expected [Function] to throw an error[39m
2026-01-11T16:58:17.0837290Z [36m [2m❯[22m tests/core.test.ts:[2m36:8[22m[39m
2026-01-11T16:58:17.1080584Z     [90m 34| [39m    [34mexpect[39m(() [33m=>[39m {
2026-01-11T16:58:17.1081788Z     [90m 35| [39m      [35mnew[39m [33mNfeClient[39m({ apiKey[33m:[39m [32m''[39m })[33m;[39m
2026-01-11T16:58:17.1082835Z     [90m 36| [39m    })[33m.[39m[34mtoThrow[39m()[33m;[39m
2026-01-11T16:58:17.1083489Z     [90m   | [39m       [31m^[39m
2026-01-11T16:58:17.1084002Z     [90m 37| [39m  })[33m;[39m
2026-01-11T16:58:17.1084457Z     [90m 38| [39m
2026-01-11T16:58:17.1084679Z 
2026-01-11T16:58:17.1085123Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/28]⎯[22m[39m
2026-01-11T16:58:17.1085477Z 
2026-01-11T16:58:17.1088338Z [31m[1m[7m FAIL [27m[22m[39m tests/core.test.ts[2m > [22mServiceInvoices Resource[2m > [22mshould create service invoice
2026-01-11T16:58:17.1091515Z [31m[1mAssertionError[22m: expected undefined to be '123' // Object.is equality[39m
2026-01-11T16:58:17.1092139Z 
2026-01-11T16:58:17.1092299Z - Expected: 
2026-01-11T16:58:17.1092633Z "123"
2026-01-11T16:58:17.1092792Z 
2026-01-11T16:58:17.1092945Z + Received: 
2026-01-11T16:58:17.1093256Z undefined
2026-01-11T16:58:17.1093431Z 
2026-01-11T16:58:17.1093953Z [36m [2m❯[22m tests/core.test.ts:[2m111:24[22m[39m
2026-01-11T16:58:17.1099409Z     [90m109| [39m    })[33m;[39m
2026-01-11T16:58:17.1099978Z     [90m110| [39m
2026-01-11T16:58:17.1102832Z     [90m111| [39m    [34mexpect[39m(invoice[33m.[39mid)[33m.[39m[34mtoBe[39m([32m'123'[39m)[33m;[39m
2026-01-11T16:58:17.1103924Z     [90m   | [39m                       [31m^[39m
2026-01-11T16:58:17.1105225Z     [90m112| [39m    [34mexpect[39m(invoice[33m.[39mflowStatus)[33m.[39m[34mtoBe[39m([32m'WaitingSend'[39m)[33m;[39m
2026-01-11T16:58:17.1106355Z     [90m113| [39m  })[33m;[39m
2026-01-11T16:58:17.1106668Z 
2026-01-11T16:58:17.1107118Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/28]⎯[22m[39m
2026-01-11T16:58:17.1107504Z 
2026-01-11T16:58:17.1108569Z [31m[1m[7m FAIL [27m[22m[39m tests/core.test.ts[2m > [22mServiceInvoices Resource[2m > [22mshould handle async polling
2026-01-11T16:58:17.1110567Z [31m[1m[7m FAIL [27m[22m[39m tests/core.test.ts[2m > [22mCompanies Resource[2m > [22mshould list companies
2026-01-11T16:58:17.1112228Z [31m[1m[7m FAIL [27m[22m[39m tests/core.test.ts[2m > [22mCompanies Resource[2m > [22mshould create company
2026-01-11T16:58:17.1113381Z [31m[1mError[22m: Test timed out in 5000ms.
2026-01-11T16:58:17.1114829Z If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
2026-01-11T16:58:17.1116146Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/28]⎯[22m[39m
2026-01-11T16:58:17.1116519Z 
2026-01-11T16:58:17.1117853Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mGET Requests[2m > [22mshould make successful GET request
2026-01-11T16:58:17.1119549Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:17.1120714Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:17.1158111Z     [90m195| [39m    }
2026-01-11T16:58:17.1158934Z     [90m196| [39m
2026-01-11T16:58:17.1161711Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:17.1162873Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:17.1163393Z     [90m198| [39m  }
2026-01-11T16:58:17.1163810Z     [90m199| [39m
2026-01-11T16:58:17.1164804Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:17.1166124Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:17.1167231Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m53:24[22m[39m
2026-01-11T16:58:17.1167707Z 
2026-01-11T16:58:17.1168162Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:17.1175825Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: response.headers.forEach is not a function }[39m
2026-01-11T16:58:17.1183238Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/28]⎯[22m[39m
2026-01-11T16:58:17.1183638Z 
2026-01-11T16:58:17.1185082Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mGET Requests[2m > [22mshould include query parameters in GET request
2026-01-11T16:58:17.1186848Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:17.1188305Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:17.1191272Z     [90m195| [39m    }
2026-01-11T16:58:17.1192498Z     [90m196| [39m
2026-01-11T16:58:17.1194267Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:17.1196260Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:17.1196916Z     [90m198| [39m  }
2026-01-11T16:58:17.1198255Z     [90m199| [39m
2026-01-11T16:58:17.1199693Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:17.1203403Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:17.1204583Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m73:7[22m[39m
2026-01-11T16:58:17.1205072Z 
2026-01-11T16:58:17.1205544Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:17.1207049Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: response.headers.forEach is not a function }[39m
2026-01-11T16:58:17.1208435Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/28]⎯[22m[39m
2026-01-11T16:58:17.1208805Z 
2026-01-11T16:58:17.1213171Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mGET Requests[2m > [22mshould omit undefined query parameters
2026-01-11T16:58:17.1214712Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:17.1215914Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:17.1216799Z     [90m195| [39m    }
2026-01-11T16:58:17.1217259Z     [90m196| [39m
2026-01-11T16:58:17.1218414Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:17.1219758Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:17.1220757Z     [90m198| [39m  }
2026-01-11T16:58:17.1221438Z     [90m199| [39m
2026-01-11T16:58:17.1222415Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:17.1223686Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:17.1224842Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m88:7[22m[39m
2026-01-11T16:58:17.1225323Z 
2026-01-11T16:58:17.1225805Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:17.1227597Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: response.headers.forEach is not a function }[39m
2026-01-11T16:58:17.1229143Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/28]⎯[22m[39m
2026-01-11T16:58:17.1229516Z 
2026-01-11T16:58:17.1230993Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mPOST Requests[2m > [22mshould make successful POST request with JSON body
2026-01-11T16:58:17.1232533Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:17.1233737Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:17.1235809Z     [90m195| [39m    }
2026-01-11T16:58:17.1236248Z     [90m196| [39m
2026-01-11T16:58:17.1237420Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:17.1238576Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:17.1239283Z     [90m198| [39m  }
2026-01-11T16:58:17.1239725Z     [90m199| [39m
2026-01-11T16:58:17.1240659Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:17.1241813Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:17.1242876Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m114:24[22m[39m
2026-01-11T16:58:17.1243323Z 
2026-01-11T16:58:17.1243769Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:17.1245186Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: response.headers.forEach is not a function }[39m
2026-01-11T16:58:17.1246392Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[7/28]⎯[22m[39m
2026-01-11T16:58:17.1246728Z 
2026-01-11T16:58:17.1247954Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mPUT Requests[2m > [22mshould make successful PUT request
2026-01-11T16:58:17.1249780Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:17.1250825Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:17.1251591Z     [90m195| [39m    }
2026-01-11T16:58:17.1251958Z     [90m196| [39m
2026-01-11T16:58:17.1253039Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:17.1254203Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:17.1254770Z     [90m198| [39m  }
2026-01-11T16:58:17.1255208Z     [90m199| [39m
2026-01-11T16:58:17.1256173Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:17.1257449Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:17.1258551Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m161:24[22m[39m
2026-01-11T16:58:17.1259215Z 
2026-01-11T16:58:17.1259657Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:17.1261309Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: response.headers.forEach is not a function }[39m
2026-01-11T16:58:17.1262547Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[8/28]⎯[22m[39m
2026-01-11T16:58:17.1262882Z 
2026-01-11T16:58:17.1264096Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mAuthentication[2m > [22mshould include Basic Auth header
2026-01-11T16:58:17.1295661Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:17.1296872Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:17.1297794Z     [90m195| [39m    }
2026-01-11T16:58:17.1298244Z     [90m196| [39m
2026-01-11T16:58:17.1299624Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:17.1300789Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:17.1301311Z     [90m198| [39m  }
2026-01-11T16:58:17.1301754Z     [90m199| [39m
2026-01-11T16:58:17.1305123Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:17.1306473Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:17.1307598Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m194:7[22m[39m
2026-01-11T16:58:17.1308049Z 
2026-01-11T16:58:17.1308514Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:17.1310214Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: response.headers.forEach is not a function }[39m
2026-01-11T16:58:17.1311543Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[9/28]⎯[22m[39m
2026-01-11T16:58:17.1311905Z 
2026-01-11T16:58:17.1313276Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mAuthentication[2m > [22mshould throw AuthenticationError on 401
2026-01-11T16:58:17.1315751Z [31m[1mAssertionError[22m: expected ConnectionError: Connection error { …(4) } to match object { name: 'AuthenticationError', …(1) }
2026-01-11T16:58:17.1317160Z (13 matching properties omitted from actual)[39m
2026-01-11T16:58:17.1317563Z 
2026-01-11T16:58:17.1317716Z - Expected
2026-01-11T16:58:17.1318026Z + Received
2026-01-11T16:58:17.1318386Z 
2026-01-11T16:58:17.1318535Z   Object {
2026-01-11T16:58:17.1318837Z -   "code": 401,
2026-01-11T16:58:17.1319482Z -   "name": "AuthenticationError",
2026-01-11T16:58:17.1319960Z +   "code": undefined,
2026-01-11T16:58:17.1320421Z +   "name": "ConnectionError",
2026-01-11T16:58:17.1320828Z   }
2026-01-11T16:58:17.1321015Z 
2026-01-11T16:58:17.1326360Z [36m [2m❯[22m tests/unit/http-client.test.ts:[2m210:7[22m[39m
2026-01-11T16:58:17.1428016Z     [90m208| [39m
2026-01-11T16:58:17.1428716Z     [90m209| [39m      [90m// 401 errors should not retry[39m
2026-01-11T16:58:17.1430575Z     [90m210| [39m      [35mawait[39m [34mexpect[39m(httpClient[33m.[39m[35mget[39m([32m'/test'[39m))[33m.[39mrejects[33m.[39m[34mtoMatchObject[39m({
2026-01-11T16:58:17.1431852Z     [90m   | [39m      [31m^[39m
2026-01-11T16:58:17.1432744Z     [90m211| [39m        name[33m:[39m [32m'AuthenticationError'[39m[33m,[39m
2026-01-11T16:58:17.1433702Z     [90m212| [39m        code[33m:[39m [34m401[39m[33m,[39m
2026-01-11T16:58:17.1434144Z 
2026-01-11T16:58:17.1434606Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[10/28]⎯[22m[39m
2026-01-11T16:58:17.1434974Z 
2026-01-11T16:58:17.1436359Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mError Handling[2m > [22mshould throw ValidationError on 400
2026-01-11T16:58:17.1438584Z [31m[1mAssertionError[22m: expected ConnectionError: Connection error { …(4) } to match object { name: 'ValidationError', code: 400 }
2026-01-11T16:58:17.1440264Z (13 matching properties omitted from actual)[39m
2026-01-11T16:58:17.1440706Z 
2026-01-11T16:58:17.1440848Z - Expected
2026-01-11T16:58:17.1441167Z + Received
2026-01-11T16:58:17.1441341Z 
2026-01-11T16:58:17.1441481Z   Object {
2026-01-11T16:58:17.1441790Z -   "code": 400,
2026-01-11T16:58:17.1442447Z -   "name": "ValidationError",
2026-01-11T16:58:17.1442948Z +   "code": undefined,
2026-01-11T16:58:17.1443402Z +   "name": "ConnectionError",
2026-01-11T16:58:17.1443818Z   }
2026-01-11T16:58:17.1443986Z 
2026-01-11T16:58:17.1444613Z [36m [2m❯[22m tests/unit/http-client.test.ts:[2m234:7[22m[39m
2026-01-11T16:58:17.1445299Z     [90m232| [39m
2026-01-11T16:58:17.1445873Z     [90m233| [39m      [90m// 400 errors should not retry[39m
2026-01-11T16:58:17.1447320Z     [90m234| [39m      [35mawait[39m [34mexpect[39m(httpClient[33m.[39m[35mget[39m([32m'/test'[39m))[33m.[39mrejects[33m.[39m[34mtoMatchObject[39m({
2026-01-11T16:58:17.1448508Z     [90m   | [39m      [31m^[39m
2026-01-11T16:58:17.1449579Z     [90m235| [39m        name[33m:[39m [32m'ValidationError'[39m[33m,[39m
2026-01-11T16:58:17.1450538Z     [90m236| [39m        code[33m:[39m [34m400[39m[33m,[39m
2026-01-11T16:58:17.1450992Z 
2026-01-11T16:58:17.1451469Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[11/28]⎯[22m[39m
2026-01-11T16:58:17.1451846Z 
2026-01-11T16:58:17.1453161Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mError Handling[2m > [22mshould throw NotFoundError on 404
2026-01-11T16:58:17.1455196Z [31m[1mAssertionError[22m: expected ConnectionError: Connection error { …(4) } to match object { name: 'NotFoundError', code: 404 }
2026-01-11T16:58:17.1456399Z (13 matching properties omitted from actual)[39m
2026-01-11T16:58:17.1456766Z 
2026-01-11T16:58:17.1456907Z - Expected
2026-01-11T16:58:17.1457225Z + Received
2026-01-11T16:58:17.1457410Z 
2026-01-11T16:58:17.1457542Z   Object {
2026-01-11T16:58:17.1457874Z -   "code": 404,
2026-01-11T16:58:17.1458268Z -   "name": "NotFoundError",
2026-01-11T16:58:17.1459148Z +   "code": undefined,
2026-01-11T16:58:17.1459572Z +   "name": "ConnectionError",
2026-01-11T16:58:17.1459937Z   }
2026-01-11T16:58:17.1460086Z 
2026-01-11T16:58:17.1460636Z [36m [2m❯[22m tests/unit/http-client.test.ts:[2m252:7[22m[39m
2026-01-11T16:58:17.1461252Z     [90m250| [39m
2026-01-11T16:58:17.1461814Z     [90m251| [39m      [90m// 404 errors should not retry[39m
2026-01-11T16:58:17.1463257Z     [90m252| [39m      [35mawait[39m [34mexpect[39m(httpClient[33m.[39m[35mget[39m([32m'/test'[39m))[33m.[39mrejects[33m.[39m[34mtoMatchObject[39m({
2026-01-11T16:58:17.1464365Z     [90m   | [39m      [31m^[39m
2026-01-11T16:58:17.1465076Z     [90m253| [39m        name[33m:[39m [32m'NotFoundError'[39m[33m,[39m
2026-01-11T16:58:17.1465868Z     [90m254| [39m        code[33m:[39m [34m404[39m[33m,[39m
2026-01-11T16:58:17.1466250Z 
2026-01-11T16:58:17.1466624Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[12/28]⎯[22m[39m
2026-01-11T16:58:17.1466961Z 
2026-01-11T16:58:17.1468392Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mError Handling[2m > [22mshould throw RateLimitError on 429 after retries
2026-01-11T16:58:17.1470929Z [31m[1mAssertionError[22m: expected ConnectionError: Connection error { …(4) } to match object { name: 'RateLimitError', code: 429 }
2026-01-11T16:58:17.1472178Z (13 matching properties omitted from actual)[39m
2026-01-11T16:58:17.1472556Z 
2026-01-11T16:58:17.1472690Z - Expected
2026-01-11T16:58:17.1472958Z + Received
2026-01-11T16:58:17.1473117Z 
2026-01-11T16:58:17.1473230Z   Object {
2026-01-11T16:58:17.1473503Z -   "code": 429,
2026-01-11T16:58:17.1473852Z -   "name": "RateLimitError",
2026-01-11T16:58:17.1474264Z +   "code": undefined,
2026-01-11T16:58:17.1474713Z +   "name": "ConnectionError",
2026-01-11T16:58:17.1475103Z   }
2026-01-11T16:58:17.1475259Z 
2026-01-11T16:58:17.1475834Z [36m [2m❯[22m tests/unit/http-client.test.ts:[2m276:7[22m[39m
2026-01-11T16:58:17.1476478Z     [90m274| [39m
2026-01-11T16:58:17.1477088Z     [90m275| [39m      [90m// Should fail after max retries[39m
2026-01-11T16:58:17.1478314Z     [90m276| [39m      [35mawait[39m [34mexpect[39m(promise)[33m.[39mrejects[33m.[39m[34mtoMatchObject[39m({
2026-01-11T16:58:17.1479696Z     [90m   | [39m      [31m^[39m
2026-01-11T16:58:17.1480477Z     [90m277| [39m        name[33m:[39m [32m'RateLimitError'[39m[33m,[39m
2026-01-11T16:58:17.1481332Z     [90m278| [39m        code[33m:[39m [34m429[39m[33m,[39m
2026-01-11T16:58:17.1481735Z 
2026-01-11T16:58:17.1482161Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[13/28]⎯[22m[39m
2026-01-11T16:58:17.1482504Z 
2026-01-11T16:58:17.1483879Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mError Handling[2m > [22mshould throw ServerError on 500 after retries
2026-01-11T16:58:17.1486038Z [31m[1mAssertionError[22m: expected ConnectionError: Connection error { …(4) } to match object { name: 'ServerError', code: 500 }
2026-01-11T16:58:17.1487315Z (13 matching properties omitted from actual)[39m
2026-01-11T16:58:17.1487693Z 
2026-01-11T16:58:17.1487830Z - Expected
2026-01-11T16:58:17.1488121Z + Received
2026-01-11T16:58:17.1488307Z 
2026-01-11T16:58:17.1488459Z   Object {
2026-01-11T16:58:17.1488754Z -   "code": 500,
2026-01-11T16:58:17.1489283Z -   "name": "ServerError",
2026-01-11T16:58:17.1489781Z +   "code": undefined,
2026-01-11T16:58:17.1490266Z +   "name": "ConnectionError",
2026-01-11T16:58:17.1490859Z   }
2026-01-11T16:58:17.1491067Z 
2026-01-11T16:58:17.1491665Z [36m [2m❯[22m tests/unit/http-client.test.ts:[2m298:7[22m[39m
2026-01-11T16:58:17.1492478Z     [90m296| [39m
2026-01-11T16:58:17.1493429Z     [90m297| [39m      [90m// Should fail after max retries[39m
2026-01-11T16:58:17.1495284Z     [90m298| [39m      [35mawait[39m [34mexpect[39m(promise)[33m.[39mrejects[33m.[39m[34mtoMatchObject[39m({
2026-01-11T16:58:17.1496876Z     [90m   | [39m      [31m^[39m
2026-01-11T16:58:17.1498213Z     [90m299| [39m        name[33m:[39m [32m'ServerError'[39m[33m,[39m
2026-01-11T16:58:17.1499481Z     [90m300| [39m        code[33m:[39m [34m500[39m[33m,[39m
2026-01-11T16:58:17.1500050Z 
2026-01-11T16:58:17.1500546Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[14/28]⎯[22m[39m
2026-01-11T16:58:17.1500927Z 
2026-01-11T16:58:17.1502476Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mRetry Logic[2m > [22mshould retry on 503 Service Unavailable
2026-01-11T16:58:17.1504015Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:17.1505235Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:17.1506232Z     [90m195| [39m    }
2026-01-11T16:58:17.1506843Z     [90m196| [39m
2026-01-11T16:58:17.1508121Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:17.1509692Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:17.1525426Z     [90m198| [39m  }
2026-01-11T16:58:17.1525983Z     [90m199| [39m
2026-01-11T16:58:17.1526989Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:17.1528262Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:17.1529553Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m363:24[22m[39m
2026-01-11T16:58:17.1530240Z 
2026-01-11T16:58:17.1530839Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:17.1532366Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: Cannot read properties of undefined (reading 'status') }[39m
2026-01-11T16:58:17.1533731Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[15/28]⎯[22m[39m
2026-01-11T16:58:17.1534094Z 
2026-01-11T16:58:17.1535439Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mRetry Logic[2m > [22mshould retry on network errors
2026-01-11T16:58:17.1536866Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:17.1537989Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:17.1538820Z     [90m195| [39m    }
2026-01-11T16:58:17.1539669Z     [90m196| [39m
2026-01-11T16:58:17.1540806Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:17.1541865Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:17.1542382Z     [90m198| [39m  }
2026-01-11T16:58:17.1542796Z     [90m199| [39m
2026-01-11T16:58:17.1543804Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:17.1545068Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:17.1546168Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m382:24[22m[39m
2026-01-11T16:58:17.1546655Z 
2026-01-11T16:58:17.1547078Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:17.1548591Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: Cannot read properties of undefined (reading 'status') }[39m
2026-01-11T16:58:17.1550153Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[16/28]⎯[22m[39m
2026-01-11T16:58:17.1550511Z 
2026-01-11T16:58:17.1551792Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mRetry Logic[2m > [22mshould not retry on 400 Bad Request
2026-01-11T16:58:17.1553497Z [31m[1mAssertionError[22m: expected "spy" to be called 1 times, but got 4 times[39m
2026-01-11T16:58:17.1554645Z [36m [2m❯[22m tests/unit/http-client.test.ts:[2m400:25[22m[39m
2026-01-11T16:58:17.1555270Z     [90m398| [39m
2026-01-11T16:58:17.1556343Z     [90m399| [39m      [35mawait[39m [34mexpect[39m(promise)[33m.[39mrejects[33m.[39m[34mtoThrow[39m()[33m;[39m
2026-01-11T16:58:17.1558110Z     [90m400| [39m      [34mexpect[39m(fetchMock)[33m.[39m[34mtoHaveBeenCalledTimes[39m([34m1[39m)[33m;[39m [90m// No retries[39m
2026-01-11T16:58:17.1559906Z     [90m   | [39m                        [31m^[39m
2026-01-11T16:58:17.1560516Z     [90m401| [39m    })[33m;[39m
2026-01-11T16:58:17.1560984Z     [90m402| [39m
2026-01-11T16:58:17.1561186Z 
2026-01-11T16:58:17.1561598Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[17/28]⎯[22m[39m
2026-01-11T16:58:17.1561934Z 
2026-01-11T16:58:17.1563129Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mRetry Logic[2m > [22mshould retry rate limit errors
2026-01-11T16:58:17.1564423Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:17.1565504Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:17.1566275Z     [90m195| [39m    }
2026-01-11T16:58:17.1566671Z     [90m196| [39m
2026-01-11T16:58:17.1567820Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:17.1569166Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:17.1569829Z     [90m198| [39m  }
2026-01-11T16:58:17.1570244Z     [90m199| [39m
2026-01-11T16:58:17.1571196Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:17.1572496Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:17.1573589Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m439:24[22m[39m
2026-01-11T16:58:17.1574030Z 
2026-01-11T16:58:17.1574460Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:17.1575974Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: Cannot read properties of undefined (reading 'status') }[39m
2026-01-11T16:58:17.1577307Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[18/28]⎯[22m[39m
2026-01-11T16:58:17.1577663Z 
2026-01-11T16:58:17.1579214Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mURL Construction[2m > [22mshould handle leading slashes in paths
2026-01-11T16:58:17.1580757Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:17.1582156Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:17.1583047Z     [90m195| [39m    }
2026-01-11T16:58:17.1583480Z     [90m196| [39m
2026-01-11T16:58:17.1584674Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:17.1585818Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:17.1586340Z     [90m198| [39m  }
2026-01-11T16:58:17.1586997Z     [90m199| [39m
2026-01-11T16:58:17.1588245Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:17.1589865Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:17.1590942Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m454:7[22m[39m
2026-01-11T16:58:17.1591380Z 
2026-01-11T16:58:17.1591823Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:17.1593352Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: response.headers.forEach is not a function }[39m
2026-01-11T16:58:17.1594678Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[19/28]⎯[22m[39m
2026-01-11T16:58:17.1595050Z 
2026-01-11T16:58:17.1596353Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mResponse Parsing[2m > [22mshould parse JSON responses
2026-01-11T16:58:17.1597852Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:17.1599145Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:17.1600021Z     [90m195| [39m    }
2026-01-11T16:58:17.1600449Z     [90m196| [39m
2026-01-11T16:58:17.1601600Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:17.1602962Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:17.1603445Z     [90m198| [39m  }
2026-01-11T16:58:17.1603836Z     [90m199| [39m
2026-01-11T16:58:17.1604786Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:17.1606084Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:17.1607192Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m494:24[22m[39m
2026-01-11T16:58:17.1607673Z 
2026-01-11T16:58:17.1608142Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:17.1609968Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: response.headers.forEach is not a function }[39m
2026-01-11T16:58:17.1611299Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[20/28]⎯[22m[39m
2026-01-11T16:58:17.1611655Z 
2026-01-11T16:58:17.1612915Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mResponse Parsing[2m > [22mshould parse text responses
2026-01-11T16:58:17.1614377Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:17.1615755Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:17.1616655Z     [90m195| [39m    }
2026-01-11T16:58:17.1617068Z     [90m196| [39m
2026-01-11T16:58:17.1618270Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:17.1619650Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:17.1620191Z     [90m198| [39m  }
2026-01-11T16:58:17.1620627Z     [90m199| [39m
2026-01-11T16:58:17.1621582Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:17.1622889Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:17.1624039Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m506:24[22m[39m
2026-01-11T16:58:17.1624497Z 
2026-01-11T16:58:17.1624954Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:17.1626386Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: response.headers.forEach is not a function }[39m
2026-01-11T16:58:17.1627638Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[21/28]⎯[22m[39m
2026-01-11T16:58:17.1628015Z 
2026-01-11T16:58:17.1629630Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mResponse Parsing[2m > [22mshould handle PDF responses as Buffer
2026-01-11T16:58:17.1631155Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:17.1632286Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:17.1633154Z     [90m195| [39m    }
2026-01-11T16:58:17.1633579Z     [90m196| [39m
2026-01-11T16:58:17.1634706Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:17.1636069Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:17.1636582Z     [90m198| [39m  }
2026-01-11T16:58:17.1637001Z     [90m199| [39m
2026-01-11T16:58:17.1637920Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:17.1639343Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:17.1640436Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m521:24[22m[39m
2026-01-11T16:58:17.1640913Z 
2026-01-11T16:58:17.1641396Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:17.1642892Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: response.headers.forEach is not a function }[39m
2026-01-11T16:58:17.1644211Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22/28]⎯[22m[39m
2026-01-11T16:58:17.1644575Z 
2026-01-11T16:58:17.1645888Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mResponse Parsing[2m > [22mshould handle XML responses as Buffer
2026-01-11T16:58:17.1647202Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:17.1648242Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:17.1648913Z     [90m195| [39m    }
2026-01-11T16:58:17.1649609Z     [90m196| [39m
2026-01-11T16:58:17.1650538Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:17.1651440Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:17.1651882Z     [90m198| [39m  }
2026-01-11T16:58:17.1652231Z     [90m199| [39m
2026-01-11T16:58:17.1653075Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:17.1654190Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:17.1655159Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m538:24[22m[39m
2026-01-11T16:58:17.1655566Z 
2026-01-11T16:58:17.1655940Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:17.1657452Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: response.headers.forEach is not a function }[39m
2026-01-11T16:58:17.1658509Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[23/28]⎯[22m[39m
2026-01-11T16:58:17.1658800Z 
2026-01-11T16:58:17.1660024Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mHeaders[2m > [22mshould include User-Agent header
2026-01-11T16:58:17.1661126Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:17.1662054Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:17.1662719Z     [90m195| [39m    }
2026-01-11T16:58:17.1663088Z     [90m196| [39m
2026-01-11T16:58:17.1664122Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:17.1665147Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:17.1665646Z     [90m198| [39m  }
2026-01-11T16:58:17.1666037Z     [90m199| [39m
2026-01-11T16:58:17.1666956Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:17.1668195Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:17.1669426Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m554:7[22m[39m
2026-01-11T16:58:17.1669870Z 
2026-01-11T16:58:17.1670310Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:17.1671748Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: response.headers.forEach is not a function }[39m
2026-01-11T16:58:17.1672999Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[24/28]⎯[22m[39m
2026-01-11T16:58:17.1673338Z 
2026-01-11T16:58:17.1674528Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mHeaders[2m > [22mshould include Accept header
2026-01-11T16:58:17.1676082Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:17.1677195Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:17.1678007Z     [90m195| [39m    }
2026-01-11T16:58:17.1678430Z     [90m196| [39m
2026-01-11T16:58:17.1679728Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:17.1680846Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:17.1681338Z     [90m198| [39m  }
2026-01-11T16:58:17.1681751Z     [90m199| [39m
2026-01-11T16:58:17.1682674Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:17.1683910Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:17.1684958Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m569:7[22m[39m
2026-01-11T16:58:17.1685413Z 
2026-01-11T16:58:17.1685812Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:17.1687252Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: response.headers.forEach is not a function }[39m
2026-01-11T16:58:17.1688530Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[25/28]⎯[22m[39m
2026-01-11T16:58:17.1688875Z 
2026-01-11T16:58:17.1690377Z [31m[1m[7m FAIL [27m[22m[39m tests/unit/http-client.test.ts[2m > [22mHttpClient[2m > [22mHeaders[2m > [22mshould include Content-Type for POST with JSON
2026-01-11T16:58:17.1691759Z [31m[1mConnectionError[22m: Connection error[39m
2026-01-11T16:58:17.1692850Z [36m [2m❯[22m Function.fromNetworkError src/core/errors/index.ts:[2m197:12[22m[39m
2026-01-11T16:58:17.1693636Z     [90m195| [39m    }
2026-01-11T16:58:17.1694049Z     [90m196| [39m
2026-01-11T16:58:17.1695199Z     [90m197| [39m    [35mreturn[39m [35mnew[39m [33mConnectionError[39m([32m'Connection error'[39m[33m,[39m error)[33m;[39m
2026-01-11T16:58:17.1696291Z     [90m   | [39m           [31m^[39m
2026-01-11T16:58:17.1696762Z     [90m198| [39m  }
2026-01-11T16:58:17.1697127Z     [90m199| [39m
2026-01-11T16:58:17.1698220Z [90m [2m❯[22m HttpClient.executeRequest src/core/http/client.ts:[2m132:28[22m[39m
2026-01-11T16:58:17.1699646Z [90m [2m❯[22m HttpClient.request src/core/http/client.ts:[2m77:26[22m[39m
2026-01-11T16:58:17.1700665Z [90m [2m❯[22m tests/unit/http-client.test.ts:[2m583:7[22m[39m
2026-01-11T16:58:17.1701102Z 
2026-01-11T16:58:17.1701494Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:17.1702902Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: TypeError: response.headers.forEach is not a function }[39m
2026-01-11T16:58:17.1704155Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[26/28]⎯[22m[39m
2026-01-11T16:58:17.1704481Z 
2026-01-11T16:58:17.1704491Z 
2026-01-11T16:58:17.1704932Z [31m⎯⎯⎯⎯[1m[7m Unhandled Rejection [27m[22m⎯⎯⎯⎯⎯[39m
2026-01-11T16:58:17.1706226Z [31m[1mPollingTimeoutError[22m: Polling timeout after 3 attempts. Resource may still be processing.[39m
2026-01-11T16:58:17.1707607Z [36m [2m❯[22m NfeClient.pollUntilComplete src/core/client.ts:[2m555:11[22m[39m
2026-01-11T16:58:17.1708634Z [31m⎯⎯⎯⎯⎯⎯[1m[7m Unhandled Errors [27m[22m⎯⎯⎯⎯⎯⎯[39m
2026-01-11T16:58:17.1709344Z [31m[1m
2026-01-11T16:58:17.1709842Z Vitest caught 1 unhandled error during the test run.
2026-01-11T16:58:17.1711213Z This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.[22m[39m
2026-01-11T16:58:17.1754664Z     [90m553| [39m    }
2026-01-11T16:58:17.1755556Z     [90m554| [39m
2026-01-11T16:58:17.1756847Z     [90m555| [39m    [35mthrow[39m [35mnew[39m [33mPollingTimeoutError[39m(
2026-01-11T16:58:17.1758533Z     [90m   | [39m          [31m^[39m
2026-01-11T16:58:17.1759874Z     [90m556| [39m      [32m`Polling timeout after [39m[36m${[39mmaxAttempts[36m}[39m[32m attempts. Resource may sti[39m…
2026-01-11T16:58:17.1761349Z     [90m557| [39m      { maxAttempts[33m,[39m intervalMs }
2026-01-11T16:58:17.1761742Z 
2026-01-11T16:58:17.1762157Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2026-01-11T16:58:17.1763375Z [31m[1mSerialized Error:[22m[39m [90m{ code: undefined, details: { maxAttempts: 3, intervalMs: 1000 } }[39m
2026-01-11T16:58:17.1764561Z [31mThis error originated in "[1mtests/unit/polling.test.ts[22m" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.[39m
2026-01-11T16:58:17.1765770Z [31mThe latest test that might've caused the error is "[1mshould timeout correctly with fake timers[22m". It might mean one of the following:
2026-01-11T16:58:17.1766479Z - The error was thrown, while Vitest was running this test.
2026-01-11T16:58:17.1767248Z - If the error occurred after the test had been completed, this was the last documented test before it was thrown.[39m
2026-01-11T16:58:17.1767680Z 
2026-01-11T16:58:17.1767900Z [31m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[39m
2026-01-11T16:58:17.1800603Z [2m Test Files [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m10 passed[39m[22m[2m | [22m[33m3 skipped[39m[90m (15)[39m
2026-01-11T16:58:17.1803397Z [2m      Tests [22m [1m[31m28 failed[39m[22m[2m | [22m[1m[32m179 passed[39m[22m[2m | [22m[33m32 skipped[39m[90m (239)[39m
2026-01-11T16:58:17.1804575Z [2m     Errors [22m [1m[31m1 error[39m[22m
2026-01-11T16:58:17.1805206Z [2m   Start at [22m 16:57:58
2026-01-11T16:58:17.1806522Z [2m   Duration [22m 18.11s[2m (transform 548ms, setup 104ms, collect 845ms, tests 21.28s, environment 3ms, prepare 1.44s)[22m
2026-01-11T16:58:17.1807319Z 
2026-01-11T16:58:17.2182006Z ##[error]Process completed with exit code 1.
2026-01-11T16:58:17.2239565Z ##[group]Run actions/upload-artifact@v4
2026-01-11T16:58:17.2239868Z with:
2026-01-11T16:58:17.2240058Z   name: test-results-node-18.x
2026-01-11T16:58:17.2240304Z   path: coverage/
test-results/

2026-01-11T16:58:17.2240570Z   if-no-files-found: warn
2026-01-11T16:58:17.2240787Z   compression-level: 6
2026-01-11T16:58:17.2240987Z   overwrite: false
2026-01-11T16:58:17.2241179Z   include-hidden-files: false
2026-01-11T16:58:17.2241397Z ##[endgroup]
2026-01-11T16:58:17.4393924Z Multiple search paths detected. Calculating the least common ancestor of all paths
2026-01-11T16:58:17.4396253Z The least common ancestor is /home/runner/work/client-nodejs/client-nodejs. This will be the root directory of the artifact
2026-01-11T16:58:17.4409698Z ##[warning]No files were found with the provided path: coverage/
test-results/. No artifacts will be uploaded.
2026-01-11T16:58:17.4534429Z Post job cleanup.
2026-01-11T16:58:17.5460420Z [command]/usr/bin/git version
2026-01-11T16:58:17.5495331Z git version 2.52.0
2026-01-11T16:58:17.5538382Z Temporarily overriding HOME='/home/runner/work/_temp/49a42260-7a4a-478c-982f-17f87e307950' before making global git config changes
2026-01-11T16:58:17.5539396Z Adding repository directory to the temporary git global config as a safe directory
2026-01-11T16:58:17.5549952Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/client-nodejs/client-nodejs
2026-01-11T16:58:17.5581778Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2026-01-11T16:58:17.5612781Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2026-01-11T16:58:17.5900771Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2026-01-11T16:58:17.5920042Z http.https://github.com/.extraheader
2026-01-11T16:58:17.5932171Z [command]/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
2026-01-11T16:58:17.5961486Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2026-01-11T16:58:17.6174413Z [command]/usr/bin/git config --local --name-only --get-regexp ^includeIf\.gitdir:
2026-01-11T16:58:17.6204374Z [command]/usr/bin/git submodule foreach --recursive git config --local --show-origin --name-only --get-regexp remote.origin.url
2026-01-11T16:58:17.6538247Z Cleaning up orphan processes
